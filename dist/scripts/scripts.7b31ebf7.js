function numberWithCommas(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}angular.module("ohanaApp",["ngAnimate","ui.bootstrap","ui.router","ui.select","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","summernote","ui.timepicker","LocalStorageModule","ngMap","firebase","angularFileUpload","bcherny/formatAsCurrency","xeditable","chart.js","ui.map"]).config(["$stateProvider","$urlRouterProvider","$routeProvider","$httpProvider",function(a,b,c,d){c.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl as home"}).when("/whoweare",{templateUrl:"views/whoweare.html"}).when("/getinvolved",{templateUrl:"views/getinvolved.html",controller:"GetinvolvedCtrl as getinvolved"}).when("/chapters",{templateUrl:"views/chapters.html",controller:"ChaptersCtrl as chapters"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl as login"}).when("/manage/dash",{templateUrl:"views/manage/dash.html",controller:"DashCtrl as dash"}).when("/dash/upcoming-events",{templateUrl:"views/manage/dash.upcomingEvents.html",controller:"DashUpcomingEventsCtrl as dashUpcomingEvents"}).when("/dash/broadcasts",{templateUrl:"views/manage/dash.broadcasts.html",controller:"DashBroadcastsCtrl as dashBroadcasts"}).when("/manage/events",{templateUrl:"views/manage/events.html",controller:"EventsCtrl as events"}).when("/events",{templateUrl:"views/publicevents.html",controller:"PubliceventsCtrl as publicEvents"}).when("/details/:id",{templateUrl:"views/manage/event.details.html",controller:"DetailsCtrl as eventDetail"}).when("/description",{templateUrl:"views/manage/event.details.description.html",controller:"EventdetaildescriptionCtrl as eventDescription"}).when("/volunteers",{templateUrl:"views/manage/event.details.volunteers.html",controller:"EventdetailvolunteersCtrl as eventVolunteers"}).when("/participants",{templateUrl:"views/manage/event.details.participants.html",controller:"EventdetailparticipantsCtrl as eventParticipants"}).when("/inventory",{templateUrl:"views/manage/event.details.equipment.html",controller:"InventoryCtrl as inventory"}).when("/notifications",{templateUrl:"views/manage/event.details.notifications.html",controller:"EventdetailnotificationCtrl as eventNotifications"}).when("/manage/broadcasts",{templateUrl:"views/manage/broadcasts.html",controller:"BroadcastsCtrl as broadcasts"}).when("/manage/inventory",{templateUrl:"views/manage/inventory.html",controller:"InventoryCtrl as inventory"}).when("/manage/training",{templateUrl:"views/manage/training.html"}).when("/manage/hours",{templateUrl:"views/manage/hours.html"}).when("/manage/directory",{templateUrl:"views/manage/directory.html",controller:"DirectoryCtrl as directory"}).when("/manage/profile",{templateUrl:"views/manage/profile.html",controller:"ProfileCtrl as profile"}).when("/manage/chadmin",{templateUrl:"views/manage/chadmin.html",controller:"ChadminCtrl",controllerAs:"manage/chadmin"}).when("/manage/regAdmin",{templateUrl:"views/manage/regadmin.html"}).when("/superAdmin",{templateUrl:"views/manage/superadmin.html"}).when("/publicEvents",{templateUrl:"views/public.events.html",controller:"PublicEventsCtrl",controllerAs:"public.events"}).when("/expense/expensedetail/:BillId",{templateUrl:"views/expense/expensedetail.html",controller:"ExpenseDetailsCtrl",controllerAs:"expensedetail"}).when("/expense/newexpense",{templateUrl:"views/expense/newexpense.html",controller:"NewExpenseCtrl",controllerAs:"newexpense"}).when("/expense/viewexpense",{templateUrl:"views/expense/viewexpense.html",controller:"ViewExpenseController",controllerAs:"expense/viewexpense"}).when("/manage/chapterchat",{templateUrl:"views/manage/chapterchat.html",controller:"ManageChapterchatCtrl",controllerAs:"manage/chapterchat"}).when("/expense/CustomDateRange",{templateUrl:"views/expense/customdaterange.html",controller:"ExpenseCustomdaterangeCtrl",controllerAs:"expense/CustomDateRange"}).when("/expense/overview",{templateUrl:"views/expense/overview.html",controller:"ExpenseOverviewCtrl",controllerAs:"expense/overview"}).when("/expense/expenseconfig",{templateUrl:"views/expense/expenseconfig.html",controller:"ExpenseExpenseconfigCtrl",controllerAs:"expense/expenseconfig"}).otherwise({redirectTo:"/home"})}]).run(["$q","commonServices","$rootScope","$firebaseAuth","userService","editableOptions",function(a,b,c,d,e,f){f.theme="bs3";var g={apiKey:"AIzaSyB0ush9ktHEJPW1C6TBmc44ANBcusetpEg",authDomain:"herosonthewater-55a79.firebaseapp.com",databaseURL:"https://herosonthewater-55a79.firebaseio.com",projectId:"herosonthewater-55a79",storageBucket:"herosonthewater-55a79.appspot.com",messagingSenderId:"183234806884"};0===firebase.apps.length&&firebase.initializeApp(g),c.authObj=d(),c.siteData={states:[],roles:[],regions:[],regionsChapters:[],chapters:[]};var h=b.getData("/siteData/");a.all([h]).then(function(a){_.each(a[0].states,function(a){c.siteData.states.push(a)}),_.each(a[0].roles,function(a){c.siteData.roles.push(a)}),_.each(a[0].regions,function(a){var b=[];_.each(a.chapters,function(a){c.siteData.chapters.push({value:a.value,text:a.text}),b.push({value:a.value,text:a.text})}),c.siteData.regions.push({value:a.value,text:a.text}),c.siteData.regionsChapters.push({value:a.value,text:a.text,chapters:b})})}),c.authObj.$onAuthStateChanged(function(d){if(d){var f=firebase.auth().currentUser.uid,g=b.getData("/userData/"+f),h=b.getData("/userRoles/"+f+"/role/");a.all([g,h]).then(function(a){var b=a[0],d=a[1];console.log("Logged in!"),console.log("UID: "+f),console.log("Name: "+b.name.first),console.log("Chapter: "+b.Chapter),console.log("Role: "+d),e.setRole(d),e.setUserData(b),e.setUserName(b.name.first,b.name.last),e.setId(f),e.setChapter(b.Chapter),c.sessionState=!0,c.$broadcast("changeSessionUserRole",d),c.$broadcast("changeSessionState",!0)})}else console.log("Logged Out..."),e.setRole(""),e.setUserData(""),e.setUserName("",""),e.setId(""),e.setChapter("")})}]).filter("unique",function(){return function(a,b){var c,d,e,f,g=[],h=(a.length,[]);for(c=0;c<a.length;c++){for(f=a[c],e=!0,d=0;d<g.length;d++)f[b]==g[d]&&(e=!1);e&&(g.push(f[b]),h.push(f))}return h}}).filter("dateRange",function(){return function(a,b,c){var d=[];return null!=a&&null!=b&&null!=c?(angular.forEach(a,function(a){var e=a.SubmitDate;Date.parse(e)>=Date.parse(b)&&Date.parse(e)<=Date.parse(c)&&d.push(a)}),d):void 0}}),angular.module("ohanaApp").service("Api",["$resource",function(a){"use strict";var b=window.location,c="localhost"===b.hostname||b.hostname.indexOf("txcdtl08tm638x")>-1?"http://ec2-52-43-72-217.us-west-2.compute.amazonaws.com:1337":b.protocol+"//"+b.hostname;return{createChapter:a(c+"/region/:region_id/create_chapter",{region_id:"@region_id"},{save:{method:"POST",isArray:!1}}),regionAddChapter:a(c+"/region/:region_id/add_chapter/:chapter_id",{region_id:"@region_id",chapter_id:"@chapter_id"},{update:{method:"PUT",isArray:!1}}),regionDeleteChapter:a(c+"/region/:region_id/delete_chapter/:chapter_id",{region_id:"@region_id",chapter_id:"@chapter_id"},{remove:{method:"POST",isArray:!1}}),chapter:a(c+"/chapter",{},{}),chapterCreateMember:a(c+"/chapter/:chapter_id/create_member",{chapter_id:"@chapter_id"},{save:{method:"POST",isArray:!1}}),chapterRemoveMember:a(c+"/chapter/:chapter_id/delete_member/:member_id",{member_id:"@member_id",chapter_id:"@chapter_id"},{remove:{method:"DELETE",isArray:!1}}),chapterUpdateMember:a(c+"/chapter/:chapter_id/update_member/:member_id",{member_id:"@member_id",chapter_id:"@chapter_id"},{update:{method:"POST",isArray:!1}}),createEvent:a(c+"/chapter/:chapter_id/create_event",{chapter_id:"@chapter_id"},{save:{method:"POST",isArray:!1}}),chapterAddEvent:a(c+"/chapter/:chapter_id/add_event/:event_id",{event_id:"@event_id",chapter_id:"@chapter_id"},{update:{method:"PUT",isArray:!1}}),chapterRemoveEvent:a(c+"/chapter/:chapter_id/delete_event/:event_id",{event_id:"@event_id",chapter_id:"@chapter_id"},{remove:{method:"POST",isArray:!1}}),createItem:a(c+"/chapter/:chapter_id/create_item",{chapter_id:"@chapter_id"},{save:{method:"POST",isArray:!1}}),chapterAddItem:a(c+"/chapter/:chapter_id/add_item/:item_id",{item_id:"@item_id",chapter_id:"@chapter_id"},{update:{method:"PUT",isArray:!1}}),chapterRemoveItem:a(c+"/chapter/:chapter_id/delete_item/:item_id",{item_id:"@item_id",chapter_id:"@chapter_id"},{remove:{method:"POST",isArray:!1}}),chapterUpdateItem:a(c+"/chapter/:chapter_id/update_item/:member_id",{item_id:"@item_id",chapter_id:"@chapter_id"},{update:{method:"POST",isArray:!1}}),events:a(c+"/events/:event_id",{event_id:"@event_id"},{update:{method:"PUT"}}),getCurrentEvent:a(c+"/events/:event_id",{event_id:"@event_id"},{query:{method:"GET",isArray:!1}}),getMembersByEvent:a(c+"/events/:event_id/members",{event_id:"@event_id"},{query:{method:"GET",isArray:!0}}),addMemberToEvent:a(c+"/events/:event_id/add_member/:member_id",{event_id:"@event_id",member_id:"@member_id"},{save:{method:"POST",isArray:!1}}),dropMemberFromEvent:a(c+"/events/:event_id/drop_member/:member_id",{event_id:"@event_id",member_id:"@member_id"},{remove:{method:"POST",isArray:!1}}),reserveItemToEvent:a(c+"/events/:event_id/reserve_item/:item_id",{item_id:"@item_id",event_id:"@event_id"},{save:{method:"POST",isArray:!1}}),freeItemFromEvent:a(c+"/events/:event_id/free_item/:item_id",{item_id:"@item_id",member_id:"@member_id"},{remove:{method:"POST",isArray:!1}}),getVolunteersForEvent:a(c+"/events/get_volunteers/:event_id",{event_id:"@event_id"},{query:{method:"GET",isArray:!0}}),getParticipantsForEvent:a(c+"/events/get_participants/:event_id",{event_id:"@event_id"},{query:{method:"GET",isArray:!0}}),item:a(c+"/item",{},{}),getChapterItems:a(c+"/chapter/:chapter_id/items",{chapter_id:"@chapter_id"},{query:{method:"GET",isArray:!0}}),getEventItems:a(c+"/events/:event_id/items",{chapter_id:"@event_id"},{query:{method:"GET",isArray:!0}}),member:a(c+"/member",{},{}),retrieveLogin:a(c+"/member/get_login/:member_id",{id:"@id"},{query:{method:"GET"}}),updateLogin:a(c+"/member/login/update/:member_id",{id:"@id"},{update:{method:"PUT"}}),memberUpdateChapter:a(c+"/member/:member_id/change_chapter/:from_chapter_id/:to_chapter_id",{member_id:"@member_id",from_chapter_id:"@from_chapter_id",to_chapter_id:"@to_chapter_id"},{update:{method:"PUT"}}),session:a(c+"/session/login",{},{query:{method:"GET"},save:{method:"POST",isArray:!1}})}}]),angular.module("ohanaApp").service("dataGridUtil",function(){"use strict";var a=this;a.buildMembersTableData=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e={};e.key=a[d].key,e.row_id=d,e.first=a[d].name.first,e.last=a[d].name.last;var f=new Date(a[d].DOB),g=f.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});e.dob=g,e.email=a[d].email,e.phone=a[d].phone,e.role=a[d].role,e.primaryChapter=a[d].Chapter,e.chapters=[],_.each(a[d].Chapters,function(a){e.chapters.push(a.chapter)}),a[d].Chapters||e.chapters.push("none"),a[d].branch?e.branch=a[d].branch:e.branch="none",a[d].notes?e.notes=a[d].notes:e.notes="none",c.push(e)}return c},a.buildInventoryTableData=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e={};if(e.DT_RowId=a[d].item_id,e.name_of_item=a[d].name_of_item,e.category=a[d].category,e.condition=a[d].condition,a[d].purchase_date){var f=new Date(a[d].purchase_date),g=f.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});e.purchase_date=g}else e.purchase_date="";0!=a[d].reservations.length?e.reservedFlag=!1:e.reservedFlag=!0,a[d].chapter?e.chapter=a[d].chapter.name:e.chapter="",a[d].notes?e.notes=a[d].notes:e.notes="",c.push(e)}return c},a.buildEventPeopleTableData=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e={};e.DT_RowId=a[d].id,e.first_name=a[d].first_name,e.last_name=a[d].last_name,e.email=a[d].email,c.push(e)}return c},a.buildChaptersTableData=function(a){for(var b=a.length,c="",d="",e=[],f=0;b>f;f++){c=a[f].key,delete a[f].key,delete a[f].regions;for(var g in a[f])(null===a[f][g]||void 0===a[f][g]||a[f][g]===!0)&&delete a[f][g];for(var d in a[f])for(var h in a[f][d]){var i={};i.region=c,i.state=d,i.name=a[f][d][h].name,i.description=a[f][d][h].description,i.chadmin=a[f][d][h].chadmin?a[f][d][h].chadmin:" ",i.facebook=a[f][d][h].url,i.facebook_link=a[f][d][h].url_link,i.email=a[f][d][h].email,i.email_link=a[f][d][h].email_link,i.zip=a[f][d][h].zip,i.googleMaps="https://www.google.com/maps/place/"+a[f][d][h].lat+","+a[f][d][h].lng,i.googleMaps_Link="<a href='"+i.googleMaps+"' target='_blank' class='storelocatorlink'>"+i.googleMaps+"</a><br/>",i.donation=a[f][d][h].donation?a[f][d][h].donation:"https://www.paypal.com/donate/?token=3TyOO6taytT0isxzdLwbDz8GvB6JtWLIzuZy0fjN3K4-PihZMiVhpPbECt0JiW7IkR8mfG",i.donation_link="<a href='"+i.donation+"' target='_blank' class='storelocatorlink'>"+i.donation+"</a><br/>",e.push(i)}a[f].key=c}return e}}),angular.module("ohanaApp").service("selectValues",function(){"use strict";var a=this;a.regions=[{value:"northeast",text:"Northeast (NJ, NY, PA, ME, MA)"},{value:"midatlantic",text:"Mid-Atlantic (MD, VA, NC)"},{value:"midwest",text:"Midwest (IN, NE, AR, IA, KS, IL, MN, WI, MO, TN)"},{value:"southeast",text:"Southeast (FL, GA, SC, AL)"},{value:"southwest",text:"Southwest (OK, TX, LA)"},{value:"west",text:"West (AZ, CA, OR, WA, UT, HI)"}],a.chapters=[{region:"northeast",name:"New Jersey",hq:" Howell, NJ",contact:"Vicki Gordon",email:"NJ@heroesonthewater.org"},{region:"northeast",name:"Long Island/NYC",hq:" Remsenburg, NY",contact:"Jerry Collins",email:"LongIslandNYC@heroesonthewater.org"},{region:"northeast",name:"Central Pennsylvania",hq:" York, PA",contact:"Adam Gagne",email:"CentralPA@HeroesOnTheWater.org"},{region:"northeast",name:"Western Pennsylvania",hq:" Jeannette, PA",contact:"Jim Evans",email:"WesternPA@HeroesOnTheWater.org"},{region:"northeast",name:"Southern Maine",hq:" Brunswick, ME",contact:"Peter Chart",email:"SouthernMaine@HeroesOnTheWater.org"},{region:"northeast",name:"Boston Massachusetts",hq:" Westwood, MA 02090",contact:"Anna Katzman",email:"BostonMA@heroesonthewater.org"},{region:"midatlantic",name:"Maryland",hq:" Mount Airy, MD",contact:"Keith Umberger or Jim Cooper",email:"Maryland@heroesonthewater.org"},{region:"midatlantic",name:"Combined Forces",hq:" Fuquay-Varina, NC",contact:"Ollie Hughes",email:"CombinedForces@HeroesOnTheWater.org"},{region:"midatlantic",name:"Foothills North Carolina",hq:" Kings Mountain, NC 28086",contact:"Matt Frazier",email:"FoothillsNC@HeroesOnTheWater.org"},{region:"midatlantic",name:"George Washington",hq:" Arlington, VA",contact:"Karl Schwartz",email:"GeorgeWashingtonDC@heroesonthewater.org"},{region:"midatlantic",name:"Tidewater",hq:" Virginia Beach, VA",contact:"Tom VanderHeiden",email:"Tidewater@HeroesOnTheWater.org"},{region:"midwest",name:"Northwest Arkansas",hq:" Fayetteville, AR 72701",contact:"Jimmy Davis",email:"Nwarkansas@heroesonthewater.org"},{region:"midwest",name:"River Valley Arkansas",hq:" Fort Smith, AR",contact:"Brandon Taylor",email:"RiverValleyAR@heroesonthewater.org"},{region:"midwest",name:"Indiana",hq:" Seymour, IN",contact:"Dustin Kelly",email:"Indiana@HeroesOnTheWater.org"},{region:"midwest",name:"Heartland",hq:" St. Paul, NE",contact:"Adam Dresden",email:"HeartlandChapter@HeroesOnTheWater.org"},{region:"midwest",name:"Eastern Nebraska",hq:" Papillion, NE 68133",contact:"",email:"EasternNE@HeroesOnTheWater.org"},{region:"midwest",name:"Central Iowa",hq:" Grimes, IA 50111",contact:"",email:"CentralIA@HeroesOnTheWater.org"},{region:"midwest",name:"Kansas",hq:" Topeka, KS",contact:"Lyle Babcock",email:"KansasChapter@HeroesOnTheWater.org"},{region:"midwest",name:"Chicagoland Illinois",hq:" Chicago, IL 60661",contact:"Gary Rosenberg",email:"ChicagolandIL@HeroesOnTheWater.org"},{region:"midwest",name:"Twin Cities Minnesota",hq:" Osseo, MN 55369",contact:"",email:"TwinCitiesMN@heroesonthewater.org"},{region:"midwest",name:"South Central Wisconsin",hq:" Madison, WI",contact:"Adam Howarth",email:"SouthCentralWI@HeroesOnTheWater.org"},{region:"midwest",name:"Southeastern Wisconsin",hq:" Milwaukee, WI 53215",contact:"Jason Bartol",email:"SoutheasternWI@HeroesOnTheWater.org"},{region:"midwest",name:"Southwest Missouri",hq:" Branson, MO",contact:"Dorman Hugey",email:"southwestmissouri@heroesonthewater.org"},{region:"midwest",name:"Music City Tennessee",hq:" Nashville, TN",contact:"CJ Scott",email:"MusicCityTN@heroesonthewater.org"},{region:"southeast",name:"Emerald Coast",hq:" Pensacola, FL",contact:"Frank Dailey",email:"EmeraldCoast@HeroesOnTheWater.org"},{region:"southeast",name:"Northeast Florida",hq:" Jacksonville, FL",contact:"Melita Ganoe",email:"NortheastFlorida@HeroesOnTheWater.org"},{region:"southeast",name:"Central Florida",hq:" Kissimmee, FL",contact:"Andres Rosario",email:"CentralFL@HeroesOnTheWater.org"},{region:"southeast",name:"Key West Florida",hq:" Key West, FL",contact:"",email:"KeyWestFL@HeroesOnTheWater.org"},{region:"southeast",name:"Panama City Florida",hq:" Panama City, FL 32404",contact:"Randle Hay ",email:"PanamaCityFL@HeroesOnTheWater.org"},{region:"southeast",name:"Sarasota-Bradenton",hq:" Sarasota, FL",contact:"Raul Casas ",email:"Sarasota@HeroesOnTheWater.org"},{region:"southeast",name:"South Florida",hq:" Ft. Lauderdale, FL",contact:"Ryan Bancroft & Sam De La Torre",email:"SouthFlorida@HeroesOnTheWater.org"},{region:"southeast",name:"Southwest Florida",hq:" Ft. Myers, FL",contact:"Esteban 'Blackbeard' Gutierrez",email:"SWFlorida@HeroesOnTheWater.org"},{region:"southeast",name:"Space Coast",hq:" Space Coast, FL",contact:"Vinnie Bellisario",email:"SpaceCoastFL@HeroesOnTheWater.org"},{region:"southeast",name:"Tampa Bay Florida",hq:" Tampa Bay, FL",contact:"Joel Sussman",email:"TampaBayFL@HeroesOnTheWater.org"},{region:"southeast",name:"Treasure Coast",hq:" Jensen Beach, FL",contact:"Matt Landry",email:"TreasureCoastFL@HeroesOnTheWater.org"},{region:"southeast",name:"South Alabama",hq:" Mobile, AL 36507",contact:"",email:"SouthAL@heroesonthewater.org"},{region:"southeast",name:"Coastal Georgia",hq:" Richmond Hill, GA",contact:"Corky Fleming",email:"CoastalGeorgia@HeroesOnTheWater.org"},{region:"southeast",name:"Lowcountry South Carolina",hq:" Charleston, SC",contact:"Darrell Olson",email:"LowCountry.SC@HeoresOnTheWater.org"},{region:"southwest",name:"Northeast Oklahoma",hq:" Tulsa, OK",contact:"Rusty Helms",email:"NEOkla@HeroesOnTheWater.org"},{region:"southwest",name:"Austin Texas",hq:" Austin, TX",contact:"MAJ Erik Fuentes",email:"Austintexas@hereosonthewater.org"},{region:"southwest",name:"BAMC",hq:" San Antonio, TX",contact:"Brandon Walden",email:"BAMC@HeroesOnTheWater.org"},{region:"southwest",name:"Coastal Bend",hq:" Corpus Christi, TX",contact:"Travis Matthews",email:"CoastalBend@HeroesOnTheWater.org"},{region:"southwest",name:"DFW Chapter",hq:" Dallas, TX",contact:"George Chrisman or Dave Potts",email:"DFWChapter@HeroesOnTheWater.org"},{region:"southwest",name:"East Texas",hq:" Longview, TX",contact:"Katie Baker",email:"EastTexasChapter@HeroesOnTheWater.org"},{region:"southwest",name:"Ft. Hood Texas",hq:" Ft. Hood, TX 76544",contact:"Greg Sterley",email:"Ft.HoodTX@HeroesOnTheWater.org"},{region:"southwest",name:"Rio Grande Valley",hq:" Harlingen, TX",contact:"Rudy Castaneda",email:"Riograndevalleytx@heroesonthewater.org"},{region:"southwest",name:"San Antonio",hq:" San Antonio, TX",contact:"Bill Stroud",email:"SanAntonio@HeroesOnTheWater.org"},{region:"southwest",name:"Southeast Texas",hq:" Houston, TX",contact:"Josh Arnold",email:"SoutheastTexas@HeroesOnTheWater.org"},{region:"southwest",name:"Louisiana",hq:" Mandeveille, LA",contact:"Paul Tullier",email:"LA@heroesonthewater.org"},{region:"southwest",name:"Southwest Louisiana",hq:" DeRidder, LA",contact:"Josh Droddy",email:"SouthwestLouisiana@heroesonthewater.org"},{region:"west",name:"Arizona",hq:" Phoenix, AZ",contact:"David Jacques",email:"Arizona@heroesonthewater.org"},{region:"west",name:"Northern California",hq:" San Francisco, CA",contact:"Rob Knoles",email:"NorCal@heroesonthewater.org"},{region:"west",name:"Southern California",hq:" San Diego, CA",contact:"Michael Weist",email:"SoCal@heroesonthewater.org"},{region:"west",name:"Central California",hq:" Vandenberg Air Force Base, CA",contact:"Ron Skala",email:"CentralCA@heroesonthewater.org"},{region:"west",name:"Shasta California",hq:" Shasta, CA",contact:"Bryan Rusk",email:"ShastaCA@heroesonthewater.org"},{region:"west",name:"Portland",hq:" Portland, OR 97201",contact:"Anthony Stickel",email:"Portland@HeroesOnTheWater.org"},{region:"west",name:"Northwest Washington",hq:" Seattle, WA",contact:"Dino Abulencia",email:"Nwest@HeroesOnTheWater.org"},{region:"west",name:"Northern Utah",hq:" Salt Lake City, UT 84101",contact:"Randy Baker",email:"NorthernUT@HeroesOnTheWater.org"},{region:"west",name:"Maui Hawaii",hq:" Maui, HI 96708",contact:"Boo Baldovi",email:"MauiHI@HeroesOnTheWater.org"}],a.showChaptersByRegion=function(b){var c,d=[];for(c=0;c<a.chapters.length;c++)a.chapters[c].region==b&&d.push({value:a.chapters[c].name});return d},a.roles=[{value:"volunteer",text:"Volunteer"},{value:"event_manager",text:"Event Manager"},{value:"chapter_manager",text:"Chapter Manager"},{value:"region_manager",text:"Region Manager"},{value:"admin",text:"Administrator"}],a.editChapters=[{value:"579b8e5ec6f3ed9a69f3a7ca",text:"New Jersey"},{value:"579b8ec4c6f3ed9a69f3a7cb",text:"Long Island/NYC"},{value:"579bad846782cfbe6b11b729",text:"Central Pennsylvania"},{value:"579badbc6782cfbe6b11b72a",text:"Western Pennsylvania"},{value:"579badf46782cfbe6b11b72b",text:"Southern Maine"},{value:"579bae246782cfbe6b11b72c",text:"Boston Massachusetts"},{value:"579bb25b6782cfbe6b11b72d",text:"Maryland"},{value:"Combined Forces",text:"Combined Forces"},{value:"Foothills North Carolina",text:"Foothills North Carolina"},{value:"George Washington",text:"George Washington"},{value:"Tidewater",text:"Tidewater"},{value:"Northwest Arkansas",text:"Northwest Arkansas"},{value:"River Valley Arkansas",text:"River Valley Arkansas"},{value:"Indiana",text:"Indiana"},{value:"Heartland",text:"Heartland"},{value:"Eastern Nebraska",text:"Eastern Nebraska"},{value:"Central Iowa",text:"Central Iowa"},{value:"Kansas",text:"Kansas"},{value:"Chicagoland Illinois",text:"Chicagoland Illinois"},{value:"Twin Cities Minnesota",text:"Twin Cities Minnesota"},{value:"South Central Wisconsin",text:"South Central Wisconsin"},{value:"Southeastern Wisconsin",text:"Southeastern Wisconsin"},{value:"Southwest Missouri",text:"Southwest Missouri"},{value:"Music City Tennessee",text:"Music City Tennessee"},{value:"Emerald Coast",text:"Emerald Coast"},{value:"Northeast Florida",text:"Northeast Florida"},{value:"Central Florida",text:"Central Florida"},{value:"Key West Florida",text:"Key West Florida"},{value:"Panama City Florida",text:"Panama City Florida"},{value:"Sarasota-Bradenton",text:"Sarasota-Bradenton"},{value:"South Florida",text:"South Florida"},{value:"Southwest Florida",text:"Southwest Florida"},{value:"Space Coast",text:"Space Coast"},{value:"Tampa Bay Florida",text:"Tampa Bay Florida"},{value:"Treasure Coast",text:"Treasure Coast"},{value:"South Alabama",text:"South Alabama"},{value:"Coastal Georgia",text:"Coastal Georgia"},{value:"Lowcountry South Carolina",text:"Lowcountry South Carolina"},{value:"Northeast Oklahoma",text:"Northeast Oklahoma"},{value:"Austin Texas",text:"Austin Texas"},{value:"BAMC",text:"BAMC"},{value:"Coastal Bend",text:"Coastal Bend"},{value:"DFW Chapter",text:"DFW Chapter"},{value:"East Texas",text:"East Texas"},{value:"Ft. Hood Texas",text:"Ft. Hood Texas"},{value:"Rio Grande Valley",text:"Rio Grande Valley"},{value:"San Antonio",text:"San Antonio"},{value:"Southeast Texas",text:"Southeast Texas"},{value:"Louisiana",text:"Louisiana"},{value:"Southwest Louisiana",text:"Southwest Louisiana"},{value:"Arizona",text:"Arizona"},{value:"Northern California",text:"Northern California"},{value:"Southern California",text:"Southern California"},{value:"Central California",text:"Central California"},{value:"Shasta California",text:"Shasta California"},{value:"Portland",text:"Portland"},{value:"Northwest Washington",text:"Northwest Washington"},{value:"Northern Utah",text:"Northern Utah"},{value:"Maui Hawaii",text:"Maui Hawaii"}]}),angular.module("ohanaApp").directive("masterNavigation",function(){"use strict";return{templateUrl:"views/masternav.html",restrict:"E",controller:["$state","$rootScope","commonServices","$scope","$uibModal",function(a,b,c,d,e){d.sessionState=b.sessionState,d.sessionUserRole=b.userRole,d.$on("changeSessionState",function(a,b){d.sessionState=b}),d.$on("changeSessionUserRole",function(a,b){d.sessionUserRole=b}),d.menuActive=!1,d.toggleMenu=function(){d.menuActive===!1?($(".hamburger--slider").addClass("is-active"),$(".mobilenavtoggle button").css("position","fixed"),$(".mobilenavtoggle button").css("margin-right","8px"),d.menuActive=!0):d.menuActive===!0&&($(".hamburger--slider").removeClass("is-active"),$(".mobilenavtoggle button").css("position","absolute"),$(".mobilenavtoggle button").css("margin-right","0px"),d.menuActive=!1)},d.dismissMenu=function(){d.menuActive=!1,$(".hamburger--slider").removeClass("is-active"),$(".mobilenavtoggle button").css("position","absolute"),$(".mobilenavtoggle button").css("margin-right","0px"),d.menuActive=!1},d.logout=function(){d.sessionState=!1,b.sessionState=!1,d.sessionUserRole=!1,c.signout(),d.toggleMenu()},d.leftnav=[{state:"#/whoweare",text:"WHO WE ARE"},{state:"#/getinvolved",text:"GET INVOLVED"},{state:"#/publicEvents",text:"EVENTS"}],d.rightnav=[{state:"#/login",text:"LOGIN"}],d.rightnavloggedin=[{state:"#/manage/dash",text:"MANAGE"},{}],d.participantNav=[{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/manage/events",text:"Events"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/profile",text:"My Profile"}],d.volunteerNav=[{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/manage/events",text:"Events"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/profile",text:"My Profile"}],d.ltmNav=[{state:"#/manage/chadmin",text:"Chapter Administration"},{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/manage/events",text:"Events"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/directory",text:"Member Directory"},{state:"#/manage/profile",text:"My Profile"}],d.nationalNav=[{state:"#/manage/chadmin",text:"Chapter Administration"},{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/manage/events",text:"Events"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/directory",text:"Member Directory"},{state:"#/manage/profile",text:"My Profile"}],d.showDonate=function(){window.open("https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=5WAD6PF3BUHPE")}}]}}),angular.module("ohanaApp").directive("masterFooter",function(){"use strict";return{templateUrl:"views/masterfooter.html",restrict:"E",controller:["$scope",function(a){}]}}),angular.module("ohanaApp").controller("HomeCtrl",["$scope","$location",function(a,b){"use strict";a.vidtoggle=!1,a.zipCode="",a.videoToggle=function(){a.vidtoggle?(a.vidtoggle=!1,$("#videoplayer").each(function(){this.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")})):a.vidtoggle?(a.vidtoggle=!1,$("#videoplayer").each(function(){this.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})):a.vidtoggle=!0},a.chapterSearch=function(){b.path("/chapters").search({zipCode:a.zipCode})}}]),angular.module("ohanaApp").controller("LoginCtrl",["$q","commonServices","$state","$scope","$rootScope","$uibModal","$location",function(a,b,c,d,e,f,g){"use strict";d.logObj={},d.checkLogin=function(c){var d=b.signin(c);a.all([d]).then(function(a){"SUCCESS"===a[0].type?(swal("Success","Logged in successfully!","success"),window.location.replace("#/manage/dash")):swal("error",a[0].code+": "+a[0].message,"error")})},d.addUser=function(){var a=f.open({templateUrl:"/parts/newUserDirectoryForm.html",controller:"NewUserDirectoryFormCtrl",backdrop:"static"});a||d.update()},d.passwordReset=function(){var a=f.open({templateUrl:"/parts/passwordReset.html",controller:"passwordResetFormCtrl"});a||d.update()}}]),angular.module("ohanaApp").controller("ChaptersCtrl",["$scope","$http","$filter","$location","NgMap",function(a,b,c,d,e){"use strict";e.getMap().then(function(a){console.log(a.getCenter()),console.log("markers",a.markers),console.log("shapes",a.shapes)}),a.map={center:{latitude:38.294322,longitude:-94.0136068},zoom:4},a.onClick=function(a,b,c){c.show=!c.show},b.get("data/chapters.json").then(function(b){a.inputZip=d.search().zipCode,a.locationFilter=a.inputZip.slice(0,1),a.chapters=[],b.data.chapters.forEach(function(b){a.chapters.push({id:b.id,name:b.name,latitude:b.lat,longitude:b.lng,city:b.city,url:b.url,state:b.state,state_full:b.state_full,zip:b.zip,icon:"../assets/images/logos/icon-sm.png",label:{text:b.name},templateUrl:"../parts/infoWindow.html",templateParameter:{name:b.name,contactName:b.description,contactEmail:b.email,url:b.url}})}),a.$watch("keywordFilter",function(b){a.filteredMarkers=c("filter")(a.chapters,b),!a.filteredMarkers}),a.$watch("locationFilter",function(b){a.filteredMarkers=c("filter")(a.chapters,{zip:b},function(a,b){var c=new RegExp("^"+b);return a.match(c)}),!a.filteredMarkers})})}]),angular.module("ohanaApp").controller("WhoweareCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("GetinvolvedCtrl",["$scope",function(a){"use strict"}]),angular.module("ohanaApp").controller("PublicEventsCtrl",["$q","commonServices","$scope","$uibModal","Api","selectValues",function(a,b,c,d,e,f){"use strict";c.newQuery={};var g=[],h=function(){var d=b.getPublicEvents();g=[],a.all([d]).then(function(a){a[0]?(_.each(a[0],function(a){g.push(a)}),c.eventList=g):console.log("Failed to get Events...")})};h(),c.search=function(){if(g.length>0)if(c.empty=!1,"*"!=c.newQuery.search&&c.newQuery.search){var a=[];_.each(g,function(b){_.each(b,function(d){if(angular.isString(d)&&angular.isString(c.newQuery.search)){if(_.includes(d.toLowerCase(),c.newQuery.search.toLowerCase()))return a.push(b),!1}else if(_.includes(d,c.newQuery.search))return a.push(b),!1})}),0==a.length&&(console.log("no results"),c.empty=!0,c.noEventsFound="No results for "+c.newQuery.search+" found."),c.eventList=a}else h()},c.showDescription=function(a){c.currentEvent=c.eventList[a];d.open({scope:c,templateUrl:"/parts/public.events.description.html",controller:"PublicEventsDescriptionCtrl"})},c.showDescription=function(e){c.selected=g[e],console.log("Index is: "+e);var f=b.getEvent(c.selected);if(a.all([f]).then(function(a){a[0]?_.each(a[0],function(a){c.selected.email===a.email&&(console.log("Event: "+a.name),c.selected=a)}):c.selected=null}),null!=c.selected){d.open({scope:c,templateUrl:"/parts/public.events.description.html",controller:"PublicEventsDescriptionCtrl"})}}}]),angular.module("ohanaApp").controller("DashCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("DashUpcomingEventsCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("DashBroadcastsCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("EventsCtrl",["$q","commonServices","$scope","$uibModal","$location","selectValues","DAO",function(a,b,c,d,e,f,g){"use strict";c.newQuery={};var h=[];c.filterTypes=["All","Past","Upcoming"],c.filter={};var i=function(){var d=b.getPublicEvents();h=[],a.all([d]).then(function(a){a[0]?(_.each(a[0],function(a,b){a.key=b,h.push(a)}),c.eventList=h):console.log("Failed to get Events...")})};i(),c.changeFilter=function(){var d=b.getPublicEvents();h=[],a.all([d]).then(function(a){a[0]?(_.each(a[0],function(a,b){var d=new Date;switch(c.filter){case"All":a.key=b,h.push(a);break;case"Past":a.startTime<d.getTime()&&(a.key=b,h.push(a));break;case"Upcoming":a.startTime>d.getTime()&&(a.key=b,h.push(a))}}),c.eventList=h):console.log("Failed to get Events...")})},c.search=function(){if(h.length>0)if(c.empty=!1,"*"!=c.newQuery.search&&c.newQuery.search){
var a=[];_.each(h,function(b){_.each(b,function(d){if(angular.isString(d)&&angular.isString(c.newQuery.search)){if(_.includes(d.toLowerCase(),c.newQuery.search.toLowerCase()))return a.push(b),!1}else if(_.includes(d,c.newQuery.search))return a.push(b),!1})}),0==a.length&&(console.log("no results"),c.empty=!0,c.noEventsFound="No results for "+c.newQuery.search+" found."),c.eventList=a}else i()},c.add=function(){var a=d.open({templateUrl:"/parts/newEventForm.html",controller:"NewEventFormCtrl"});a.result.then(function(){console.log("Reloading..."),i()})},c.manageEvent=function(a){var b=h[a];console.log("Index is: "+a),e.url("details/"+b.key)},c.viewParticipants=function(a){d.open({templateUrl:"/parts/manageParticipants.html",controller:"ManageParticipantsCtrl",resolve:{event:function(){return h[a]}}})},c.viewVolunteers=function(a){d.open({templateUrl:"/parts/manageVolunteers.html",controller:"ManageVolunteersCtrl",resolve:{event:function(){return h[a]}}})},c.addParticipant=function(){alert("a participant was added")},c.addVolunteer=function(){alert("a volunteer was added")},c.getKeyLength=function(a){return a?Object.keys(a).length:0},c.deleteEvent=function(c){var d=h[c];console.log("Index is: "+c),console.log(d.key),swal({title:"Are you sure?",text:"You will not be able to recover this event!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete '"+d.name+"'",cancelButtonText:"Cancel"}).then(function(c){console.log("confirm");var c=b.removeData("/events/"+d.key);swal({text:"Deleting "+d.name,type:"success",timer:2500}),a.all([c]).then(function(a){i(),a[0]?console.log(c):console.log("Log: Error on deletion")})},function(a){console.log("cancel")})}}]),angular.module("ohanaApp").controller("BroadcastsCtrl",["$scope",function(a){"use strict";a.distros=["HOW Volunteers","HOW Participants"],a.recipient=[],a.ccVisible=!1,a.bccVisible=!1,a.toggleCC=function(){this.ccVisible=!this.ccVisible},a.toggleBCC=function(){this.bccVisible=!this.bccVisible},a.options={height:600},a.sendTime="",a.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},a.today=function(){var b=new Date;a.t=b},a.today(),a.openSendDate=function(){a.sendDate.opened=!0},a.sendDate={opened:!1}}]),angular.module("ohanaApp").controller("InventoryCtrl",["$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d){"use strict";a.buildTable=function(b){var e,f=d.buildInventoryTableData(b);a.currId="",angular.element(document).ready(function(){a.userChapterId="5788738883feb0b4358e8cd1",$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#inventoryTable"))&&a.inventoryTable.destroy(),a.inventoryTable=$("#inventoryTable").DataTable({data:f,columns:[{},{title:"ID",data:"DT_RowId"},{title:"Item Name",data:"name_of_item",orderable:!1},{title:"Category",data:"category"},{title:"Condition",data:"condition"},{title:"Purchase Date",data:"purchase_date"},{title:"Reserved?",data:"reservedFlag"},{title:"Owned By",data:"chapter"},{title:"Notes",data:"notes",orderable:!1}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="inventoryTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:4,width:"40px"},{targets:5,width:"35px"},{targets:6,width:"40px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="inventoryTable-select-all">')},rowCallback:function(a,b,c){for($(a).children().eq(1).addClass("tdItemName"),$(a).children().eq(2).addClass("tdCategory"),$(a).children().eq(3).addClass("tdCondition"),$(a).children().eq(4).addClass("tdPdate"),$(a).children().eq(7).addClass("tdNotes"),e=1;5>e;e++)$(a).children().eq(e).wrapInner('<a class="editable editable-click" style="border: none;"></a>');return $(a).children().eq(7).wrapInner('<a class="editable editable-click" style="border: none;"></a>'),a},drawCallback:function(){$("#inventoryTable").on("click","tr",function(){a.currId=a.inventoryTable.row(this).id()}),$("#inventoryTable .tdItemName a").editable({type:"text",name:"name_of_item",placement:"bottom",emptytext:"null",url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,name_of_item:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})}}),$("#inventoryTable .tdCategory a").editable({type:"select",name:"category",placement:"bottom",emptytext:"null",showbuttons:!1,url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,category:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})},source:[{value:0,text:"Kayaks and Equipment"},{value:1,text:"Fishing Equipment"},{value:2,text:"Safety and PFDs"},{value:3,text:"Event Support"},{value:4,text:"Chapter Support"},{value:5,text:"Misc"}]}),$("#inventoryTable .tdCondition a").editable({type:"select",name:"condition",placement:"bottom",emptytext:"null",showbuttons:!1,url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,condition:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})},source:[{value:0,text:"New"},{value:1,text:"Good"},{value:2,text:"Fair"},{value:3,text:"Poor"},{value:4,text:"Broken"}]}),$("#inventoryTable .tdPdate a").editable({type:"combodate",name:"puchase_date",placement:"bottom",emptytext:"null",format:"YYYY-MM-DD",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,purchase_date:b.value};c.chpaterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})}}),$("#inventoryTable .tdNotes a").editable({type:"textarea",name:"notes",placement:"bottom",emptytext:"null",url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,notes:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})}})}}),$("#inventoryTable-select-all").on("click",function(){var b=a.inventoryTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',b).prop("checked",this.checked)}),$("#inventoryTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#inventoryTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},a.update=function(){c.item.query().$promise.then(function(b){a.buildTable(b),a.dataStack=b},function(b){a.buildTable(b),a.dataStack=b,swal({text:"Connection failed. Could not "+b.config.method+" from "+b.config.url,type:"warning",timer:2500})})},a.add=function(){var c=b.open({templateUrl:"/parts/newItemInventoryForm.html",controller:"NewItemInventoryFormCtrl"});c||a.update()},a.remove=function(){var b,c,d=a.inventoryTable.rows({search:"applied"}).nodes(),e=[];for(b=0;b<d.length;b++)$('input[type="checkbox"]',d[b]).prop("checked")&&e.push(a.dataStack[b]);0===e.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){for(c=0;c<e.length;c++);swal("Deleted!","Your file has been deleted.","success"),$("#inventoryTable-select-all").prop("checked",!1),$('input[type="checkbox"]',d).prop("checked",!1),a.update()})}}]),angular.module("ohanaApp").controller("TrainingCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("HoursCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("DirectoryCtrl",["$rootScope","$q","commonServices","$scope","$uibModal","dataGridUtil","userService",function(a,b,c,d,e,f,g){"use strict";d.$on("modalClosing",function(){d.update()}),d.buildTable=function(b){var h,i=f.buildMembersTableData(b);d.currId="",d.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#membersTable"))&&d.membersTable.destroy(),d.membersTable=$("#membersTable").DataTable({responsive:!0,data:i,columns:[{},{title:"KEY",data:"key"},{title:"First Name",data:"first"},{title:"Last Name",data:"last"},{title:"DOB",data:"dob"},{title:"Email",data:"email"},{title:"Phone",data:"phone"},{title:"Role",data:"role"},{title:"Primary Chapter",data:"primaryChapter"},{title:"Secondary Chapters",data:"chapters[, ]"},{title:"Service Branch",data:"branch"}],columnDefs:[{targets:1,visible:!1},{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" id="membersTable-select">'}},{targets:3,width:"50px"},{targets:5,width:"90px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="membersTable-select-all">')},rowCallback:function(a,b,c){for($(a).find('input[type="checkbox"]').eq(0).attr("value",b.key),$(a).find('input[type="checkbox"]').eq(0).attr("data-row-id",b.row_id),$(a).children().eq(1).addClass("tdFname"),$(a).children().eq(2).addClass("tdLname"),$(a).children().eq(3).addClass("tdDob"),$(a).children().eq(4).addClass("tdEmail"),$(a).children().eq(5).addClass("tdTelly"),$(a).children().eq(6).addClass("tdSelectRole"),$(a).children().eq(7).addClass("tdPrimaryChapter"),$(a).children().eq(8).addClass("tdChapters"),$(a).children().eq(9).addClass("tdMil"),h=1;10>h;h++)4!==h&&$(a).children().eq(h).wrapInner('<a class="editable editable-click" style="border: none;"></a>');return a},drawCallback:function(b){$("#membersTable").off("click","tr"),$("#membersTable").on("click","tr",function(){if(d.currId=$(this).find('input[type="checkbox"]').val(),$(this).find('input[type="checkbox"]').is(":checked"))d.checkedBoxes.push(d.currId);else for(var a=0;a<d.checkedBoxes.length;a++)d.checkedBoxes[a]===d.currId&&d.checkedBoxes.splice(a,1)}),$("#membersTable .tdFname a").editable({type:"text",name:"first",placement:"bottom",emptytext:"null",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/name/first/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.name.first=b,g.setUserData(f),g.setUserName(f.name.first,f.name.last)}}}}),$("#membersTable .tdLname a").editable({type:"text",name:"last",placement:"bottom",emptytext:"null",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/name/last/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.name.last=b,g.setUserData(f),g.setUserName(f.name.first,f.name.last)}}}}),$("#membersTable .tdDob a").editable({type:"combodate",name:"DOB",placement:"bottom",emptytext:"null",format:"MM/DD/YYYY",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/DOB/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.DOB=b,g.setUserData(f)}}}}),$("#membersTable .tdTelly a").editable({type:"text",name:"phone",placement:"bottom",emptytext:"null",tpl:"<input id='phonenum'>",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/phone/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.phone=b,g.setUserData(f)}}}}),$(document).on("click","#membersTable .tdTelly a",function(){$("#phonenum").mask("(999)999-9999")}),$("#membersTable .tdSelectRole a").editable({type:"select",name:"role",placement:"bottom",emptytext:"null",showbuttons:!1,display:!1,url:function(a){if(""!==a.value){var b=g.getId();if(d.currId!==b){var e={role:a.value},f="/userRoles/"+d.currId;c.updateData(f,e),d.currId===g.getId()&&g.setRole(e)}else swal("Alert","You cannot edit your own role!","error")}},source:function(){var b=g.getRole();if("National Staff"===b)return a.siteData.roles;var c=["Participant","Volunteer","Chapter Lead"];return c}}),$("#membersTable").off("click",".tdPrimaryChapter a"),$("#membersTable").on("click",".tdPrimaryChapter a",function(){var a=this;e.open({templateUrl:"/parts/changeChapter.html",controller:"ChangeChapterCtrl",resolve:{selectedUID:function(){return a.parentElement.parentElement.children[0].firstChild.value}}})}),$("#membersTable").off("click",".tdChapters"),$("#membersTable").on("click",".tdChapters",function(){var a=this;e.open({templateUrl:"/parts/manageadditionalchapters.html",controller:"ManageAdditionalChapters",resolve:{selectedUID:function(){return a.parentElement.children[0].firstChild.value}}})}),$("#membersTable .tdMil a").editable({type:"text",name:"branch",placement:"bottom",emptytext:"null",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/branch/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.branch=b,g.setUserData(f)}}}})}}),d.membersTable.on("responsive-display",function(b,f,h,i,j){d.currId=h.data().key;var k=$(this).find('ul[data-dtr-index="'+h.index()+'"]').children();i&&_.each(k,function(b){switch($(b).data("dt-column")){case 2:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="2"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"null",display:!1,url:function(a){if(""!==a.value){var b=a.value,d="/userData/"+a.name+"/name/first/";if(c.updateData(d,b),a.name===g.getId()){var e=g.getUserData();e.name.first=b,g.setUserData(e),g.setUserName(e.name.first,e.name.last)}}}});break;case 3:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="3"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"null",display:!1,url:function(a){if(""!==a.value){var b=a.value,d="/userData/"+a.name+"/name/last/";if(c.updateData(d,b),a.name===g.getId()){var e=g.getUserData();e.name.last=b,g.setUserData(e),g.setUserName(e.name.first,e.name.last)}}}});break;case 4:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="4"]>span.dtr-data').editable({type:"combodate",name:d.currId,placement:"bottom",emptytext:"null",format:"MM/DD/YYYY",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},display:!1,url:function(a){if(""!==a.value){var b=a.value,d="/userData/"+a.name+"/DOB/";if(c.updateData(d,b),a.name===g.getId()){var e=g.getUserData();e.DOB=b,g.setUserData(e)}}}});break;case 5:break;case 6:$(document).on("click",'ul>li[data-dtr-index="6"]>span.dtr-data',function(){$("#phonenum").mask("(999)999-9999")}),$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="6"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"null",tpl:"<input id='phonenum'>",display:!1,url:function(a){if(""!==a.value){var b=a.value,d="/userData/"+a.name+"/phone/";if(c.updateData(d,b),a.name===g.getId()){var e=g.getUserData();e.phone=b,g.setUserData(e)}}}});break;case 7:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="7"]>span.dtr-data').editable({type:"select",name:d.currId,placement:"bottom",emptytext:"null",showbuttons:!1,display:!1,url:function(a){if(""!==a.value){var b=g.getId();if(d.currId!==b){var e={role:a.value},f="/userRoles/"+a.name;c.updateData(f,e),a.name===g.getId()&&g.setRole(e)}else swal("Alert","You cannot edit your own role!","error")}},source:function(){var b=g.getRole();if("National Staff"===b)return a.siteData.roles;var c=["Participant","Volunteer","Chapter Lead"];return c}});break;case 8:$(b).find("span.dtr-data").addClass("editable editable-click"),$("#membersTable").off("click",'ul>li[data-dtr-index="8"]>span.dtr-data'),$("#membersTable").on("click",'ul>li[data-dtr-index="8"]>span.dtr-data',function(){var a=this;e.open({templateUrl:"/parts/changeChapter.html",controller:"ChangeChapterCtrl",resolve:{selectedUID:function(){var b=$(a).parent().data("dt-row"),c=$(a).parent().parent().parent().parent().parent().find('input[data-row-id="'+b+'"]').val();return c}}})});break;case 9:$(b).find("span.dtr-data").addClass("editable editable-click"),$("#membersTable").off("click",'ul>li[data-dtr-index="9"]>span.dtr-data'),$("#membersTable").on("click",'ul>li[data-dtr-index="9"]>span.dtr-data',function(){var a=this;e.open({templateUrl:"/parts/manageadditionalchapters.html",controller:"ManageAdditionalChapters",resolve:{selectedUID:function(){var b=$(a).parent().data("dt-row"),c=$(a).parent().parent().parent().parent().parent().find('input[data-row-id="'+b+'"]').val();return c}}})});break;case 10:$('ul>li[data-dtr-index="10"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"null",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+a.name+"/branch/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.branch=b,g.setUserData(f)}}}});break;default:console.log("Should not be here")}})}),$("#membersTable-select-all").on("click",function(){var a=d.membersTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#membersTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#membersTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},d.update=function(){var a=c.getData("/userData/"),e=c.getData("/userRoles/"),f=g.getRole(),h=g.getUserData();b.all([a,e]).then(function(a){var b=[],c=[],e=[],g=0;_.each(a[1],function(a,b){switch(f){case"National Staff":c.push(a.role),e.push(b);break;case"Chapter Lead":("Participant"===a.role||"Volunteer"===a.role||"Chapter Lead"===a.role)&&(c.push(a.role),e.push(b));break;default:console.log("should not be here")}}),_.each(e,function(){_.each(a[0],function(a,d){switch(f){case"National Staff":e[g]===d&&(a.key=d,a.role=c[g],b.push(a));break;case"Chapter Lead":e[g]===d&&h.Chapter===a.Chapter&&(a.key=d,a.role=c[g],b.push(a));break;default:console.log("should not be here")}}),g++}),d.buildTable(b)})},d.roleChangeRequests=function(){e.open({templateUrl:"/parts/managerolechangerequest.html",controller:"ManageRoleChangeRequestCtrl"})},d.chapterStatus=function(){e.open({templateUrl:"/parts/chapterStatus.html",controller:"ChapterStatusCtrl"})},d.remove=function(){0===d.checkedBoxes.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){_.each(d.checkedBoxes,function(a){c.removeData("/userData/"+a),c.removeData("/userRoles/"+a)}),swal("Deleted!","Your file has been deleted.","success"),d.update()})}}]),angular.module("ohanaApp").controller("DetailsCtrl",["$http","$scope","$location","DAO","$routeParams","commonServices","$q",function(a,b,c,d,e,f,g){"use strict";b.selectedEvent=null;var h=f.getData("/events/"+e.id);g.all([h]).then(function(a){console.log("hello me",a),a[0]?(b.selectedEvent=a[0],b.apply):console.log(a)},function(a){console.log("the error is",a)}),b.goBackToEvents=function(){c.url("/manage/events")},$(document).ready(function(){$(".nav li a").click(function(a){$(".nav li").removeClass("active");var b=$(this).parent();b.hasClass("active")||b.addClass("active"),a.preventDefault()})})}]),angular.module("ohanaApp").controller("EventdetaildescriptionCtrl",["$http","$location","$scope","DAO",function(a,b,c,d){"use strict";console.log("hello"),c.selectedEvent=d.selectedEvent,console.log("hello:"+selectedEvent),c.startTime="",c.endTime="",c.startDate="",c.endDate="",c.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},c.openStartDate=function(){c.startDate.opened=!0},c.openEndDate=function(){c.endDate.opened=!0},c.startDate={opened:!1},c.endDate={opened:!1},c.combineTimes=function(){var a=new Date(c.startTime),b=new Date(c.endTime),d=new Date(c.startDate),e=new Date(c.endDate),f=new Date(d.getFullYear(),d.getMonth(),d.getDate(),a.getHours(),a.getMinutes()),g=new Date(e.getFullYear(),e.getMonth(),e.getDate(),b.getHours(),b.getMinutes());console.log(f,g);var h=[f,g];return h},c.saveEventDescription=function(){}}]),angular.module("ohanaApp").controller("EventdetailvolunteersCtrl",["$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d){"use strict";a.selectedParticipants=[],a.add=function(){b.open({scope:a,templateUrl:"/parts/addParticipantsToEvent.html",controller:"EventaddvolunteersCtrl"})},a.removed=function(b){var c=a.selectedParticipants.indexOf(b);a.selectedParticipants.splice(c,1)},a.onSelectCallback=function(b){a.selectedParticipants.push(b)},c.member.query().$promise.then(function(b){console.log(b),a.participantList=b.map(function(a){var b={};return b.name=a.first_name+" "+a.last_name,b.email=a.email,b.id=a.id,b})},function(a){console.log(a)}),a.addParticipants=function(){var b=[];0==a.selectedParticipants.length&&swal("","No records selected!","warning"),a.selectedParticipants.forEach(function(d,e,f){0!==f.length&&b.push(c.addMemberToEvent.save({event_id:a.howEvent.currentEvent.id,member_id:d.id}).$promise)}),$q.all(b).then(function(){a.refresh()})},a.refresh=function(){a.update()},a.buildTable=function(b){var c=d.buildEventPeopleTableData(b);a.currId="",angular.element(document).ready(function(){$.fn.DataTable.isDataTable($("#eventVolunteersTable"))&&a.eventVolunteersTable.destroy(),a.eventVolunteersTable=$("#eventVolunteersTable").DataTable({data:c,columns:[{},{title:"ID",data:"DT_RowId"},{title:"First Name",data:"first_name"},{title:"Last Name",data:"last_name"},{title:"Email",data:"email",orderable:!1}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="eventVolunteersTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:2,width:"200px"},{targets:3,width:"200px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="eventVolunteersTable-select-all">')},rowCallback:function(a,b,c){},drawCallback:function(b){$("#eventVolunteersTable").on("click","tr",function(){a.currId=a.eventVolunteersTable.row(this).id()})}}),$("#eventVolunteersTable-select-all").on("click",function(){var b=a.eventVolunteersTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',b).prop("checked",this.checked)}),$("#eventVolunteersTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#eventVolunteersTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},a.update=function(){c.getMembersByEvent.query({event_id:a.howEvent.currentEvent.id}).$promise.then(function(b){a.buildTable(b),a.dataStack=b},function(b){a.buildTable(b),a.dataStack=b,swal({text:"Connection failed. Could not "+b.config.method+" from "+b.config.url,type:"warning",timer:2500})})},a.remove=function(){var b,d,e=a.eventVolunteersTable.rows({search:"applied"}).nodes(),f=[];for(b=0;b<e.length;b++)$('input[type="checkbox"]',e[b]).prop("checked")&&f.push(a.dataStack[b]);0===f.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){for(d=0;d<f.length;d++)console.log(c.dropMemberFromEvent.remove({event_id:a.howEvent.currentEvent.id,member_id:f[d].id}));swal("Deleted!","Your file has been deleted.","success"),$("#eventVolunteersTable-select-all").prop("checked",!1),$('input[type="checkbox"]',e).prop("checked",!1),a.update()})}}]),angular.module("ohanaApp").controller("EventdetailparticipantsCtrl",["$q","$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d,e){"use strict";b.error=!1,b.person={selected:[]},b.disabled=void 0,b.selectedParticipants=[],b.onSelectCallback=function(a){b.selectedParticipants.push(a)},b.add=function(){b.m=c.open({scope:b,templateUrl:"/parts/addParticipantsToEvent.html",controller:"EventaddparticipantsCtrl"})},b.removed=function(a){var c=b.selectedParticipants.indexOf(a);b.selectedParticipants.splice(c,1)},d.member.query().$promise.then(function(a){console.log(a),b.participantList=a.map(function(a){var b={};return b.name=a.first_name+" "+a.last_name,b.email=a.email,b.id=a.id,b})},function(a){console.log(a)}),b.addParticipants=function(){var c=[];0==b.selectedParticipants.length&&swal("","No records selected!","warning"),b.selectedParticipants.forEach(function(a,e,f){0!==f.length&&c.push(d.addMemberToEvent.save({event_id:b.howEvent.currentEvent.id,member_id:a.id}).$promise)}),a.all(c).then(function(){b.refresh()})},b.refresh=function(){b.update()},b.buildTable=function(a){var c=e.buildEventPeopleTableData(a);b.currId="",angular.element(document).ready(function(){$.fn.DataTable.isDataTable($("#eventParticipantsTable"))&&b.eventParticipantsTable.destroy(),b.eventParticipantsTable=$("#eventParticipantsTable").DataTable({data:c,columns:[{},{title:"ID",data:"DT_RowId"},{title:"First Name",data:"first_name"},{title:"Last Name",data:"last_name"},{title:"Email",data:"email",orderable:!1}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="eventParticipantsTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:2,width:"200px"},{targets:3,width:"200px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="eventParticipantsTable-select-all">')},rowCallback:function(a,b,c){},drawCallback:function(a){$("#eventParticipantsTable").on("click","tr",function(){b.currId=b.eventParticipantsTable.row(this).id()})}}),$("#eventParticipantsTable-select-all").on("click",function(){var a=b.eventParticipantsTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#eventParticipantsTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#eventParticipantsTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},b.update=function(){d.getMembersByEvent.query({event_id:b.howEvent.currentEvent.id}).$promise.then(function(a){b.buildTable(a),b.dataStack=a},function(a){b.buildTable(a),b.dataStack=a,swal({text:"Connection failed. Could not "+a.config.method+" from "+a.config.url,type:"warning",timer:2500})})},b.remove=function(){var c,e,f=b.eventParticipantsTable.rows({search:"applied"}).nodes(),g=[];for(c=0;c<f.length;c++)$('input[type="checkbox"]',f[c]).prop("checked")&&g.push(b.dataStack[c]);0===g.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var c=[];for(e=0;e<g.length;e++)c.push(d.dropMemberFromEvent.remove({member_id:g[e].id,event_id:b.howEvent.currentEvent.id}).$promise);a.all(c).then(function(){console.log("deleted"),b.update()}),swal("Deleted!","Your file has been deleted.","success"),$("#eventParticipantsTable-select-all").prop("checked",!1),$('input[type="checkbox"]',f).prop("checked",!1)})}}]),angular.module("ohanaApp").controller("EventdetailequipmentCtrl",["$q","$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d,e){"use strict";b.error=!1,b.person={selected:[]},b.disabled=void 0,b.selectedInventory=[],b.onSelectCallback=function(a){b.selectedInventory.push(a)},b.add=function(){b.m=c.open({scope:b,templateUrl:"/parts/addInventoryToEvent.html",controller:"EventaddinventoryCtrl"})},b.removed=function(a){var c=b.selectedInventory.indexOf(a);b.selectedInventory.splice(c,1)},d.getChapterItems.query({chapter_id:b.howEvent.currentEvent.chapter.id}).$promise.then(function(a){b.selectedInventory=a.map(function(a){var b={};return b.name=a.name,b.category=a.category,b.id=a.id,b})},function(a){console.log(a)}),b.addParticipants=function(){var c=[];0==b.selectedInventory.length&&swal("","No records selected!","warning"),b.selectedInventory.forEach(function(a,e,f){0!==f.length&&c.push(d.reserveItemToEvent.save({event_id:b.howEvent.currentEvent.id,item_id:a.id,date:b.howEvent.currentEvent.createdAt}).$promise)}),a.all(c).then(function(){b.refresh()})},b.refresh=function(){b.update()},b.buildTable=function(a){var c=e.buildEventPeopleTableData(a);b.currId="",angular.element(document).ready(function(){$.fn.DataTable.isDataTable($("#eventInventoryTable"))&&b.eventInventoryTable.destroy(),b.eventInventoryTable=$("#eventInventoryTable").DataTable({data:c,columns:[{},{title:"ID",data:"DT_RowId"},{title:"Item Name",data:"name"},{title:"Category",data:"category"}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="eventInventoryTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:2,width:"200px"},{targets:3,width:"200px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="eventInventoryTable-select-all">')},rowCallback:function(a,b,c){},drawCallback:function(a){$("#eventInventoryTable").on("click","tr",function(){b.currId=b.eventInventoryTable.row(this).id()})}}),$("#eventInventoryTable-select-all").on("click",function(){var a=b.eventInventoryTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#eventInventoryTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#eventInventoryTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},b.update=function(){d.getEventItems.query({event_id:b.howEvent.currentEvent.id}).$promise.then(function(a){b.buildTable(a),b.dataStack=a},function(a){b.buildTable(a),b.dataStack=a,swal({text:"Connection failed. Could not "+a.config.method+" from "+a.config.url,type:"warning",timer:2500})})},b.remove=function(){var c,e,f=b.eventInventoryTable.rows({search:"applied"}).nodes(),g=[];for(c=0;c<f.length;c++)$('input[type="checkbox"]',f[c]).prop("checked")&&g.push(b.dataStack[c]);0===g.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var c=[];for(e=0;e<g.length;e++)c.push(d.dropMemberFromEvent.remove({member_id:g[e].id,event_id:b.howEvent.currentEvent.id}).$promise);a.all(c).then(function(){console.log("deleted"),b.update()}),swal("Deleted!","Your file has been deleted.","success"),$("#eventInventoryTable-select-all").prop("checked",!1),$('input[type="checkbox"]',f).prop("checked",!1)})}}]),angular.module("ohanaApp").controller("EventdetailnotificationCtrl",["$scope",function(a){"use strict";a.distros=["b@example.com","c@example.com"],a.recipient=[],a.ccVisible=!1,a.bccVisible=!1,a.toggleCC=function(){this.ccVisible=!this.ccVisible},a.toggleBCC=function(){this.bccVisible=!this.bccVisible},a.options={height:600},a.sendTime="",a.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},a.today=function(){var b=new Date;a.t=b},a.today(),a.openSendDate=function(){a.sendDate.opened=!0},a.sendDate={opened:!1},a.sendEventNotification=function(){eventDetailsNotifications.reset()}}]),angular.module("ohanaApp").controller("ChadminCtrl",["$rootScope","$q","commonServices","$scope","$uibModal","dataGridUtil","userService",function(a,b,c,d,e,f,g){"use strict";d.chapterTableData={},d.$on("modalClosing",function(){d.update()}),d.buildTable=function(a){var b,e=f.buildChaptersTableData(a);d.chapterTableData=e,d.currId="",d.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={
type:"PUT"},$.fn.DataTable.isDataTable($("#chaptersTable"))&&d.chaptersTable.destroy(),d.chaptersTable=$("#chaptersTable").DataTable({data:e,columns:[{},{title:"KEY",data:"zip"},{title:"Chapter Name",data:"name"},{title:"Description",data:"description"},{title:"Chapter Admin",data:"chadmin"},{title:"Region",data:"region"},{title:"State",data:"state"},{title:"Zip",data:"zip",orderable:!1},{title:"Email",data:"email",orderable:!1},{title:"Website",data:"facebook_link"},{title:"Location",data:"googleMaps_Link"},{title:"Donations",data:"donation_link"}],columnDefs:[{targets:1,visible:!1},{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" id="chaptersTable-select">'}},{targets:3,width:"50px"},{targets:5,width:"90px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="chaptersTable-select-all">')},rowCallback:function(a,c,d){for($(a).find('input[type="checkbox"]').eq(0).attr("value",c.key),$(a).children().eq(1).addClass("tdCName"),$(a).children().eq(2).addClass("tdDescription"),$(a).children().eq(3).addClass("tdSelectRegion"),$(a).children().eq(4).addClass("tdSelectState"),$(a).children().eq(5).addClass("tdSelectZip"),$(a).children().eq(6).addClass("tdEmail"),b=2;7>b;b++)3!=b&&4!=b&&$(a).children().eq(b).wrapInner('<a class="editable editable-click" style="border: none;"></a>');return a},drawCallback:function(a){$("#chaptersTable").off("click","tr"),$("#chaptersTable").on("click","tr",function(){if(d.currId=$(this).find('input[type="checkbox"]').val(),d.editValue=$(this)[0].cells,$(this).find('input[type="checkbox"]').is(":checked"))d.checkedBoxes.push(d.currId);else for(var a=0;a<d.checkedBoxes.length;a++)d.checkedBoxes[a]===d.currId&&d.checkedBoxes.splice(a,1)}),$("#chaptersTable .tdDescription a").editable({type:"text",name:"description",placement:"bottom",emptytext:"N/A",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+d.editValue[1].textContent+"/description";c.updateData(e,b)}}),$("#chaptersTable .tdSelectZip a").editable({type:"text",name:"zip",placement:"bottom",emptytext:"N/A",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+d.editValue[1].textContent+"/zip";c.updateData(e,b)}}),$("#chaptersTable .tdEmail a").editable({type:"email",name:"email",placement:"bottom",emptytext:"N/A",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+d.editValue[1].textContent+"/email";c.updateData(e,b)}})}}),$("#chaptersTable-select-all").on("click",function(){var a=d.chaptersTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#chaptersTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#chaptersTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},d.update=function(){var a=c.getData("/Regions/"),e=g.getRole(),f=g.getUserData();b.all([a]).then(function(a){var b=[],c=[],g=[],h=0;_.each(a[0],function(a,b){switch(e){case"admin":case"National Staff":c.push(a),g.push(b);break;case"Chapter Lead":("Participant"===a.role||"Volunteer"===a.role||"Chapter Lead"===a.role)&&(c.push(a),g.push(b));break;default:console.log("Not an admin, staff, or chapter ltm. Should not load data.")}}),_.each(g,function(){_.each(a[0],function(a,d){switch(e){case"admin":case"National Staff":g[h]===d&&(a.key=d,a.regions=c[h],b.push(a));break;case"Chapter Lead":g[h]===d&&f.Chapter===a.Chapter&&(a.key=d,a.regions=c[h],b.push(a));break;default:console.log("Not an admin, staff, or chapter ltm. Should not load data.")}}),h++}),d.buildTable(b)})},d.addChapter=function(){console.log(d.chaptersTable);var a=e.open({templateUrl:"/parts/chapterAdd.html",controller:"ChapterAddCtrl"});a.result.then(function(a){d.chaptersTable.row.add(a)})},d.removeChapter=function(){0===d.checkedBoxes.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){_.each(d.checkedBoxes,function(a){console.log(d.checkedBoxes)}),swal("Deleted!","Your file has been deleted.","success"),d.update()})}}]),angular.module("ohanaApp").controller("ProfileCtrl",["$scope","$rootScope","$q","commonServices","$uibModal","userService","$filter","$http",function(a,b,c,d,e,f,g,h){"use strict";a.$on("updateProfile",function(b,c){c&&a.update()}),a.$on("modalClosing",function(){a.update()}),a.update=function(){a.profileData=f.getUserData(),a.profileData.years=parseInt(a.profileData.years),a.profileData.role=f.getRole(),a.userUID=f.getId();var b=d.getData("/roleChangeRequests/");c.all([b]).then(function(b){a.requests=[],_.each(b[0],function(b,c){b.uid===a.userUID&&(b.key=c,a.requests.push(b))}),a.addEditableListeners()})},a.rcs_status=!1,a.rcs_show=function(){a.rcs_status?(a.rcs_status=!1,a.update()):(a.rcs_status=!0,a.update())},a.roleChangeRequest=function(){var b=e.open({templateUrl:"/parts/rolerequestchangeform.html",controller:"RoleRequestChangeFormCtrl as rrcf"});b||a.update()},a.deleteRequest=function(b){swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){swal("Deleted!","Your file has been deleted.","success").then(function(){d.removeData("/roleChangeRequests/"+b),a.update()})})},a.opened={},a.open=function(b,c){b.preventDefault(),b.stopPropagation(),a.opened[c]=!a.opened[c]},a.saveUserData=function(c,e){function g(a,b,d){var e=d-1;b.includes(".")?g(a[b.split(".")[0]],b.split(".")[1],e):a[b]=c}var h=null;switch(e){case"name.first":h="/name/first/";break;case"name.last":h="/name/last/";break;case"address.line1":h="/address/line1/";break;case"address.line2":h="/address/line2/";break;case"address.city":h="/address/city/";break;case"address.state":h="/address/state/";break;case"address.zip":h="/address/zip/";break;case"phone":h="/phone/";break;case"Region":h="/Region/";break;case"Chapter":h="/Chapter/";break;case"DOB":h="/DOB/";break;case"branch":h="/branch/";break;case"gender":h="/gender/";break;case"years":h="/years/"}var i=c,j=(f.getUserData(),"/userData/"+a.userUID+h);return d.updateData(j,i),e.includes(".")?g(b.userData,e,e.split(".").length):b.userData[e]=c,f.setUserData(b.userData),!0},a.changeChapter=function(){e.open({templateUrl:"/parts/changeChapter.html",controller:"ChangeChapterCtrl",resolve:{selectedUID:function(){return!1}}})},a.editChapters=function(){e.open({templateUrl:"/parts/manageadditionalchapters.html",controller:"ManageAdditionalChapters",resolve:{selectedUID:function(){return!1}}})},a.addEditableListeners=function(){var c=[];_.each(b.siteData.states,function(a){c.push(a.name)}),$("#profile_first_name").editable({type:"text",name:"first",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"name.first"),a.update())}}),$("#profile_last_name").editable({type:"text",name:"last",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"name.last"),a.update())}}),$("#profile_dob").editable({type:"combodate",name:"dob",placement:"bottom",emptytext:"null",format:"MM/DD/YYYY",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"DOB"),a.update())}}),$("#profile_gender").editable({type:"select",name:"gender",placement:"bottom",emptytext:"null",showbuttons:!1,display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"gender"),a.update())},source:function(){return["M","F","N/A"]}}),$("#profile_addr1").editable({type:"text",name:"addr1",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.line1"),a.update())}}),$("#profile_addr2").editable({type:"text",name:"addr2",placement:"bottom",emptytext:"none",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.line2"),a.update())}}),$("#profile_city").editable({type:"text",name:"city",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.city"),a.update())}}),$("#profile_state").editable({type:"select",name:"state",placement:"bottom",emptytext:"null",showbuttons:!1,display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.state"),a.update())},source:function(){return c}}),$(document).on("click","#profile_zip",function(){$("#profile_zip_num").mask("99999")}),$("#profile_zip").editable({type:"number",name:"zip",placement:"bottom",emptytext:"null",tpl:'<input id="profile_zip_num">',display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.zip"),a.update())}}),$(document).on("click","#profile_phone",function(){$("#profile_phone_num").mask("(999)999-9999")}),$("#profile_phone").editable({type:"number",name:"phone",placement:"bottom",emptytext:"null",tpl:'<input id="profile_phone_num">',display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"phone"),a.update())}}),$("#profile_branch").editable({type:"text",name:"branch",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"branch"),a.update())}}),$("#profile_years").editable({type:"number",name:"years",placement:"bottom",emptytext:"null",tpl:"<input>",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"years"),a.update())}})}}]),angular.module("ohanaApp").controller("RegadminCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("SuperadminCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("NewEventFormCtrl",["$q","$scope","$uibModalInstance","commonServices",function(a,b,c,d){"use strict";b.format="MM/dd/yyyy",b.startpopup={opened:!1},b.startopen=function(){b.startpopup.opened=!0},b.startDateOptions={maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},b.endpopup={opened:!1},b.endopen=function(){b.endpopup.opened=!0},b.endDateOptions={maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},b.today=function(){var a=new Date;b.st=a,b.et=a},b.today(),b.states=[{value:"upcoming-open",displayName:"upcoming-open"},{value:"upcoming-closed",displayName:"upcoming-closed"},{value:"in-session",displayName:"in-session"},{value:"past",displayName:"past"}],b.newEvent={},b.postEvent=function(){b.newEvent.startTime=b.st.getTime(),b.newEvent.endTime=b.et.getTime();var e=d.pushData("/events/",b.newEvent);a.all([e]).then(function(a){a[0]?(console.log(a[0]),c.close(),swal({text:"Adding Event",type:"success",timer:2500})):swal({text:"Something happened....",type:"error",timer:2500})})},b.cancel=function(){c.dismiss("cancel")},angular.element(document).ready(function(){$("#phonenum").mask("(999)999-9999")})}]),angular.module("ohanaApp").controller("ChapterAddCtrl",["$q","$scope","$uibModalInstance","commonServices","$rootScope",function(a,b,c,d,e){"use strict";var f={};b.regions=e.siteData.regions,b.states=e.siteData.states,b.newChapter={},b.postChapter=function(b){f=angular.copy(b),f.region=f.region.value,f.state=f.state.id,f.url=f.facebook,delete f.facebook,f.email_link='<a href="'+f.email+'" target="_blank" id="slp_marker_email" class="storelocatorlink"><nobr>Email</nobr></a>',f.web_link="<a href='"+f.url+"' target='_blank' class='storelocatorlink'>"+f.url+"</a><br/>",f.url_link="<a href='"+f.url+"' target='_blank' class='storelocatorlink'>"+f.url+"</a><br/>",f.lat=0,f.lng=0,f.address="",f.address2="",f.attributes="",f.city="",f.country="",f.distance="",f.fax="",f.featured="",f.hours="",f.icon="",f.id="",f.image="",f.linked_postid="0",f.neat_title="",f.option_value="",f.phone="",f.rank="",f.sl_pages_url="",f.tags="";var e=d.setData("/Regions/"+f.region+"/"+f.state+"/"+f.name,f);a.all([e]).then(function(a){c.close(f),swal({text:"Adding Chapter",type:"success",timer:2500})})},b.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("NewUserDirectoryFormCtrl",["$rootScope","$q","commonServices","$scope","$uibModalInstance","howLogService","userService",function(a,b,c,d,e,f,g){"use strict";d.initialize=function(){d.popup={opened:!1},d.format="MM/dd/yyyy",d.datePattern="([0][1-9]|[1][0-2])[- /.]([0][1-9]|[1-2][0-9]|[3][0-1])[- /.](19|20)dd",d.chapters=[],d.regions=a.siteData.regions,d.states=a.siteData.states,d.branches=["N/A","Firefighter","Police","EMS"],d.newUserDirectory={gender:"N/A",branch:"N/A",years:0,service_type:!1,volunteer:!1},d.dateOptions={maxDate:new Date(2020,5,22),minDate:new Date(1900,5,22),showWeeks:!1,startingDay:1},$("#phonenum").mask("(999)999-9999"),$("#sanicDOB").mask("99/99/9999"),$("#Zip").mask("99999")},d.setDefault=function(){d.newUserDirectory.branch="N/A",d.newUserDirectory.years=0},d.open=function(){d.popup.opened=!0},d.regionUpdate=function(){var a=d.newUserDirectory.region.text,e="/Regions/"+a+"/",f=c.getData(e);b.all([f]).then(function(a){var b=[];a[0]?(_.each(a[0],function(a){_.each(a,function(a){b.push(a.name)})}),d.chapters=b):console.log("Failed to get Chapters...")})},d.ZipUpdate=function(){c.addressLookup(d.newUserDirectory.address.zip,function(a){1==a.success&&d.locationUpdate(a.results)})},d.locationUpdate=function(a){var b=this;c.zipCompare(a).then(function(a){d.newUserDirectory.region=a[1],b.regionUpdate(),d.newUserDirectory.chapter=a[0]})},d.postUser=function(a){if(a.$invalid)swal({text:"The form has required fields that are missing data or formatted improperly.",type:"error",customClass:"modal-border"});else{"undefined"==typeof d.newUserDirectory.address.line2&&(d.newUserDirectory.address.line2="");var h={address:{city:d.newUserDirectory.address.city,line1:d.newUserDirectory.address.line1,line2:d.newUserDirectory.address.line2?d.newUserDirectory.address.line2:"none",state:d.newUserDirectory.address.state.name,zip:d.newUserDirectory.address.zip},name:d.newUserDirectory.name,branch:d.newUserDirectory.branch,email:d.newUserDirectory.email,gender:d.newUserDirectory.gender,DOB:d.newUserDirectory.DOB.getTime(),phone:d.newUserDirectory.phone,years:d.newUserDirectory.years,Region:d.newUserDirectory.region.text,Chapter:d.newUserDirectory.chapter,password:d.newUserDirectory.password},i=c.register(h);b.all([i]).then(function(a){a[0]?(swal({text:"User added!",type:"success"}).then(function(){if(d.newUserDirectory.volunteer){var a={uid:g.getId(),name:g.getUserName(),email:g.getUserData().email,current_role:g.getRole(),request_role:"volunteer",user_comment:"none",admin_comment:"",request_status:"pending",request_created:Date.now(),request_updated:Date.now(),request_closed:""};c.pushData("/roleChangeRequests/",a),swal({text:"Request to be Volunteer has been submitted! You can view the status of your request on your profile page.",type:"success"})}}),f.logPrimaryChapterChange(h.name.first+" "+h.name.last,!1,!1,h.Chapter),e.close(),window.location.replace("#/home")):swal({text:"Error submitting data. Please try again",type:"error",timer:2500})})}},d.cancel=function(){e.dismiss("cancel")}}]),angular.module("ohanaApp").controller("NewItemInventoryFormCtrl",["$scope","$uibModalInstance","Api",function(a,b,c){"use strict";a.popup={opened:!1},a.format="MM/dd/yyyy",a.dateOptions={maxDate:new Date,startingDay:0,showWeeks:!1},a.open=function(){a.popup.opened=!0},a.categories=[{value:"kayaks_and_equip",displayName:"Kayaks and Equipment"},{value:"fishing_equip",displayName:"Fishing Equipment"},{value:"safety",displayName:"Safety and PFDs"},{value:"event_support",displayName:"Event Support"},{value:"chapter_support",displayName:"Chapter Support"},{value:"misc",displayName:"Misc"}],a.conditions=[{value:"new",displayName:"New"},{value:"good",displayName:"Good"},{value:"fair",displayName:"Fair"},{value:"poor",displayName:"Poor"},{value:"broken",displayName:"Broken"}],a.newItem={},a.postUser=function(){a.newItem.chapter=$("#chapter :selected").val(),null==a.newItem.name_of_item||null==a.newItem.category||null==a.newItem.condition||null==a.newItem.chapter?(console.log(a.newItem),console.log("ERROR"),swal({text:"Form incomplete!",type:"warning",timer:2500})):(console.log(a.newItem),console.log("SUCCESS"),c.member.save(a.newItem).$promise.then(function(a){swal({text:"User added!",type:"success",timer:2500}),b.close()},function(a){swal({text:"Error submitting data. Please try again",type:"error",timer:2500})}))},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("ohanaApp").controller("RoleRequestChangeFormCtrl",["$rootScope","$q","userService","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";e.userData=c.getUserData(),e.currentUID=c.getId(),e.currentUserRole=c.getRole(),e.formData={role:"",comment:""},e.roles=a.siteData.roles,e.cancel=function(){f.dismiss("cancel")},e.submitForm=function(){if(e.formData.role.value){var c=d.getData("/roleChangeRequests/"),g=!0,h="";b.all([c]).then(function(b){if(e.currentUserRole!==e.formData.role.value?_.each(b[0],function(a){a.uid===e.currentUID&&"pending"===a.request_status&&(g=!1,h="You can only have one pending request at a time, you need to wait or delete current pending request...")}):(g=!1,h="You are not allowed to make a request for a role you already have..."),g){var c=Date.now(),i={uid:e.currentUID,name:e.userData.name.first+" "+e.userData.name.last,email:e.userData.email,current_role:e.currentUserRole,request_role:e.formData.role.value,user_comment:e.formData.comment||"none",admin_comment:"",request_status:"pending",request_created:c,request_updated:c,request_closed:""};d.pushData("/roleChangeRequests/",i),a.$broadcast("modalClosing"),f.dismiss("cancel"),swal("Success","Role Change Request created successfully","success")}else swal("Error",h,"error")})}else swal("Error","Role Change Request was not created...","error")}}]),angular.module("ohanaApp").controller("ManageRoleChangeRequestCtrl",["$q","commonServices","userService","$scope","$rootScope","$location","$uibModalInstance",function(a,b,c,d,e,f,g){"use strict";d.update=function(){var e=b.getData("/roleChangeRequests/"),f=b.getData("/userData/"),g=c.getRole(),h=c.getUserData();d.declined_requests=[],d.approved_requests=[],d.pending_requests=[],d.alertPending=!1,d.pendingCount=0,a.all([e,f]).then(function(a){d.requests=[],_.each(a[0],function(b,c){"National Staff"===g?(b.key=c,d.filterRequests(b)):_.each(a[1],function(a,e){b.uid!==e||a.Chapter!==h.Chapter||"Participant"!==b.request_role&&"Volunteer"!==b.request_role&&"Chapter Lead"!==b.request_role||(b.key=c,d.filterRequests(b))})}),console.log(d.requests)})},d.declined=function(a,e){var f=c.getId();e.uid!==f?swal({title:"Reason for approval?",input:"text",showCancelButton:!0,confirmButtonText:"Submit"}).then(function(f){if(""===f)swal("Alert","Declining request requires a comment...","error");else{var g=Date.now();delete e.key,delete e.$$hashKey,e.reviewer=c.getUserName(),e.reviewers_comment=f,e.request_updated=g,e.request_closed=g,e.request_status="Declined",b.updateData("/roleChangeRequests/"+a,e),d.update(),swal("Declined","Role change was declined!","success")}},function(a){"cancel"===a&&swal("Cancelled","No change made to request","error")}):swal("Alert","You cannot decline your own requests...","error")},d.approved=function(a,e){var f=c.getId();e.uid!==f?swal({title:"Reason for approval?",input:"text",showCancelButton:!0,confirmButtonText:"Submit"}).then(function(f){if(""===f)swal("Alert","Approval requires a comment...","error");else{var g=Date.now();delete e.key,delete e.$$hashKey,e.reviewer=c.getUserName(),e.reviewers_comment=f,e.request_updated=g,e.request_closed=g,e.request_status="Approved",b.updateData("/roleChangeRequests/"+a,e),b.updateData("/userRoles/"+e.uid+"/role/",e.request_role),d.update(),swal("Approved","Role change was approved!","success")}},function(a){"cancel"===a&&swal("Cancelled","No change made to request","error")}):swal("Alert","You cannot approve your own requests...","error")},d.cancel=function(){g.dismiss("cancel"),e.$broadcast("modalClosing")},d.filterRequests=function(a){switch(a.request_status){case"Approved":d.approved_requests.push(a);break;case"Declined":d.declined_requests.push(a);break;default:d.pending_requests.push(a),d.alertPending=!0,d.pendingCount=d.pending_requests.length}}}]),angular.module("ohanaApp").controller("DonorsCtrl",["$scope","$uibModalInstance","Api",function(a,b,c){"use strict";a.popup={opened:!1},a.format="MM/yyyy",a.dateOptions={maxDate:new Date,startingDay:0,showWeeks:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){b.dismiss("cancel")},a.donate=function(){b.dismiss("cancel")}}]),angular.module("ohanaApp").controller("PublicEventsDescriptionCtrl",["$scope","$location","$uibModalInstance",function(a,b,c){"use strict";a.event=a.selected,console.log("In modal"),console.log(a.selected),a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")},a.postRsvp=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("EventaddparticipantsCtrl",["$scope","$location","$uibModalInstance","Api",function(a,b,c,d){"use strict";a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("EventaddvolunteersCtrl",["$scope","$location","$uibModalInstance","Api",function(a,b,c,d){"use strict";a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("EventaddinventoryCtrl",["$scope","$location","$uibModalInstance","Api",function(a,b,c,d){"use strict";a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("passwordResetFormCtrl",["$rootScope","$q","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e){"use strict";d.userEmail={email:""},d.popup={opened:!1},d.open=function(){d.popup.opened=!0},d.cancel=function(){e.dismiss("cancel")},d.resetPassword=function(){var a=c.sendPasswordReset(d.userEmail);b.all([a]).then(function(a){console.log(a),a[0]?(e.dismiss("cancel"),swal("Request sent!","Check your email for instructions to reset your password","success")):swal("Request Failed...","Email does not exist","error")})}}]),angular.module("ohanaApp").controller("ChapterStatusCtrl",["$q","commonServices","userService","$scope","$rootScope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";d.initialize=function(){d.logLevel=!1,d.selectedRegion=!1,d.selectedChapter=!1,d.selectedOption=!1,d.chapters=[],d.regions=e.siteData.regionsChapters,d.logType=[],d.currentLog=[],"Chapter Lead"===c.getRole()&&(d.levelChanged("Chapter"),d.selectedChapter={text:c.getChapter()})},d.cancel=function(){f.dismiss("cancel"),e.$broadcast("modalClosing")},d.regionUpdate=function(a){_.each(d.regions,function(b){a.value===b.value&&(d.chapters=b.chapters)})},d.chapterChanged=function(){d.selectedOption=!1},d.levelChanged=function(a){d.currentLog=[],"National"===a?d.logType=[{text:"All Chapter Changes"}]:d.logType=[{text:"Primary Member Changes"},{text:"Secondary Member Changes"}]},d.selectedLogOption=function(c){var e;switch(c.text){case"All Chapter Changes":e=b.getData("/logs/nationalLogs/memberTraffic"),a.all([e]).then(function(a){d.formatAllLogs(a[0])});break;case"Primary Member Changes":e=b.getData("/logs/chapterLogs/memberTraffic/primaryChapter/"+d.selectedChapter.text),a.all([e]).then(function(a){d.formatPrimaryMemberLogs(a[0])});break;case"Secondary Member Changes":e=b.getData("/logs/chapterLogs/memberTraffic/secondaryChapter/"+d.selectedChapter.text),a.all([e]).then(function(a){d.formatSecondaryMemberLogs(a[0])});break;default:console.log("No Log Option...")}},d.formatAllLogs=function(a){var b,c=[];_.each(a,function(a){b={msg:"",ts:a.timeStamp},"primary"===a.type?(b.msg+=a.userName+" ",a.changedBy?(b.msg+="Primary Chapter was switched by "+a.changedBy+" from ",b.msg+=a.oldChapter+" to "+a.newChapter):a.oldChapter?b.msg+="switched Primary Chapter from "+a.oldChapter+" to "+a.newChapter:b.msg+="is a newly registered user, and has joined "+a.newChapter):"secondary"===a.type?(b.msg+=a.userName+" ",a.changedBy?b.msg+="Secondary Chapter(s) was modified by "+a.changedBy+": ":b.msg+="Secondary Chapter(s) was modified : ",a.oldChapters&&(b.msg+="Removed: ",_.each(a.oldChapters,function(a){b.msg+=a+", "})),a.newChapters&&(b.msg+="Added: ",_.each(a.newChapters,function(a){b.msg+=a+", "}))):console.log("Invalid Type....."),c.push(b)}),d.currentLog=c.reverse()},d.formatPrimaryMemberLogs=function(a){var b,c=[];_.each(a,function(a){b={msg:"",ts:a.timeStamp},"added"===a.status?a.changedBy?b.msg+=a.userName+" has been ADDED to "+d.selectedChapter.text+" by "+a.changedBy+".":b.msg+=a.userName+"  has JOINED "+d.selectedChapter.text+".":a.changedBy?b.msg+=a.userName+" has been REMOVED from "+d.selectedChapter.text+" by "+a.changedBy+".":b.msg+=a.userName+"  has LEFT "+d.selectedChapter.text+".",c.push(b)}),d.currentLog=c.reverse()},d.formatSecondaryMemberLogs=function(a){var b,c=[];_.each(a,function(a){b={msg:"",ts:a.timeStamp},"added"===a.status?a.changedBy?b.msg+=a.userName+" has been ADDED to "+d.selectedChapter.text+" as a secondary member by "+a.changedBy+".":b.msg+=a.userName+"  has JOINED "+d.selectedChapter.text+" as a secondary member.":a.changedBy?b.msg+=a.userName+", as a secondary member, has been REMOVED from "+d.selectedChapter.text+" by "+a.changedBy+".":b.msg+=a.userName+", as a scondary member,  has LEFT "+d.selectedChapter.text+".",c.push(b)}),d.currentLog=c.reverse()}}]),angular.module("ohanaApp").controller("ChangeChapterCtrl",["selectedUID","$scope","$rootScope","$q","commonServices","userService","$uibModalInstance","howLogService",function(a,b,c,d,e,f,g,h){"use strict";b.chapters=[],b.regions=c.siteData.regionsChapters,b.cancel=function(){g.dismiss("cancel")},b.regionUpdate=function(a){_.each(b.regions,function(c){a.value===c.value&&(b.chapters=c.chapters)})},b.updateRegionChapter=function(b,i){if(a){var j=e.getData("/userData/"+a);d.all([j]).then(function(d){swal({title:"Are you sure?",text:"Changing "+d[0].name.first+" "+d[0].name.last+" chapter will revert their role to Participant...",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please continue!"}).then(function(){h.logPrimaryChapterChange(d[0].name.first+" "+d[0].name.last,f.getUserName(),d[0].Chapter,i.value),h.logUserAddedToChapter(d[0].name.first+" "+d[0].name.last,f.getUserName(),i.value),h.logUserRemovedFromChapter(d[0].name.first+" "+d[0].name.last,f.getUserName(),d[0].Chapter),e.updateData("/userData/"+a+"/Region",b.value),e.updateData("/userData/"+a+"/Chapter",i.value),e.updateData("/userRoles/"+a+"/role","Participant"),g.dismiss("cancel"),c.$broadcast("modalClosing"),swal("Success","Region/Chapter updated successfully!","success")})})}else swal({title:"Are you sure?",text:"Your role will be changed to Participant if you change your PRIMARY CHAPTER",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please continue!"}).then(function(){var a=f.getId(),d=f.getUserData(),j=f.getChapter(),k=f.getUserName();h.logPrimaryChapterChange(k,!1,j,i.value),h.logUserAddedToChapter(k,!1,i.value),h.logUserRemovedFromChapter(k,!1,j),e.updateData("/userData/"+a+"/Region",b.value),e.updateData("/userData/"+a+"/Chapter",i.value),e.updateData("/userRoles/"+a+"/role","Participant"),d.Region=b.value,d.Chapter=i.value,f.setUserData(d),f.setChapter(i.value),f.setRole("Participant"),g.dismiss("cancel"),c.$broadcast("updateProfile",!0),swal("Success","Region/Chapter updated successfully!","success")})}}]),angular.module("ohanaApp").controller("ManageAdditionalChapters",["selectedUID","$q","commonServices","userService","$scope","$rootScope","$uibModalInstance","howLogService",function(a,b,c,d,e,f,g,h){"use strict";e.initialize=function(){if(e.submitFlag=!1,e.userChapters=[],e.chapters=[],e.regions=f.siteData.regionsChapters,e.chaptersRemoved=[],e.chaptersAdded=[],a){var g=c.getData("/userData/"+a);b.all([g]).then(function(a){e.userData=a[0],_.each(e.userData.Chapters,function(a){e.userChapters.push(a)})})}else e.userData=d.getUserData(),_.each(e.userData.Chapters,function(a){e.userChapters.push(a)})},e.cancel=function(){g.dismiss("cancel"),f.$broadcast("modalClosing")},e.regionUpdate=function(a){_.each(e.regions,function(b){a.value===b.value&&(e.chapters=b.chapters)})},e.addChapter=function(){var a=!0,b={region:e.newRegion.value,chapter:e.newChapter.value};_.each(e.userChapters,function(b){b.chapter===e.newChapter.value&&(a=!1)}),a?(console.log("hererererere"),e.userChapters.push(b),e.chaptersAdded.push(b.chapter),e.chaptersRemoved=_.filter(e.chaptersRemoved,function(a){return a!==b.chapter}),e.submitFlag=!0):swal("error",e.newChapter.value+" has already been added to secondary chapters...","error")},e.updateChapters=function(){if(a){var i=c.getData("/userData/"+a),j=!0;b.all([i]).then(function(b){e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey}),_.each(e.userChapters,function(a){return a.chapter===b[0].Chapter?void(j=!1):void 0}),j?(h.logSecondaryChapterChange(b[0].name.first+" "+b[0].name.last,d.getUserName(),e.chaptersRemoved,e.chaptersAdded),h.logUserAddedToSecondaryChapter(b[0].name.first+" "+b[0].name.last,d.getUserName(),e.chaptersAdded),h.logUserRemovedFromSecondaryChapter(b[0].name.first+" "+b[0].name.last,d.getUserName(),e.chaptersRemoved),c.updateData("/userData/"+a+"/Chapters/",e.userChapters),g.dismiss("cancel"),f.$broadcast("modalClosing"),swal("Success","Region/Chapter updated successfully!","success")):swal("Error","User already has "+b[0].Chapter+" as their PRIMARY CHAPTER, please remove before submitting changes...","error")})}else{var k=d.getId(),l=d.getUserData(),m=(d.getChapter(),d.getUserName()),j=!0;e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey}),_.each(e.userChapters,function(a){return a.chapter===d.getChapter()?void(j=!1):void 0}),j?(h.logSecondaryChapterChange(m,!1,e.chaptersRemoved,e.chaptersAdded),h.logUserAddedToSecondaryChapter(m,!1,e.chaptersAdded),h.logUserRemovedFromSecondaryChapter(m,!1,e.chaptersRemoved),c.updateData("/userData/"+k+"/Chapters/",e.userChapters),l.Chapters=e.userChapters,d.setUserData(l),g.dismiss("cancel"),f.$broadcast("updateProfile",!0),swal("Success","Region/Chapter updated successfully!","success")):swal("Error","User already has "+d.getChapter()+" as their PRIMARY CHAPTER, please remove before submitting changes...","error")}},e.removeChapter=function(){e.userChapters=_.filter(e.userChapters,function(a){return a.chapter!==e.currentChapter[0].chapter}),e.chaptersAdded=_.filter(e.chaptersAdded,function(a){return a!==e.currentChapter[0].chapter}),e.chaptersRemoved.push(e.currentChapter[0].chapter),e.submitFlag=!0}}]),angular.module("ohanaApp").controller("ManageVolunteersCtrl",["event","$rootScope","$q","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";e.rows_selected=[],e.event=a,e.new_row={key:"",first:"",middle:"",last:"",email:"",phone:""},e.addVolunteer=function(){d.pushData("/events/"+e.event.key+"/volunteers",e.new_row),e.reloadData()},e.reloadData=function(){d.getData("/events/"+e.event.key+"/volunteers").then(function(a){e.event.volunteers=a,e.buildTable()})},e.deleteVolunteers=function(){e.rows_selected.forEach(function(a,b){d.removeData("/events/"+e.event.key+"/volunteers/"+a)}),e.reloadData()},e.buildTable=function(){var a=[];e.event.volunteers?Object.keys(e.event.volunteers).forEach(function(b,c){e.event.volunteers[b].key=b,a.push(e.event.volunteers[b])}):[];e.currId="",e.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={
type:"PUT"},$.fn.DataTable.isDataTable($("#volunteersTable"))&&(e.volunteersTable.destroy(),console.log("inside the destroy")),e.volunteersTable=$("#volunteersTable").DataTable({data:a,columns:[{title:"KEY",data:"key"},{title:"First Name",data:"first"},{title:"Middle Name",data:"middle"},{title:"Last Name",data:"last"},{title:"Email",data:"email",orderable:!1},{title:"Mobile #",data:"phone",orderable:!1}],columnDefs:[{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" class="volunteersTable-select">'}}],order:[[1,"desc"]],headerCallback:function(a){},rowCallback:function(a,b,c){var d=b[0];-1!==$.inArray(d,e.rows_selected)&&($(a).find('input[type="checkbox"]').prop("checked",!0),$(a).addClass("selected"))},drawCallback:function(a){$(".volunteersTable-select").on("click",function(a){var b=$(this).closest("tr"),c=e.volunteersTable.row(b).data(),d=c.key,f=$.inArray(d,e.rows_selected);this.checked&&-1===f?e.rows_selected.push(d):this.checked||-1===f||e.rows_selected.splice(f,1),this.checked?b.addClass("selected"):b.removeClass("selected"),e.$apply(),a.stopPropagation()})}}),console.log(e.volunteersTable)})},e.buildTable(),e.cancel=function(){f.dismiss("cancel")}}]),angular.module("ohanaApp").controller("ManageParticipantsCtrl",["event","$rootScope","$q","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";e.rows_selected=[],e.event=a,e.new_row={key:"",first:"",middle:"",last:"",email:"",phone:""},e.addParticipant=function(){d.pushData("/events/"+e.event.key+"/participants",e.new_row),e.reloadData()},e.reloadData=function(){d.getData("/events/"+e.event.key+"/participants").then(function(a){e.event.participants=a,e.buildTable()})},e.deleteParticipants=function(){e.rows_selected.forEach(function(a,b){d.removeData("/events/"+e.event.key+"/participants/"+a)}),e.reloadData()},e.buildTable=function(){var a=[];e.event.participants?Object.keys(e.event.participants).forEach(function(b,c){e.event.participants[b].key=b,a.push(e.event.participants[b])}):[];e.currId="",e.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#participantsTable"))&&(e.participantsTable.destroy(),console.log("inside the destroy")),e.participantsTable=$("#participantsTable").DataTable({data:a,columns:[{title:"KEY",data:"key"},{title:"First Name",data:"first"},{title:"Middle Name",data:"middle"},{title:"Last Name",data:"last"},{title:"Email",data:"email",orderable:!1},{title:"Mobile #",data:"phone",orderable:!1}],columnDefs:[{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" class="participantsTable-select">'}}],order:[[1,"desc"]],headerCallback:function(a){},rowCallback:function(a,b,c){var d=b[0];-1!==$.inArray(d,e.rows_selected)&&($(a).find('input[type="checkbox"]').prop("checked",!0),$(a).addClass("selected"))},drawCallback:function(a){$(".participantsTable-select").on("click",function(a){var b=$(this).closest("tr"),c=e.participantsTable.row(b).data(),d=c.key,f=$.inArray(d,e.rows_selected);this.checked&&-1===f?e.rows_selected.push(d):this.checked||-1===f||e.rows_selected.splice(f,1),this.checked?b.addClass("selected"):b.removeClass("selected"),e.$apply(),a.stopPropagation()})}}),console.log(e.participantsTable)})},e.buildTable(),e.cancel=function(){f.dismiss("cancel")}}]),angular.module("ohanaApp").service("commonServices",["$rootScope","$firebaseAuth","DAO","expenseservice","$firebaseArray","$q",function(a,b,c,d,e,f){this.register=function(a){return firebase.auth().createUserWithEmailAndPassword(a.email,a.password).then(function(){var b=firebase.auth().currentUser.uid;return console.log("success : user registered"),firebase.database().ref("/userData/"+b).set(a).then(function(c){return console.log("success : user data added"),firebase.database().ref("/userRoles/"+b).set({role:"Participant",name:a.name,email:a.email}),!0})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),!1})})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),!1})},this.signin=function(a){return firebase.auth().signInWithEmailAndPassword(a.email,a.password).then(function(a){return console.log("success : "+firebase.auth().currentUser.email+" signed In"),{type:"SUCCESS"}})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),{type:"ERROR",code:a.code,message:a.message}})},this.signout=function(){firebase.auth().signOut().then(function(b){console.log("success : Signed out"),a.userData={},a.userRole={}})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.sendPasswordReset=function(a){return firebase.auth().sendPasswordResetEmail(a.email).then(function(a){return console.log("success : password reset sent"),!0})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),!1})},this.getCurrentUserEmail=function(){var a=firebase.auth().currentUser;return null!=a?a.email:""},this.getCurrentUserUid=function(){var a=firebase.auth().currentUser;return null!=a?a.uid:""},this.getCurrentUserRole=function(){var a=firebase.auth().currentUser.uid;return firebase.database().ref("/userRoles/"+a+"/role/").once("value").then(function(a){return a.val()})},this.setData=function(a,b){firebase.database().ref(a).set(b).then(function(a){console.log("success : data set")})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.pushData=function(a,b){return firebase.database().ref(a).push(b).once("value").then(function(a){return console.log("success : data pushed"),a.val()})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.getNewKey=function(a){return firebase.database().ref(a).push().key},this.updateData=function(a,b){var c={};c[a]=b,firebase.database().ref().update(c).then(function(a){console.log("success : data updated")})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.removeData=function(a){firebase.database().ref(a).remove().then(function(a){console.log("success : data Deleted")})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.getData=function(a){return firebase.database().ref(a).once("value").then(function(a){return a.val()})},this.getPublicEvents=function(){return firebase.database().ref("events").once("value").then(function(a){return console.log("Data received"),a.val()})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.DAO=c,this.getEvent=function(a){return firebase.database().ref("/events").orderByChild("name").equalTo(a.name).once("value").then(function(a){return console.log("Data received"),a.val()})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.addressLookup=function(a,b){var c=new google.maps.Geocoder;c.geocode({address:a.toString()},function(a,c){if(c==google.maps.GeocoderStatus.OK&&a.length>0){var d=a[0].geometry.location;b(c==google.maps.GeocoderStatus.OK?{success:!0,err:null,results:d}:{success:!1,err:new Error("Geocode was not successful for the following reason: "+c),results:null})}})},this.zipCompare=function(b){var c,d,e=null,g=this,h=[];return _.each(a.siteData.regions,function(a){var i="/Regions/"+a.text+"/",j=g.getData(i);h.push(j),f.all([j]).then(function(f){f[0]?_.each(f[0],function(f){_.each(f,function(f){var g=new google.maps.LatLng(f.lat,f.lng),h=google.maps.geometry.spherical.computeDistanceBetween(b,g);null==e?e=h:e>h&&(e=h,c=f.name,d=a)})}):console.log("Failed to get Chapters...")})}),f.all(h).then(function(){var a=[];return a.push(c),a.push(d),a})}}]),angular.module("ohanaApp").service("DAO",function(){var a=function(){this.address=null,this.branch=null,this.email=null,this.emergency={name:null,phone:null},this.gender=null,this.name={first:null,last:null},this.phone=null,this.years=null,1==arguments.length&&angular.extend(this,arguments[0])},b=function(){this.name=null,this.url=null,this.data=null,this.regionId=null,this.chapterId=null,this.creatorId=null,this.lastModifiedId=null,this.typeOfReport=null,1==arguments.length&&angular.extend(this.prototype,arguments[0])},c=function(){this.users=null,this.location={address:null,address2:null,city:null,state:null,zip:null},this.staff={},this.events={title:null,allDay:null,start:null,end:null,description:null,name:null,data:null,images:{},participants:null,volunteers:null,LTMs:null,location:{address:null,address2:null,city:null,state:null,zip:null}},this.reports={},1==arguments.length&&angular.extend(this.prototype,arguments[0])},d=function(){this.title=null,this.allDay=null,this.startTime=null,this.endTime=null,this.description=null,this.name=null,this.data=null,this.images=null,this.participants=null,this.volunteers=null,this.location=null,1==arguments.length&&angular.extend(this.prototype,arguments[0])};return{userData:a,report:b,chapter:c,selectedEvent:d}}),angular.module("ohanaApp").factory("pageAuthInterceptor",["$q","$rootScope",function(a,b){var c={request:function(a){switch(a.url){case"views/manage/directory.html":"National Staff"===b.userRole||"Chapter Lead"===b.userRole?console.log("Authorized"):(window.location.replace("#/home"),console.log("Not Authorized!"))}return a}};return c}]),function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.editableform.defaults,c),this.$div=a(b),this.options.scope||(this.options.scope=this)};b.prototype={constructor:b,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var b=this.$form.find(".editable-buttons");b.append(a.fn.editableform.buttons),"bottom"===this.options.showbuttons&&b.addClass("editable-buttons-bottom")},render:function(){this.$loading=a(a.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),a.when(this.input.render()).then(a.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(a){a.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var b=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(b),this.$form.submit(a.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var a,b;this.$form?(a=this.$form.outerWidth(),b=this.$form.outerHeight(),a&&this.$loading.width(a),b&&this.$loading.height(b),this.$form.hide()):(a=this.$loading.parent().width(),a&&this.$loading.width(a)),this.$loading.show()},showForm:function(a){this.$loading.hide(),this.$form.show(),a!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(b){var c,d=this.$form.find(".control-group"),e=this.$form.find(".editable-error-block");if(b===!1)d.removeClass(a.fn.editableform.errorGroupClass),e.removeClass(a.fn.editableform.errorBlockClass).empty().hide();else{if(b){c=(""+b).split("\n");for(var f=0;f<c.length;f++)c[f]=a("<div>").text(c[f]).html();b=c.join("<br>")}d.addClass(a.fn.editableform.errorGroupClass),e.addClass(a.fn.editableform.errorBlockClass).html(b).show()}},submit:function(b){b.stopPropagation(),b.preventDefault();var c=this.input.input2value(),d=this.validate(c);if("object"===a.type(d)&&void 0!==d.newValue){if(c=d.newValue,this.input.value2input(c),"string"==typeof d.msg)return this.error(d.msg),void this.showForm()}else if(d)return this.error(d),void this.showForm();if(!this.options.savenochange&&this.input.value2str(c)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var e=this.input.value2submit(c);this.isSaving=!0,a.when(this.save(e)).done(a.proxy(function(a){this.isSaving=!1;var b="function"==typeof this.options.success?this.options.success.call(this.options.scope,a,c):null;return b===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof b?(this.error(b),void this.showForm()):(b&&"object"==typeof b&&b.hasOwnProperty("newValue")&&(c=b.newValue),this.error(!1),this.value=c,void this.$div.triggerHandler("save",{newValue:c,submitValue:e,response:a}))},this)).fail(a.proxy(function(a){this.isSaving=!1;var b;b="function"==typeof this.options.error?this.options.error.call(this.options.scope,a,c):"string"==typeof a?a:a.responseText||a.statusText||"Unknown error!",this.error(b),this.showForm()},this))},save:function(b){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,!0);var c,d="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,e=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==d&&void 0!==d));return e?(this.showLoading(),c={name:this.options.name||"",value:b,pk:d},"function"==typeof this.options.params?c=this.options.params.call(this.options.scope,c):(this.options.params=a.fn.editableutils.tryParseJson(this.options.params,!0),a.extend(c,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,c):a.ajax(a.extend({url:this.options.url,data:c,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(a){return void 0===a&&(a=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,a):void 0},option:function(a,b){a in this.options&&(this.options[a]=b),"value"===a&&this.setValue(b)},setValue:function(a,b){b?this.value=this.input.str2value(a):this.value=a,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},a.fn.editableform=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("editableform"),g="object"==typeof c&&c;f||e.data("editableform",f=new b(this,g)),"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1))})},a.fn.editableform.Constructor=b,a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',a.fn.editableform.loading='<div class="editableform-loading"></div>',a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',a.fn.editableform.errorGroupClass=null,a.fn.editableform.errorBlockClass="editable-error",a.fn.editableform.engine="jquery"}(window.jQuery),function(a){"use strict";a.fn.editableutils={inherit:function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype},setCursorPosition:function(a,b){if(a.setSelectionRange)a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},tryParseJson:function(a,b){if("string"==typeof a&&a.length&&a.match(/^[\{\[].*[\}\]]$/))if(b)try{a=new Function("return "+a)()}catch(c){}finally{return a}else a=new Function("return "+a)();return a},sliceObj:function(b,c,d){var e,f,g={};if(!a.isArray(c)||!c.length)return g;for(var h=0;h<c.length;h++)e=c[h],b.hasOwnProperty(e)&&(g[e]=b[e]),d!==!0&&(f=e.toLowerCase(),b.hasOwnProperty(f)&&(g[e]=b[f]));return g},getConfigData:function(b){var c={};return a.each(b.data(),function(a,b){("object"!=typeof b||b&&"object"==typeof b&&(b.constructor===Object||b.constructor===Array))&&(c[a]=b)}),c},objectKeys:function(a){if(Object.keys)return Object.keys(a);if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c},escape:function(b){return a("<div>").text(b).html()},itemsByValue:function(b,c,d){if(!c||null===b)return[];if("function"!=typeof d){var e=d||"value";d=function(a){return a[e]}}var f=a.isArray(b),g=[],h=this;return a.each(c,function(c,e){if(e.children)g=g.concat(h.itemsByValue(b,e.children,d));else if(f)a.grep(b,function(a){return a==(e&&"object"==typeof e?d(e):e)}).length&&g.push(e);else{var i=e&&"object"==typeof e?d(e):e;b==i&&g.push(e)}}),g},createInput:function(b){var c,d,e,f=b.type;return"date"===f&&("inline"===b.mode?a.fn.editabletypes.datefield?f="datefield":a.fn.editabletypes.dateuifield&&(f="dateuifield"):a.fn.editabletypes.date?f="date":a.fn.editabletypes.dateui&&(f="dateui"),"date"!==f||a.fn.editabletypes.date||(f="combodate")),"datetime"===f&&"inline"===b.mode&&(f="datetimefield"),"wysihtml5"!==f||a.fn.editabletypes[f]||(f="textarea"),"function"==typeof a.fn.editabletypes[f]?(c=a.fn.editabletypes[f],d=this.sliceObj(b,this.objectKeys(c.defaults)),e=new c(d)):(a.error("Unknown type: "+f),!1)},supportsTransitions:function(){var a=document.body||document.documentElement,b=a.style,c="transition",d=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof b[c])return!0;c=c.charAt(0).toUpperCase()+c.substr(1);for(var e=0;e<d.length;e++)if("string"==typeof b[d[e]+c])return!0;return!1}}}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init(a,b)},c=function(a,b){this.init(a,b)};b.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(c,d){this.$element=a(c),this.options=a.extend({},a.fn.editableContainer.defaults,d),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",a.proxy(function(){this.destroy()},this)),a(document).data("editable-handlers-attached")||(a(document).on("keyup.editable",function(b){27===b.which&&a(".editable-open").editableContainer("hide")}),a(document).on("click.editable",function(c){var d,e=a(c.target),f=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(a.contains(document.documentElement,c.target)&&!e.is(document)){for(d=0;d<f.length;d++)if(e.is(f[d])||e.parents(f[d]).length)return;b.prototype.closeOthers(c.target)}}),a(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!a.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var b in this.options)b in this.defaults?this.containerOptions[b]=this.options[b]:this.formOptions[b]=this.options[b]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var a;return this.containerDataName&&(a=this.$element.data(this.containerDataName))?a:a=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(b){this.$element.addClass("editable-open"),b!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=a("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(a){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:a});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",a||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(a){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(a)},setPosition:function(){},save:function(a,b){this.$element.triggerHandler("save",b),this.hide("save")},option:function(a,b){this.options[a]=b,a in this.containerOptions?(this.containerOptions[a]=b,this.setContainerOption(a,b)):(this.formOptions[a]=b,this.$form&&this.$form.editableform("option",a,b))},setContainerOption:function(a,b){this.call("option",a,b)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(b){a(".editable-open").each(function(c,d){if(d!==b&&!a(d).find(b).length){var e=a(d),f=e.data("editableContainer");f&&("cancel"===f.options.onblur?e.data("editableContainer").hide("onblur"):"submit"===f.options.onblur&&e.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},a.fn.editableContainer=function(d){var e=arguments;return this.each(function(){var f=a(this),g="editableContainer",h=f.data(g),i="object"==typeof d&&d,j="inline"===i.mode?c:b;h||f.data(g,h=new j(this,i)),"string"==typeof d&&h[d].apply(h,Array.prototype.slice.call(e,1))})},a.fn.editableContainer.Popup=b,a.fn.editableContainer.Inline=c,a.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}}(window.jQuery),function(a){"use strict";a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.editable.defaults,c,a.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!a.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};b.prototype={constructor:b,init:function(){var b,c=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=a.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(a.trim(this.$element.html())),c=!0):(this.options.value=a.fn.editableutils.tryParseJson(this.options.value,!0),"string"==typeof this.options.value?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",a.proxy(function(a){if(this.options.disabled||a.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var b="click"!==this.options.toggle;this.toggle(b)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":b=!0;break;case"auto":b=!a.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!c;break;default:b=!1}a.when(b?this.render():!0).then(a.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var b=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",b,a.proxy(function(b){var c=a(b.target);c.data("editable")||(c.hasClass(this.options.emptyclass)&&c.empty(),c.editable(this.options).trigger(b))},this))},render:function(a){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,a):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,a):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(b,c){return b&&"object"==typeof b?void a.each(b,a.proxy(function(b,c){this.option(a.trim(b),c)},this)):(this.options[b]=c,"disabled"===b?c?this.disable():this.enable():("value"===b&&this.setValue(c),this.container&&this.container.option(b,c),void(this.input.option&&this.input.option(b,c))))},handleEmpty:function(b){this.options.display!==!1&&(void 0!==b?this.isEmpty=b:"function"==typeof this.input.isEmpty?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=""===a.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(b){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var c=a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(c),this.$element.on("save.internal",a.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(b)}},hide:function(){this.container&&this.container.hide()},toggle:function(a){this.container&&this.container.tip().is(":visible")?this.hide():this.show(a)},save:function(a,b){if(this.options.unsavedclass){var c=!1;c=c||"function"==typeof this.options.url,c=c||this.options.display===!1,c=c||void 0!==b.response,c=c||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(b.newValue),c?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var d=this.$element,e=d.css("background-color");d.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===e&&(e=""),d.css("background-color",e),d.addClass("editable-bg-transition"),setTimeout(function(){d.removeClass("editable-bg-transition")},1700)},10)}this.setValue(b.newValue,!1,b.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(b,c,d){c?this.value=this.input.str2value(b):this.value=b,this.container&&this.container.option("value",this.value),a.when(this.render(d)).then(a.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},a.fn.editable=function(c){var d={},e=arguments,f="editable";switch(c){case"validate":return this.each(function(){var b,c=a(this),e=c.data(f);e&&(b=e.validate())&&(d[e.options.name]=b)}),d;case"getValue":return 2===arguments.length&&arguments[1]===!0?d=this.eq(0).data(f).value:this.each(function(){var b=a(this),c=b.data(f);c&&void 0!==c.value&&null!==c.value&&(d[c.options.name]=c.input.value2submit(c.value))}),d;case"submit":var g=arguments[1]||{},h=this,i=this.editable("validate");if(a.isEmptyObject(i)){var j={};if(1===h.length){var k=h.data("editable"),l={name:k.options.name||"",value:k.input.value2submit(k.value),pk:"function"==typeof k.options.pk?k.options.pk.call(k.options.scope):k.options.pk};"function"==typeof k.options.params?l=k.options.params.call(k.options.scope,l):(k.options.params=a.fn.editableutils.tryParseJson(k.options.params,!0),a.extend(l,k.options.params)),j={url:k.options.url,data:l,type:"POST"},g.success=g.success||k.options.success,g.error=g.error||k.options.error}else{var m=this.editable("getValue");j={url:g.url,data:m,type:"POST"}}j.success="function"==typeof g.success?function(a){g.success.call(h,a,g)}:a.noop,j.error="function"==typeof g.error?function(){g.error.apply(h,arguments)}:a.noop,g.ajaxOptions&&a.extend(j,g.ajaxOptions),g.data&&a.extend(j.data,g.data),a.ajax(j)}else"function"==typeof g.error&&g.error.call(h,i);return this}return this.each(function(){var d=a(this),g=d.data(f),h="object"==typeof c&&c;return h&&h.selector?void(g=new b(this,h)):(g||d.data(f,g=new b(this,h)),void("string"==typeof c&&g[c].apply(g,Array.prototype.slice.call(e,1))))})},a.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(a){"use strict";a.fn.editabletypes={};var b=function(){};b.prototype={init:function(b,c,d){this.type=b,this.options=a.extend({},d,c)},prerender:function(){this.$tpl=a(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(b,c){a(c)[this.options.escape?"text":"html"](a.trim(b))},html2value:function(b){return a("<div>").html(b).text()},value2str:function(a){return a},str2value:function(a){return a},value2submit:function(a){return a},value2input:function(a){this.$input.val(a)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(b){return a("<div>").text(b).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(a){void 0!==this.options[a]&&null!==this.options[a]&&this.$input.attr(a,this.options[a])},option:function(a,b){this.options[a]=b}},b.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},a.extend(a.fn.editabletypes,{abstractinput:b})}(window.jQuery),function(a){"use strict";var b=function(a){};
a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){var b=a.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),b.resolve()},function(){this.error=this.options.sourceError,b.resolve()}),b.promise()},html2value:function(a){return null},value2html:function(b,c,d,e){var f=a.Deferred(),g=function(){"function"==typeof d?d.call(c,b,this.sourceData,e):this.value2htmlFinal(b,c),f.resolve()};return null===b?g.call(this):this.onSourceReady(g,function(){f.resolve()}),f.promise()},onSourceReady:function(b,c){var d;if(a.isFunction(this.options.source)?(d=this.options.source.call(this.options.scope),this.sourceData=null):d=this.options.source,this.options.sourceCache&&a.isArray(this.sourceData))return void b.call(this);try{d=a.fn.editableutils.tryParseJson(d,!1)}catch(e){return void c.call(this)}if("string"==typeof d){if(this.options.sourceCache){var f,g=d;if(a(document).data(g)||a(document).data(g,{}),f=a(document).data(g),f.loading===!1&&f.sourceData)return this.sourceData=f.sourceData,this.doPrepend(),void b.call(this);if(f.loading===!0)return f.callbacks.push(a.proxy(function(){this.sourceData=f.sourceData,this.doPrepend(),b.call(this)},this)),void f.err_callbacks.push(a.proxy(c,this));f.loading=!0,f.callbacks=[],f.err_callbacks=[]}var h=a.extend({url:d,type:"get",cache:!1,dataType:"json",success:a.proxy(function(d){f&&(f.loading=!1),this.sourceData=this.makeArray(d),a.isArray(this.sourceData)?(f&&(f.sourceData=this.sourceData,a.each(f.callbacks,function(){this.call()})),this.doPrepend(),b.call(this)):(c.call(this),f&&a.each(f.err_callbacks,function(){this.call()}))},this),error:a.proxy(function(){c.call(this),f&&(f.loading=!1,a.each(f.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);a.ajax(h)}else this.sourceData=this.makeArray(d),a.isArray(this.sourceData)?(this.doPrepend(),b.call(this)):c.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(a.isArray(this.prependData)||(a.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),a.isArray(this.prependData)&&a.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(a,b){},makeArray:function(b){var c,d,e,f,g=[];if(!b||"string"==typeof b)return null;if(a.isArray(b)){f=function(a,b){return d={value:a,text:b},c++>=2?!1:void 0};for(var h=0;h<b.length;h++)e=b[h],"object"==typeof e?(c=0,a.each(e,f),1===c?g.push(d):c>1&&(e.children&&(e.children=this.makeArray(e.children)),g.push(e))):g.push({value:e,text:e})}else a.each(b,function(a,b){g.push({value:a,text:b})});return g},option:function(a,b){this.options[a]=b,"source"===a&&(this.sourceData=null),"prepend"===a&&(this.prependData=null)}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),a.fn.editabletypes.list=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("text",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=a('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(b){if(!~a.inArray(b.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var c=this;this.t=setTimeout(function(){c.toggleClear(b)},100)}},this)).parent().css("position","relative"),this.$clear.click(a.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(a){if(this.$clear){var b=this.$input.val().length,c=this.$clear.is(":visible");b&&!c&&this.$clear.show(),!b&&c&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),a.fn.editabletypes.text=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("textarea",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(b){b.ctrlKey&&13===b.which&&a(this).closest("form").submit()})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),a.fn.editabletypes.textarea=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("select",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list),a.extend(b.prototype,{renderList:function(){this.$input.empty();var b=function(c,d){var e;if(a.isArray(d))for(var f=0;f<d.length;f++)e={},d[f].children?(e.label=d[f].text,c.append(b(a("<optgroup>",e),d[f].children))):(e.value=d[f].value,d[f].disabled&&(e.disabled=!0),c.append(a("<option>",e).text(d[f].text)));return c};b(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(b){13===b.which&&a(this).closest("form").submit()})},value2htmlFinal:function(b,c){var d="",e=a.fn.editableutils.itemsByValue(b,this.sourceData);e.length&&(d=e[0].text),a.fn.editabletypes.abstractinput.prototype.value2html.call(this,d,c)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}}),b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),a.fn.editabletypes.select=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("checklist",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list),a.extend(b.prototype,{renderList:function(){var b;if(this.$tpl.empty(),a.isArray(this.sourceData)){for(var c=0;c<this.sourceData.length;c++)b=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[c].value})).append(a("<span>").text(" "+this.sourceData[c].text)),a("<div>").append(b).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(b){return a.isArray(b)?b.sort().join(a.trim(this.options.separator)):""},str2value:function(b){var c,d=null;return"string"==typeof b&&b.length?(c=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*"),d=b.split(c)):d=a.isArray(b)?b:[b],d},value2input:function(b){this.$input.prop("checked",!1),a.isArray(b)&&b.length&&this.$input.each(function(c,d){var e=a(d);a.each(b,function(a,b){e.val()==b&&e.prop("checked",!0)})})},input2value:function(){var b=[];return this.$input.filter(":checked").each(function(c,d){b.push(a(d).val())}),b},value2htmlFinal:function(b,c){var d=[],e=a.fn.editableutils.itemsByValue(b,this.sourceData),f=this.options.escape;e.length?(a.each(e,function(b,c){var e=f?a.fn.editableutils.escape(c.text):c.text;d.push(e)}),a(c).html(d.join("<br>"))):a(c).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(b){13===b.which&&a(this).closest("form").submit()})}}),b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),a.fn.editabletypes.checklist=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("password",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),a.extend(b.prototype,{value2html:function(b,c){b?a(c).text("[hidden]"):a(c).empty()},html2value:function(a){return null}}),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),a.fn.editabletypes.password=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("email",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),a.fn.editabletypes.email=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("url",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),a.fn.editabletypes.url=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("tel",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),a.fn.editabletypes.tel=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("number",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),a.extend(b.prototype,{render:function(){b.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),a.fn.editabletypes.number=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("range",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.number),a.extend(b.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}}),b.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),a.fn.editabletypes.range=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("time",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.setClass()}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),a.fn.editabletypes.time=b}(window.jQuery),function(a){"use strict";var b=function(c){if(this.init("select2",c,b.defaults),c.select2=c.select2||{},this.sourceData=null,c.placeholder&&(c.select2.placeholder=c.placeholder),!c.select2.tags&&c.source){var d=c.source;a.isFunction(c.source)&&(d=c.source.call(c.scope)),"string"==typeof d?(c.select2.ajax=c.select2.ajax||{},c.select2.ajax.data||(c.select2.ajax.data=function(a){return{query:a}}),c.select2.ajax.results||(c.select2.ajax.results=function(a){return{results:a}}),c.select2.ajax.url=d):(this.sourceData=this.convertSource(d),c.select2.data=this.sourceData)}if(this.options.select2=a.extend({},b.defaults.select2,c.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var e=this.idFunc||"id";this.idFunc=function(a){return a[e]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(a){return a.text})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",a.proxy(function(a){this.sourceData=a.items.results},this)),this.isMultiple&&this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})},value2html:function(c,d){var e,f="",g=this;this.options.select2.tags?e=c:this.sourceData&&(e=a.fn.editableutils.itemsByValue(c,this.sourceData,this.idFunc)),a.isArray(e)?(f=[],a.each(e,function(a,b){f.push(b&&"object"==typeof b?g.formatSelection(b):b)})):e&&(f=g.formatSelection(e)),f=a.isArray(f)?f.join(this.options.viewseparator):f,b.superclass.value2html.call(this,f,d)},html2value:function(a){return this.options.select2.tags?this.str2value(a,this.options.viewseparator):null},value2input:function(b){if(a.isArray(b)&&(b=b.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(b).trigger("change",!0):(this.$input.val(b),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var c=this.options.select2.id,d=this.options.select2.formatSelection;if(!c&&!d){var e=a(this.options.scope);if(!e.data("editable").isEmpty){var f={id:b,text:e.text()};this.$input.select2("data",f)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(b,c){if("string"!=typeof b||!this.isMultiple)return b;c=c||this.getSeparator();var d,e,f;if(null===b||b.length<1)return null;for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d},autosubmit:function(){this.$input.on("change",function(b,c){c||a(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||a.fn.select2.defaults.separator},convertSource:function(b){if(a.isArray(b)&&b.length&&void 0!==b[0].value)for(var c=0;c<b.length;c++)void 0!==b[c].value&&(b[c].id=b[c].value,delete b[c].value);return b},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),a.fn.editabletypes.select2=b}(window.jQuery),function(a){var b=function(b,c){return this.$element=a(b),this.$element.is("input")?(this.options=a.extend({},a.fn.combodate.defaults,c,this.$element.data()),void this.init()):void a.error("Combodate should be applied to INPUT element")};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=a('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",a.proxy(function(b){this.$element.val(this.getValue()).change(),this.options.smartDays&&(a(b.target).is(".month")||a(b.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var b=this.options.template;return a.each(this.map,function(a,c){c=c[0];var d=new RegExp(c+"+"),e=c.length>1?c.substring(1,2):c;b=b.replace(d,"{"+e+"}")}),b=b.replace(/ /g,"&nbsp;"),a.each(this.map,function(a,c){c=c[0];var d=c.length>1?c.substring(1,2):c;b=b.replace("{"+d+"}",'<select class="'+a+'"></select>')}),b},initCombos:function(){for(var a in this.map){var b=this.$widget.find("."+a);this["$"+a]=b.length?b:null,this.fillCombo(a)}},fillCombo:function(a){var b=this["$"+a];if(b){var c="fill"+a.charAt(0).toUpperCase()+a.slice(1),d=this[c](),e=b.val();b.empty();for(var f=0;f<d.length;f++)b.append('<option value="'+d[f][0]+'">'+d[f][1]+"</option>");b.val(e)}},fillCommon:function(a){var b,c=[];if("name"===this.options.firstItem){b=moment.relativeTime||moment.langData()._relativeTime;var d="function"==typeof b[a]?b[a](1,!0,a,!1):b[a];d=d.split(" ").reverse()[0],c.push(["",d])}else"empty"===this.options.firstItem&&c.push(["",""]);return c},fillDay:function(){var a,b,c=this.fillCommon("d"),d=-1!==this.options.template.indexOf("DD"),e=31;if(this.options.smartDays&&this.$month&&this.$year){var f=parseInt(this.$month.val(),10),g=parseInt(this.$year.val(),10);isNaN(f)||isNaN(g)||(e=moment([g,f]).daysInMonth())}for(b=1;e>=b;b++)a=d?this.leadZero(b):b,c.push([b,a]);return c},fillMonth:function(){var a,b,c=this.fillCommon("M"),d=-1!==this.options.template.indexOf("MMMM"),e=-1!==this.options.template.indexOf("MMM"),f=-1!==this.options.template.indexOf("MM");for(b=0;11>=b;b++)a=d?moment().date(1).month(b).format("MMMM"):e?moment().date(1).month(b).format("MMM"):f?this.leadZero(b+1):b+1,c.push([b,a]);return c},fillYear:function(){var a,b,c=[],d=-1!==this.options.template.indexOf("YYYY");for(b=this.options.maxYear;b>=this.options.minYear;b--)a=d?b:(b+"").substring(2),c[this.options.yearDescending?"push":"unshift"]([b,a]);return c=this.fillCommon("y").concat(c)},fillHour:function(){var a,b,c=this.fillCommon("h"),d=-1!==this.options.template.indexOf("h"),e=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),f=d?1:0,g=d?12:23;for(b=f;g>=b;b++)a=e?this.leadZero(b):b,c.push([b,a]);return c},fillMinute:function(){var a,b,c=this.fillCommon("m"),d=-1!==this.options.template.indexOf("mm");for(b=0;59>=b;b+=this.options.minuteStep)a=d?this.leadZero(b):b,c.push([b,a]);return c},fillSecond:function(){var a,b,c=this.fillCommon("s"),d=-1!==this.options.template.indexOf("ss");for(b=0;59>=b;b+=this.options.secondStep)a=d?this.leadZero(b):b,c.push([b,a]);return c},fillAmpm:function(){var a=-1!==this.options.template.indexOf("a"),b=(-1!==this.options.template.indexOf("A"),[["am",a?"am":"AM"],["pm",a?"pm":"PM"]]);return b},getValue:function(b){var c,d={},e=this,f=!1;return a.each(this.map,function(a,b){if("ampm"!==a){var c="day"===a?1:0;return d[a]=e["$"+a]?parseInt(e["$"+a].val(),10):c,isNaN(d[a])?(f=!0,!1):void 0}}),f?"":(this.$ampm&&(12===d.hour?d.hour="am"===this.$ampm.val()?0:12:d.hour="am"===this.$ampm.val()?d.hour:d.hour+12),c=moment([d.year,d.month,d.day,d.hour,d.minute,d.second]),this.highlight(c),b=void 0===b?this.options.format:b,null===b?c.isValid()?c:null:c.isValid()?c.format(b):"")},setValue:function(b){function c(b,c){var d={};return b.children("option").each(function(b,e){var f,g=a(e).attr("value");""!==g&&(f=Math.abs(g-c),("undefined"==typeof d.distance||f<d.distance)&&(d={value:g,distance:f}))}),d.value}if(b){var d="string"==typeof b?moment(b,this.options.format):moment(b),e=this,f={};d.isValid()&&(a.each(this.map,function(a,b){"ampm"!==a&&(f[a]=d[b[1]]())}),this.$ampm&&(f.hour>=12?(f.ampm="pm",f.hour>12&&(f.hour-=12)):(f.ampm="am",0===f.hour&&(f.hour=12))),a.each(f,function(a,b){e["$"+a]&&("minute"===a&&e.options.minuteStep>1&&e.options.roundTime&&(b=c(e["$"+a],b)),"second"===a&&e.options.secondStep>1&&e.options.roundTime&&(b=c(e["$"+a],b)),e["$"+a].val(b))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(d.format(this.options.format)).change())}},highlight:function(a){a.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(a){return 9>=a?"0"+a:a},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},a.fn.combodate=function(c){var d,e=Array.apply(null,arguments);return e.shift(),"getValue"===c&&this.length&&(d=this.eq(0).data("combodate"))?d.getValue.apply(d,e):this.each(function(){var d=a(this),f=d.data("combodate"),g="object"==typeof c&&c;f||d.data("combodate",f=new b(this,g)),"string"==typeof c&&"function"==typeof f[c]&&f[c].apply(f,e)})},a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(a){"use strict";var b=function(c){this.init("combodate",c,b.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),c.combodate=a.fn.editableutils.tryParseJson(c.combodate,!0),this.options.combodate=a.extend({},b.defaults.combodate,c.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===a.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(a,c){var d=a?a.format(this.options.viewformat):"";b.superclass.value2html.call(this,d,c)},html2value:function(a){return a?moment(a,this.options.viewformat):null},value2str:function(a){return a?a.format(this.options.format):""},str2value:function(a){return a?moment(a,this.options.format):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.combodate("setValue",a)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),a.fn.editabletypes.combodate=b}(window.jQuery),function(a){"use strict";var b=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){b.apply(this);var c=null===this.input.options.inputclass||this.input.options.inputclass===!1,d="input-sm",e="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~a.inArray(this.input.type,e)&&(this.input.$input.addClass("form-control"),c&&(this.input.options.inputclass=d,this.input.$input.addClass(d)));for(var f=this.$form.find(".editable-buttons"),g=c?[d]:this.input.options.inputclass.split(" "),h=0;h<g.length;h++)"input-lg"===g[h].toLowerCase()&&f.find("button").removeClass("btn-sm").addClass("btn-lg")}}),a.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',a.fn.editableform.errorGroupClass="has-error",a.fn.editableform.errorBlockClass=null,a.fn.editableform.engine="bs3"}(window.jQuery),function(a){"use strict";a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:a.fn.popover.Constructor.DEFAULTS,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var b;this.$element.data("template")&&(b=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),b&&this.$element.data("template",b)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(a,b){this.container().options[a]=b},setPosition:function(){(function(){var a=this.tip(),b="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,d=c.test(b);d&&(b=b.replace(c,"")||"top");var e=this.getPosition(),f=a[0].offsetWidth,g=a[0].offsetHeight;if(d){var h=this.$element.parent(),i=b,j=document.documentElement.scrollTop||document.body.scrollTop,k="body"==this.options.container?window.innerWidth:h.outerWidth(),l="body"==this.options.container?window.innerHeight:h.outerHeight(),m="body"==this.options.container?0:h.offset().left;b="bottom"==b&&e.top+e.height+g-j>l?"top":"top"==b&&e.top-j-g<0?"bottom":"right"==b&&e.right+f>k?"left":"left"==b&&e.left-f<m?"right":b,a.removeClass(i).addClass(b)}var n=this.getCalculatedOffset(b,e,f,g);this.applyPlacement(n,b)}).call(this.container())}})}(window.jQuery),function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}function c(b,c){var d,e=a(b).data(),f={},g=new RegExp("^"+c.toLowerCase()+"([A-Z])"),c=new RegExp("^"+c.toLowerCase());for(var h in e)c.test(h)&&(d=h.replace(g,function(a,b){return b.toLowerCase()}),f[d]=e[h]);return f}function d(b){var c={};if(k[b]||(b=b.split("-")[0],k[b])){var d=k[b];return a.each(j,function(a,b){b in d&&(c[b]=d[b])}),c}}var e=function(b,c){this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(l.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};e.prototype={constructor:e,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(k[d]||(d=d.split("-")[0],k[d]||(d=i.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=l.parseFormat(c.format);c.startDate!==-(1/0)&&(c.startDate=l.parseDate(c.startDate,e,c.language)),c.endDate!==1/0&&(c.endDate=l.parseDate(c.endDate,e,c.language)),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.on(c)},_unapplyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.off(c)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.date,e=new Date(d.getTime()+6e4*d.getTimezoneOffset());this.element.trigger({type:b,date:e,format:a.proxy(function(a){var b=a||this.o.format;return l.formatDate(d,b,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),a&&a.preventDefault(),this._trigger("show")},hide:function(a){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a,this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){return void 0===a&&(a=this.o.format),l.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:c.top+d,left:c.left,zIndex:b})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=l.parseDate(a,this.o.format,this.o.language),b&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+k[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+k[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),g=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()==d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()==d&&b.getUTCMonth()>e)&&c.push("new"),this.o.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&c.push("today"),f&&b.valueOf()==f&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!=a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var c,d=new Date(this.viewDate),e=d.getUTCFullYear(),f=d.getUTCMonth(),g=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),i=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,j=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;
this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(k[this.o.language].months[f]+" "+e),this.picker.find("tfoot th.today").text(k[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(k[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var m=b(e,f-1,28,0,0,0,0),n=l.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(n),m.setUTCDate(n-(m.getUTCDay()-this.o.weekStart+7)%7);var o=new Date(m);o.setUTCDate(o.getUTCDate()+42),o=o.valueOf();for(var p,q=[];m.valueOf()<o;){if(m.getUTCDay()==this.o.weekStart&&(q.push("<tr>"),this.o.calendarWeeks)){var r=new Date(+m+(this.o.weekStart-m.getUTCDay()-7)%7*864e5),s=new Date(+r+(11-r.getUTCDay())%7*864e5),t=new Date(+(t=b(s.getUTCFullYear(),0,1))+(11-t.getUTCDay())%7*864e5),u=(s-t)/864e5/7+1;q.push('<td class="cw">'+u+"</td>")}p=this.getClassNames(m),p.push("day");var v=this.o.beforeShowDay(m);void 0===v?v={}:"boolean"==typeof v?v={enabled:v}:"string"==typeof v&&(v={classes:v}),v.enabled===!1&&p.push("disabled"),v.classes&&(p=p.concat(v.classes.split(/\s+/))),v.tooltip&&(c=v.tooltip),p=a.unique(p),q.push('<td class="'+p.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+m.getUTCDate()+"</td>"),m.getUTCDay()==this.o.weekEnd&&q.push("</tr>"),m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(q.join(""));var w=this.date&&this.date.getUTCFullYear(),x=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");w&&w==e&&x.eq(this.date.getUTCMonth()).addClass("active"),(g>e||e>i)&&x.addClass("disabled"),e==g&&x.slice(0,h).addClass("disabled"),e==i&&x.slice(j+1).addClass("disabled"),q="",e=10*parseInt(e/10,10);var y=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");e-=1;for(var z=-1;11>z;z++)q+='<span class="year'+(-1==z?" old":10==z?" new":"")+(w==e?" active":"")+(g>e||e>i?" disabled":"")+'">'+e+"</span>",e+=1;y.html(q)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(c){c.preventDefault();var d=a(c.target).closest("span, td, th");if(1==d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var e=l.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,e);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,e)}this.fill();break;case"today":var f=new Date;f=b(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),this.showMode(-2);var g="linked"==this.o.todayBtn?null:"view";this._setDate(f,g);break;case"clear":var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){if(this.viewDate.setUTCDate(1),d.is(".month")){var i=1,j=d.parent().find("span").index(d),k=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(j),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}else{var k=parseInt(d.text(),10)||0,i=1,j=0;this.viewDate.setUTCFullYear(k),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var i=parseInt(d.text(),10)||1,k=this.viewDate.getUTCFullYear(),j=this.viewDate.getUTCMonth();d.is(".old")?0===j?(j=11,k-=1):j-=1:d.is(".new")&&(11==j?(j=0,k+=1):j+=1),this._setDate(b(k,j,i,0,0,0,0))}}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a)),b&&"view"!=b||(this.viewDate=new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),!this.o.autoclose||b&&"date"!=b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide(),a.preventDefault();break;case 9:this.hide()}if(e){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+l.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var f=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};f.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.date}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!=e){if(d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates()}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var g=a.fn.datepicker,h=a.fn.datepicker=function(b){var g=Array.apply(null,arguments);g.shift();var h;return this.each(function(){var j=a(this),k=j.data("datepicker"),l="object"==typeof b&&b;if(!k){var m=c(this,"date"),n=a.extend({},i,m,l),o=d(n.language),p=a.extend({},i,o,m,l);if(j.is(".input-daterange")||p.inputs){var q={inputs:p.inputs||j.find("input").toArray()};j.data("datepicker",k=new f(this,a.extend(p,q)))}else j.data("datepicker",k=new e(this,p))}return"string"==typeof b&&"function"==typeof k[b]&&(h=k[b].apply(k,g),void 0!==h)?!1:void 0}),void 0!==h?h:this},i=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},j=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=e;var k=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},l={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,l.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(c,d,f){if(c instanceof Date)return c;if("string"==typeof d&&(d=l.parseFormat(d)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(c)){var g,h,i=/([\-+]\d+)([dmwy])/,j=c.match(/([\-+]\d+)([dmwy])/g);c=new Date;for(var m=0;m<j.length;m++)switch(g=i.exec(j[m]),h=parseInt(g[1]),g[2]){case"d":c.setUTCDate(c.getUTCDate()+h);break;case"m":c=e.prototype.moveMonth.call(e.prototype,c,h);break;case"w":c.setUTCDate(c.getUTCDate()+7*h);break;case"y":c=e.prototype.moveYear.call(e.prototype,c,h)}return b(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),0,0,0)}var n,o,g,j=c&&c.match(this.nonpunctuation)||[],c=new Date,p={},q=["yyyy","yy","M","MM","m","mm","d","dd"],r={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};r.M=r.MM=r.mm=r.m,r.dd=r.d,c=b(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);var s=d.parts.slice();if(j.length!=s.length&&(s=a(s).filter(function(b,c){return-1!==a.inArray(c,q)}).toArray()),j.length==s.length){for(var m=0,t=s.length;t>m;m++){if(n=parseInt(j[m],10),g=s[m],isNaN(n))switch(g){case"MM":o=a(k[f].months).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[f].months)+1;break;case"M":o=a(k[f].monthsShort).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[f].monthsShort)+1}p[g]=n}for(var u,m=0;m<q.length;m++)u=q[m],u in p&&!isNaN(p[u])&&r[u](c,p[u])}return c},formatDate:function(b,c,d){"string"==typeof c&&(c=l.parseFormat(c));var e={d:b.getUTCDate(),D:k[d].daysShort[b.getUTCDay()],DD:k[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:k[d].monthsShort[b.getUTCMonth()],MM:k[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m;for(var b=[],f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};l.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+l.headTemplate+"<tbody></tbody>"+l.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=l,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=g,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),h.call(c,"show"))}),a(function(){h.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(a){"use strict";a.fn.bdatepicker=a.fn.datepicker.noConflict(),a.fn.datepicker||(a.fn.datepicker=a.fn.bdatepicker);var b=function(a){this.init("date",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{initPicker:function(b,c){this.options.viewformat||(this.options.viewformat=this.options.format),b.datepicker=a.fn.editableutils.tryParseJson(b.datepicker,!0),this.options.datepicker=a.extend({},c.datepicker,b.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=a.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault(),a.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,c){var d=a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html.call(this,d,c)},html2value:function(a){return this.parseDate(a,this.parsedViewFormat)},value2str:function(a){return a?this.dpg.formatDate(a,this.parsedFormat,this.options.datepicker.language):""},str2value:function(a){return this.parseDate(a,this.parsedFormat)},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.bdatepicker("update",a)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(b){if(!a(b.currentTarget).is(".old")&&!a(b.currentTarget).is(".new")){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)}})},parseDate:function(a,b){var c,d=null;return a&&(d=this.dpg.parseDate(a,b,this.options.datepicker.language),"string"==typeof a&&(c=this.dpg.formatDate(d,b,this.options.datepicker.language),a!==c&&(d=null))),d}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),a.fn.editabletypes.date=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("datefield",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.date),a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(a){this.$input.val(a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),b.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),a.fn.editabletypes.datefield=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("datetime",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{initPicker:function(b,c){this.options.viewformat||(this.options.viewformat=this.options.format),b.datetimepicker=a.fn.editableutils.tryParseJson(b.datetimepicker,!0),this.options.datetimepicker=a.extend({},c.datetimepicker,b.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=a.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(b){var c=a(this).closest("form").parent();setTimeout(function(){c.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault(),a.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,c){var d=a?this.dpg.formatDate(this.toUTC(a),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return c?void b.superclass.value2html.call(this,d,c):d},html2value:function(a){var b=this.parseDate(a,this.parsedViewFormat);return b?this.fromUTC(b):null},value2str:function(a){return a?this.dpg.formatDate(this.toUTC(a),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(a){var b=this.parseDate(a,this.parsedFormat);return b?this.fromUTC(b):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){a&&this.$input.data("datetimepicker").setDate(a)},input2value:function(){var a=this.$input.data("datetimepicker");return a.date?a.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(b){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},toUTC:function(a){return a?new Date(a.valueOf()-6e4*a.getTimezoneOffset()):a},fromUTC:function(a){return a?new Date(a.valueOf()+6e4*a.getTimezoneOffset()):a},parseDate:function(a,b){var c,d=null;return a&&(d=this.dpg.parseDate(a,b,this.options.datetimepicker.language,this.options.formatType),"string"==typeof a&&(c=this.dpg.formatDate(d,b,this.options.datetimepicker.language,this.options.formatType),a!==c&&(d=null))),d}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),a.fn.editabletypes.datetime=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("datetimefield",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.datetime),a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(a){this.$input.val(this.value2html(a)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),b.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),a.fn.editabletypes.datetimefield=b}(window.jQuery),angular.module("ohanaApp").controller("ExpenseDetailsCtrl",["$firebaseObject","$scope","$route","userService","$routeParams","commonServices","expenseservice","$location","$uibModal","$log","$document","FileUploader",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){b.EditMode=" - EDIT mode",b.checkeditexist(),b.vimageurl=[],b.isdisabled=!1,b.PayStatusLogList=[],b.PayStatusLogList.length=0,b.vImageList=[],b.vImageList.length=0;for(var a=0;a<b.vImageList.length;a++)null!=b.vImageList[a]&&delete b.vImageList[a].$$hashKey;b.expense=g.getEditExpenseData(e.BillId),b.expense.$loaded().then(function(){angular.forEach(b.expense,function(a){var c=(document.createElement("img"),firebase.storage(),firebase.storage().ref());switch(b.paystat=a.PaymentStatus,b.expenseemail=a.email,b.OverageDisable=!1,"Over Age"==a.PaymentStatus?(swal("Overage Expense - Not editable! ","","error"),b.OverageDisable=!0,b.EditMode=" - READ-ONLY"):(b.OverageDisable=!1,b.EditMode=" - EDIT "),b.useremail!=b.expenseemail&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0),b.paystatuslist=[],b.userRole){case"Participant":case"Volunteer":if("Pending"==a.PaymentStatus||"Submitted"==a.PaymentStatus||"Returned"==a.PaymentStatus||"Paid"==a.PaymentStatus||"Paid"==a.PaymentStatus||"Over Age"==a.PaymentStatus){b.OverageDisable=!0,b.EditMode=" - READ-ONLY mode";break}("Edit"==a.PaymentStatus||"ReSubmit"==a.PaymentStatus)&&(b.OverageDisable=!1,b.EditMode=" - EDIT mode");break;case"Chapter Lead":("Pending"==a.PaymentStatus||"Submitted"==a.PaymentStatus)&&(b.paystatuslist=[{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Over Age",value:"Over Age"}]),("Returned"==a.PaymentStatus||"Resubmit"==a.PaymentStatus)&&(b.paystatuslist=[{name:"Returned",value:"Returned"},{name:"Resubmit",value:"Resubmit"},{name:"Over Age",value:"Over Age"}]),b.useremail==b.expenseemail||"Pending"!=a.PaymentStatus&&"Returned"!=a.PaymentStatus||(b.EditMode=" - PAYMENT STATUS UPDATE ONLY",b.OverageDisable=!0),(b.useremail==b.expenseemail&&"Edit"==a.PaymentStatus||"Returned"==a.PaymentStatus)&&(b.EditMode=" - EDIT mode",b.OverageDisable=!1),b.useremail==b.expenseemail&&"Submitted"==a.PaymentStatus&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0),("Paid"==a.PaymentStatus||"Over Age"==a.PaymentStatus)&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0);break;case"National Staff":("Submitted"==a.PaymentStatus||"Returned"==a.PaymentStatus)&&(b.paystatuslist=[{name:"Submitted",value:"Submitted"},{name:"Returned",value:"Returned"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}]),b.useremail!=b.expenseemail&&"Submitted"==a.PaymentStatus&&(b.EditMode=" - PAYMENT STATUS UPDATE ONLY",b.OverageDisable=!0),b.useremail!=b.expenseemail||"Edit"!=a.PaymentStatus&&"Returned"!=a.PaymentStatus||(b.EditMode=" - EDIT mode",b.OverageDisable=!1),b.useremail==b.expenseemail&&"Submitted"==a.PaymentStatus&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0),("Paid"==a.PaymentStatus||"Over Age"==a.PaymentStatus)&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0)}b.vimageurl=a.ImageURL;var d=0;b.LineDetails=[];for(var e=b.LineDetails.length;e>0;e--)b.LineDetails.pop();if(b.TotalLineCost=0,a.Line.length){for(var e=0,f=0;f<a.Line.length;f++)f>1&&(d+=parseFloat(a.Line[f].Amount),b.LineDetails.push({Description:a.Line[f].Description,Amount:parseFloat(a.Line[f].Amount)}));b.TotalLineCost=d,b.$applyAsync()}for(var f=0;f<b.LineDetails.length;f++)null!=b.LineDetails[f]&&delete b.LineDetails[f].$$hashKey;if(a.PaymentLog.length)for(var f=0;f<a.PaymentLog.length;f++)b.PayStatusLogList.push({PayStatus:a.PaymentLog[f].PayStatus,PayStatusBy:a.PaymentLog[f].PayStatusBy,PayStatusDate:a.PaymentLog[f].PayStatusDate,PayRole:a.PaymentLog[f].PayRole,PayStatusDescription:a.PaymentLog[f].PayStatusDescription});if(a.ImageURL){b.vImageList=[];var g="";b.vImageList.length=0;for(var e=0;e<a.ImageURL.length;e++)g=a.ImageURL[e].FileName,c.child(g).getDownloadURL().then(function(a){b.vImageList.push({ID:e,ImageSrc:a,ImageName:g}),b.$applyAsync()})["catch"](function(a){console.log("Image Source url - error",a)})}})})}b.expense={},b.expense=g.expense,b.userRole=d.getRole(),b.userName=d.getUserData(),b.useremail=f.getCurrentUserEmail(),b.formModel={};b.uploader=new l({});if(b.openPaymentStatusLog=function(){b.$modalInstance=i.open({scope:b,templateUrl:"myModalContent.html",size:"lg"})},b.ok=function(){b.$modalInstance.close()},b.cancel=function(){b.$modalInstance.dismiss("cancel")},b.checkeditexist=function(){b.editExpenseList=g.getEditStatusrec();var a=0;b.iseditexist="false",b.editExpenseList.$loaded().then(function(){angular.forEach(b.editExpenseList,function(c){c.email==b.useremail&&"false"==b.iseditexist&&(a+=1,b.iseditexist="true")})})},b.checkeditexist(),b.LineDetails=[],b.LineDetails.length=0,b.LineDetails.length){for(var n=b.LineDetails.length;n>0;n--)b.LineDetails.pop();b.LineDetails.length=0,b.LineDetails=g.LineDetails,b.LineDetails=[{Description:"",Amount:0}]}b.addNew=function(a){b.expenseemail==b.useremail&&b.LineDetails.push({Description:"",Amount:0})},b.remove=function(){var a=[];b.selectedAll=!1,angular.forEach(b.LineDetails,function(b){b.selected||a.push(b)}),b.LineDetails=a},b.checkAll=function(){b.selectedAll?b.selectedAll=!1:b.selectedAll=!0,angular.forEach(b.LineDetails,function(a){a.selected=b.selectedAll})},b.lineAmountChange=function(){var a=0;if(b.LineDetails.length)for(var c=0;c<b.LineDetails.length;c++)a+=parseFloat(b.LineDetails[c].Amount);b.TotalLineCost=a,b.$applyAsync()},b.GoBack=function(){h.path("/expense/viewexpense")},b.viewImage=function(a){window.open(a,"Expense Image - "+e.BillId,"height=600,width=400")},b.removeImage=function(a){var c=b.vimageurl[a].FileName;swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){g.deleteImage(c,b.vimageurl),b.fiximagearray(c)},function(a){"cancel"===a&&swal("Image Delete Cancelled","Your supporting document file is safe","error")})},b.fiximagearray=function(a){var d=[];if(void 0!==b.vimageurl)for(var e=0;e<b.vimageurl.length;e++)b.vimageurl[e].FileName!=a&&d.push(b.vimageurl[e]);b.vimageurl=d,b.updateImageInfo(),m(),c.reload()},b.updateImageInfo=function(){var a={ImageURL:[]},c=0;if(void 0!==b.vimageurl?c=b.vimageurl.length:(b.vimageurl=[],b.vimageurl.length=0),void 0!==b.uploader&&b.uploader.queue.length>0)for(var d=0;d<b.uploader.queue.length;d++)imagefilename="images/"+e.BillId+"_"+b.uploader.queue[d].file.name,b.vimageurl.push({FileName:imagefilename,ID:d+1+c,ImageUrlLocation:""});a.ImageURL=b.vimageurl;var f=firebase.database().ref("expense/").orderByChild("BillId").equalTo(e.BillId);f.on("child_added",function(b){b.val();firebase.database().ref("expense/"+b.key).update(a)})},b.getImageURL=function(c){var d=firebase.database().ref("expense/");b.spaedServ=a(d),b.url=d.once("value").then(function(a){var d=(a.val().foto,firebase.storage().ref());return d.child(c).getDownloadURL().then(function(a){return b.returnurl=a,a})["catch"](function(a){})})},b.deleteexp=function(){var a=e.BillId,a=e.BillId;console.log("Data Delete Request SWAL ",e.BillId),swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){g.deleteExpense(a),swal("Deleted!","Your file has been deleted.","success"),h.path("/expense/viewexpense")},function(a){"cancel"===a&&swal("Cancelled","Your expense is safe","error")})},b.setexpensedata=function(a){var c=b.expense[0].Line[0].Quantity*b.expense[0].Line[0].Rate+b.expense[0].Line[1].Quantity*b.expense[0].Line[1].Rate,d=b.userName.name.first+" "+b.userName.name.last,f=new Date,h="";if(h=f.getHours()>12?f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+(f.getHours()-12)).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" PM":f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" AM","update"==a)switch(b.paystat){case"Resubmit":b.paystat="Pending",b.PayStatusLogList.push({PayStatus:"Pending",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Resending expense with fixes"});break;case"Returned":b.paystat="Submitted",b.PayStatusLogList.push({PayStatus:"Submitted",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Resending expense with fixes"})}else switch(b.userRole){case"Participant":case"Volunteer":b.paystat="Pending",b.PayStatusLogList.push({PayStatus:"Pending",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Saved expense submitted to Chapter Lead"});break;case"Chapter Lead":case"National Staff":b.paystat="Submitted",b.PayStatusLogList.push({PayStatus:"Submitted",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Saved expense submitted to National Staff"})}for(var i=0;i<b.PayStatusLogList.length;i++)null!=b.PayStatusLogList[i]&&delete b.PayStatusLogList[i].$$hashKey;var j={Description:b.expense[0].Description,Amount:c,PaymentStatus:b.paystat,PaymentLog:b.PayStatusLogList,Line:[{ID:"0",Description:b.expense[0].Line[0].Description,Quantity:b.expense[0].Line[0].Quantity,Rate:b.expense[0].Line[0].Rate,Amount:b.expense[0].Line[0].Quantity*b.expense[0].Line[0].Rate},{ID:"1",Description:b.expense[0].Line[1].Description,Quantity:b.expense[0].Line[1].Quantity,Rate:b.expense[0].Line[1].Rate,Amount:b.expense[0].Line[1].Quantity*b.expense[0].Line[1].Rate}],ImageURL:[]},k=0;if(void 0!==b.vimageurl?k=b.vimageurl.length:(b.vimageurl=[],b.vimageurl.length=0),void 0!==b.uploader&&b.uploader.queue.length>0)for(var i=0;i<b.uploader.queue.length;i++)l="images/"+e.BillId+"_"+b.uploader.queue[i].file.name,b.vimageurl.push({FileName:l,ID:i+1+k,ImageUrlLocation:""});j.ImageURL=b.vimageurl;var l="",m=0;if(b.LineDetails.length){for(var n=2,i=0;i<b.LineDetails.length;i++)m=parseFloat(m)+parseFloat(b.LineDetails[i].Amount),j.Line.push({ID:n,Description:b.LineDetails[i].Description,Quantity:1,Rate:1,Amount:parseFloat(b.LineDetails[i].Amount)}),n++;j.Amount=c+m}console.log("Update",j,c);var o="";b.uploader.queue.length>0&&(o=g.SaveImageData(e.BillId,b.uploader.queue));var p=firebase.database().ref("expense/").orderByChild("BillId").equalTo(e.BillId);p.on("child_added",function(a){a.val();firebase.database().ref("expense/"+a.key).update(j)})},b.updateexpense=function(a){var c=(e.BillId,this.dexedit.Line[0].Quantity*this.dexedit.Line[0].Rate+this.dexedit.Line[1].Quantity*this.dexedit.Line[1].Rate),d=0;if(b.LineDetails.length)for(var f=0;f<b.LineDetails.length;f++)d=parseFloat(d)+parseFloat(b.LineDetails[f].Amount);c+=d;var g="",i="",j="",k=0;k=void 0===b.vimageurl?b.uploader.queue.length:b.uploader.queue.length+b.vimageurl.length,
g=void 0===this.dexedit.Description||0==this.dexedit.Description.length?'<tr><td class="swalred ">Description : </td><td class="swalred "><b>':'<tr><td class="swalgreen ">Description : </td><td class="swalgreen "><b>',i=0==k?'<tr><td class="swalred  ">No. of supporting documents Loaded : </td><td class="swalred  "><b> ':'<tr><td class="swalgreen ">No. of supporting documents Loaded : </td><td class="swalgreen  "><b> ',j=0==c?'<tr><td class="swalred ">Expense Amount : </td><td class="swalred "><b>$ ':'<tr><td class="swalgreen ">Expense Amount : </td><td class="swalgreen "><b>$ ',"submit"==a?void 0===this.dexedit.Description||0==this.dexedit.Description.length||0==k||0==c?swal({title:"Required fields Missing",type:"error",html:'<table><tr><td class="swalgreen ">Event Date : </td><td class="swalgreen "><b>'+this.dexedit.eventdate+"</b> </td></tr>"+g+this.dexedit.Description+"</td></tr> "+i+k+"</b></td> </tr> "+j+c+"</b></td></tr></table>"}):swal({title:"Confirm New Expense",text:"Created Expense will be reviewed!",type:"info",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swalgreen "><b>'+this.dexedit.eventdate+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swalgreen "><b>'+this.dexedit.Description+'</td></tr> <tr><td class="swaltdl ">Miles Amount : </td><td class="swalgreen "><b>$ '+Math.round(this.dexedit.Line[0].Quantity*this.dexedit.Line[0].Rate*100)/100+'</b></td></tr><tr><td class="swaltdl ">Trailer Mileage Amount : </td><td class="swalgreen "><b>$ '+Math.round(this.dexedit.Line[1].Quantity*this.dexedit.Line[1].Rate*100)/100+'</b></td></tr><tr><td class="swaltdl ">Other Expense Amount : </td><td class="swalgreen "><b>$ '+Math.round(100*d)/100+'</b></td></tr><tr><td class="swaltdl ">Total Expense Amount : </td><td class="swalgreen "><b>$ '+Math.round(100*c)/100+"</b></td></tr></table>",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create it!"}).then(function(){b.setexpensedata(a),swal("Expense Submitted Successfully!","","success"),h.path("/expense/viewexpense")}):(b.setexpensedata(a),swal("Expense Successfully Saved!","","success"),h.path("/expense/viewexpense"))},b.RecallExpense=function(a,c,d){e.BillId;console.log("Recall Expense request for  ",e.BillId),"true"==b.iseditexist?swal("Recall not allowed! You have 1 Expense in EDIT status","","info"):swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, recall this expense!"}).then(function(){b.UpdatePaymentStatus(a,c,d),swal("Recalled!","Your expense was recalled.","success"),m()},function(a){"cancel"===a&&swal("Cancelled","Your recall request cancelled","info")})},b.UpdatePaymentStatus=function(a,c,d){console.log("Update Payment Status - ",a,c,d);var e=b.userName.name.first+" "+b.userName.name.last,f=new Date,g="";g=f.getHours()>12?f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+(f.getHours()-12)).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" PM":f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" AM",b.PayStatusLogList.push({PayStatus:c,PayStatusBy:e,PayStatusDate:g,PayRole:b.userRole,PayStatusDescription:d});for(var i=0;i<b.PayStatusLogList.length;i++)null!=b.PayStatusLogList[i]&&delete b.PayStatusLogList[i].$$hashKey;var j={PaymentStatus:c,PaymentLog:b.PayStatusLogList},k=firebase.database().ref("expense").orderByChild("BillId").equalTo(a);k.on("child_added",function(a){a.val();firebase.database().ref("expense/"+a.key).update(j),swal("Payment Status Updated Successfully!","","success")}),"Edit"==c?h.path("/expense/expensedetail/"+a):h.path("expense/viewexpense")},m()}]),angular.module("ohanaApp").controller("NewExpenseCtrl",["$scope","userService","expenseservice","commonServices","$location","$q","FileUploader",function(a,b,c,d,e,f,g){a.exp={},a.exp=c.expense,a.exp.Chapter="",a.exp.email=d.getCurrentUserEmail(),a.exp.SubmitDate="",a.exp.SubmitBy="",a.exp.SubmitAddress="",a.exp.Description="",a.exp.PaymentStatus="Pending",a.exp.ImageURL=[],a.exp.Line[0].Quantity=0,a.exp.Line[0].Rate=.25,a.exp.Line[1].Quantity=0,a.exp.Line[1].Rate=.4,a.exp.Line.length=2,a.expenseconfig=[],a.expenseconfig.length=0,a.checkedOverageDays=function(){d.getData("/Config/Expense").then(function(b){if(b){a.expenseconfig=b;for(var c=0;c<a.expenseconfig.length;c++)Date.parse(j)>=Date.parse(a.expenseconfig[c].startdate)&&Date.parse(j)<=Date.parse(a.expenseconfig[c].enddate)&&(a.exp.Line[0].Rate=a.expenseconfig[c].MileRate,a.exp.Line[1].Rate=a.expenseconfig[c].TrailerRate,a.OverAgeDays=a.expenseconfig[c].OverAgeDays);a.$apply(function(){}),console.log("Overage config ",a.OverAgeDays);var d=(new Date).setDate(j.getDate()-a.OverAgeDays);a.dateOptions={"year-format":"'yyyy'","starting-day":1,minDate:d,maxDate:new Date}}})},a.checkedOverageDays();var h=a.uploader=new g({});h.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}}),a.lineamount=0;var i=b.getId();d.getData("/userData/"+i);a.userRole=b.getRole(),a.userName=b.getUserData(),a.userChapter=b.getChapter(),a.useremail=d.getCurrentUserEmail(),a.checkeditexist=function(){var b=0;a.Editlist=c.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.Editlist.$loaded().then(function(){angular.forEach(a.Editlist,function(c){"Edit"==c.PaymentStatus&&c.email==a.useremail&&(b+=1,a.isEditexist="true")})})},a.checkeditexist(),a.fileadded=!1,a.uploadImageFile=function(){var b=document.getElementById("files");b.files.length>0?a.fileadded=!0:a.fileadded=!1,console.log("File status check - ",b.files.length,a.fileadded)},a.LineDetails=[],a.LineDetails.length=0,a.LineDetails=c.LineDetails,a.LineDetails.length&&(a.LineDetails=[],a.LineDetails.length=0,a.LineDetails=c.LineDetails,a.LineDetails=[{Description:"",Amount:0}]),a.addNew=function(b){a.LineDetails.push({Description:"",Amount:0}),console.log(a.LineDetails)},a.remove=function(){var b=[];a.selectedAll=!1,angular.forEach(a.LineDetails,function(a){a.selected||b.push(a)}),a.LineDetails=b},a.checkAll=function(){a.selectedAll?a.selectedAll=!1:a.selectedAll=!0,angular.forEach(a.LineDetails,function(b){b.selected=a.selectedAll})};var j=new Date,k=new Date;void 0!==a.OverAgeDays&&(k=(new Date).setDate(j.getDate()-a.OverAgeDays)),console.log("age days",k,a.OverAgeDays),a.exp.eventdate=j,a.today=function(){a.exp.eventdate=new Date},a.today(),a.dateopen=function(){a.popup.opened=!0},a.clear=function(){a.exp.eventdate=new Date;a.uploader=new g({})},a.dateOptions={"year-format":"'yyyy'","starting-day":1,minDate:k,maxDate:new Date},a.popup={opened:!1},a.formats=["MM/dd/yyyy"],a.format=a.formats[0],a.GoBack=function(){e.path("/expense/viewexpense")},a.ClearFields=function(){a.exp.Chapter="",a.exp.email=d.getCurrentUserEmail(),a.exp.SubmitDate="",a.exp.SubmitBy="",a.exp.SubmitAddress="",a.exp.Description="",a.exp.PaymentStatus="Pending",a.exp.ImageURL=[],a.exp.Line[0].Quantity=0,void 0!==a.expenseconfig?(a.exp.Line[0].Rate=a.expenseconfig.MileRate,a.exp.Line[1].Rate=a.expenseconfig.TrailerRate):(a.exp.Line[0].Rate=.25,a.exp.Line[1].Rate=.4),a.exp.Line[1].Quantity=0,a.exp.Line.length=2,a.LineDetails=[],a.LineDetails.length=0,a.LineDetails=c.LineDetails},a.saveitforlater=function(){var b=a.exp.eventdate,c=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear();if(a.exp.email=d.getCurrentUserEmail(),a.CalculateAmount(),void 0!==a.uploader){console.log("file name",a.uploader.queue.length,a.uploader.queue);for(var f=0;f<a.uploader.queue.length;++f){var g=a.uploader.queue[f].file.name;console.log("file name",g)}}swal({title:"Need more time to submit",text:"Expense will be saved in EDIT status!",type:"info",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swaltdl "><b>'+c+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swaltdl "><b>'+a.exp.Description+'</td></tr> <tr><td class="swaltdl ">Total Expense Amount : </td><td class="swaltdr "><b>$ '+a.exp.Amount+"</b></td></tr></table>",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, SAVE it!"}).then(function(){a.createnewexpense("SAVE"),e.path("/expense/viewexpense")})},a.confirmnewexpense=function(){var b=a.exp.eventdate,c=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear();a.CalculateAmount();for(var d=0;d<a.uploader.queue.length;++d){a.uploader.queue[d].file.name}void 0===a.exp.Description||0==a.exp.Description.length||0==a.uploader.queue.length||0==a.exp.Amount?swal({title:"Required fields Missing",type:"error",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swaltdl "><b>'+c+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swaltdl "><b>'+a.exp.Description+'</td></tr> <tr><td class="swaltdl ">No. of supporting documents Loaded : </td><td class="swaltdr "><b> '+a.uploader.queue.length+'</b></td> </tr> <tr><td class="swaltdl ">Expense Amount : </td><td class="swaltdr "><b>$ '+a.exp.Amount+"</b></td></tr></table>"}):swal({title:"Please confirm New Expense",text:"Created Expense will be reviewed by Chapter Lead and National Staff!",type:"info",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swaltdl "><b>'+c+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swaltdl "><b>'+a.exp.Description+'</td></tr> <tr><td class="swaltdl ">Miles Amount : </td><td class="swaltdr "><b>$ '+a.exp.Line[0].Amount+'</b></td></tr><tr><td class="swaltdl ">Trailer Mileage Amount : </td><td class="swaltdr "><b>$ '+a.exp.Line[1].Amount+'</b></td></tr><tr><td class="swaltdl ">Other Expense Amount : </td><td class="swaltdr "><b>$ '+a.lineamount+'</b></td></tr><tr><td class="swaltdl ">Total Expense Amount : </td><td class="swaltdr "><b>$ '+a.exp.Amount+"</b></td></tr></table>",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create it!"}).then(function(){a.createnewexpense("Pending"),e.path("/expense/viewexpense")})},a.CalculateAmount=function(){if(a.LineDetails.length)for(var b=2,c=0;c<a.LineDetails.length;c++)a.lineamount=Math.round(100*(parseFloat(a.lineamount)+parseFloat(a.LineDetails[c].Amount)))/100,a.exp.Line.push({ID:b,Description:a.LineDetails[c].Description,Quantity:1,Rate:1,Amount:parseFloat(a.LineDetails[c].Amount)}),b++;a.exp.Line[0].Amount=Math.round(a.exp.Line[0].Quantity*a.exp.Line[0].Rate*100)/100,a.exp.Line[1].Amount=Math.round(a.exp.Line[1].Quantity*a.exp.Line[1].Rate*100)/100,a.exp.Amount=Math.round(100*(a.exp.Line[0].Quantity*a.exp.Line[0].Rate+a.exp.Line[1].Quantity*a.exp.Line[1].Rate+1*parseFloat(a.lineamount)))/100},a.createnewexpense=function(b){var f=a.exp.eventdate;a.exp.eventdate=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear();for(var g=0;g<a.LineDetails.length;g++)null!=a.LineDetails[g]&&delete a.LineDetails[g].$$hashKey;a.exp.email=d.getCurrentUserEmail(),a.exp.Chapter=a.userChapter,a.exp.SubmitBy=a.userName.name.first+" "+a.userName.name.last,a.exp.Region=a.userName.Region;var h=new Date;a.exp.BillId=a.userName.Region.charAt(1)+a.userChapter.charAt(1)+a.userName.address.city.charAt(1)+h.getFullYear()+(h.getMonth()+1)+h.getDate()+ +h.getHours()+h.getMinutes()+h.getSeconds()+Math.floor(1e3*Math.random()+1),a.exp.SubmitDate=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear(),a.exp.SubmitAddress=a.userName.address.line1+" , "+a.userName.address.line2+" , "+a.userName.address.city+" , "+a.userName.address.state+" , "+a.userName.address.zip,"Chapter Lead"==a.userRole||"National Staff"==a.userRole?(a.exp.PaymentLog[0].PayStatus="Submitted",a.exp.PaymentStatus="Submitted"):(a.exp.PaymentLog[0].PayStatus="Pending",a.exp.PaymentStatus="Pending"),"SAVE"==b?(a.exp.PaymentLog[0].PayStatus="Edit",a.exp.PaymentStatus="Edit",a.exp.PaymentLog[0].PayStatusDescription="Expense saved for later submission"):a.exp.PaymentLog[0].PayStatusDescription="New Expense created",a.exp.PaymentLog[0].PayStatusBy=a.exp.SubmitBy,a.exp.PaymentLog[0].PayRole=a.userRole,h.getHours()>12?a.exp.PaymentLog[0].PayStatusDate=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear()+" "+(h.getHours()-12)+":"+h.getMinutes()+":"+h.getSeconds()+" PM":a.exp.PaymentLog[0].PayStatusDate=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear()+" "+h.getHours()+":"+h.getMinutes()+":"+h.getSeconds()+" AM",console.log("New expense ",a.exp.Chapter,a.exp.SubmitBy,a.exp.email);var i;document.getElementById("files");if(a.uploader.queue.length>0)for(var g=0;g<a.uploader.queue.length;g++)i="images/"+a.exp.BillId+"_"+a.uploader.queue[g].file.name,c.addNewImage({ID:g+1,ImageUrlLocation:"",FileName:i});var j="expense/";if(firebase.database().ref(j).push(angular.fromJson(angular.toJson(a.exp))).then(function(b){console.log("success : data pushed",a.exp)})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)}),void 0!==a.uploader){var k="";a.uploader.queue.length>0&&(k=c.SaveImageData(a.exp.BillId,a.uploader.queue),console.log("save image - ",k))}"SAVE"==b?swal("Expense is Saved for future submission","for event "+this.exp.eventdate,"success"):swal("New Expense Created","for event "+this.exp.eventdate,"success"),e.path("expense/viewexpense")}}]),angular.module("ohanaApp").controller("ViewExpenseController",["$scope","userService","$timeout","$filter","$uibModal","expenseservice","commonServices","$q","$location",function(a,b,c,d,e,f,g,h,i){a.listS="",a.lists={},a.form={},a.userlist="",a.userRole=b.getRole(),a.userName=b.getUserData(),a.userChapter=b.getChapter(),a.useremail=g.getCurrentUserEmail();var j=new Date;a.checkedOverageDays=function(){a.expenseconfig=[],a.expenseconfig.length=0,a.editstatus=[],a.editstatus.length=0,g.getData("/Config/Expense").then(function(b){if(b){a.expenseconfig=b;for(var d=0;d<a.expenseconfig.length;d++)Date.parse(j)>=Date.parse(a.expenseconfig[d].startdate)&&Date.parse(j)<=Date.parse(a.expenseconfig[d].enddate)&&(a.OverAgeWarning=a.expenseconfig[d].OverAgeWarning,a.OverAgeError=a.expenseconfig[d].OverAgeError,a.OverAgeDays=a.expenseconfig[d].OverAgeDays);a.editExpenseList=f.getEditStatusrec(),a.iseditexist="false";var e=0;a.$apply(function(){}),a.editExpenseList.$loaded().then(function(){angular.forEach(a.editExpenseList,function(b){b.email==a.useremail&&"false"==a.iseditexist&&c(function(){a.iseditexist="true",a.editeventdate=b.eventdate,a.daysforoverage=0,e=0,e=f.getPastDue(b.eventdate),e<a.OverAgeDays&&(a.daysforoverage=a.OverAgeDays-e),e==a.OverAgeDays&&(a.daysforoverage=0),e>a.OverAgeDays&&(a.daysforoverage=e-a.OverAgeDays),a.editstatus.push({OverAge:a.daysforoverage,BillId:b.BillId,EmailID:b.email}),void 0!==a.daysforoverage&&(a.daysforoverage>0?swal("Expense waiting for submission! Over Age in "+a.daysforoverage+" days","",""):0==a.daysforoverage?swal("Expense waiting for submission! Over Age TODAY","",""):swal("Expense in EDIT status Over Aged ","",""))},0)})}),a.useremail,a.iseditexist}})},a.neweexpense=function(){a.editExpenseList=f.getEditStatusrec(),a.iseditexist="false",a.editExpenseList.$loaded().then(function(){angular.forEach(a.editExpenseList,function(b){b.email==a.useremail&&"false"==a.iseditexist&&(a.iseditexist="true")}),"true"==a.iseditexist?swal("You cant create new expense","Previous expense must be submitted","warning"):i.path("/expense/newexpense")})},a.showPopover=function(){a.popoverIsVisible=!0},a.hidePopover=function(){a.popoverIsVisible=!1},a.openExpenseDash=function(){a.GetQuickOverviewData(),a.$modalInstance=e.open({scope:a,templateUrl:"myModalContent.html",size:"dash"})},a.ok=function(){a.$modalInstance.close()},a.options={legend:{display:!0,position:"bottom"}},a.Showmeedit=function(a){i.path("/expense/expensedetail/"+a)},a.ExpenseConfig=function(){window.location="#/expense/expenseconfig"},a.selectedRow=null,a.setClickedRow=function(b){a.selectedRow=b};var k=b.getId();g.getData("/userData/"+k);a.Head="",a.DateRangelist=[{name:"Past Week",value:"Past Week"},{name:"Past Month",value:"Past Month"},{name:"Past 3 Month",value:"Past 3 Month"},{name:"Past Year",value:"Past Year"},{name:"Custom Range",value:"Custom Range"}],a.DateFilter=a.DateRangelist[2];var l=new Date(j-7776e6);a.startdate=new Date(j-7776e6),a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=j.getMonth()+1+"/"+j.getDate()+"/"+j.getFullYear(),a.enddate=j,a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.DateFilterChange=function(){switch(a.DateFilter.value){case"Past Week":var b=new Date;a.startdate=new Date(b-6048e5),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Past Month":var b=new Date;a.startdate=new Date(b-2592e6),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Past 3 Month":var b=new Date;a.startdate=new Date(b-7776e6),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Past Year":var b=new Date;a.startdate=new Date(b-31536e6),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Custom Range":a.disp_startdate="",a.disp_enddate="",a.disp_filterdate=""}};var m=a.userName.name.first+" "+a.userName.name.last;switch(a.userRole){case"Volunteer":case"Participant":a.HeadTitle=" created by "+m,a.paystatuslist=[{name:"All",value:""},{name:"Edit",value:"Edit"},{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}],a.PayStatus=a.paystatuslist[4];break;case"Chapter Lead":a.HeadTitle=" for "+a.userChapter,a.paystatuslist=[{name:"All",value:""},{name:"Edit",value:"Edit"},{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Returned",value:"Returned"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}],a.PayStatus=a.paystatuslist[5];break;default:a.paystatuslist=[{name:"All",value:""},{name:"Edit",value:"Edit"},{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Returned",value:"Returned"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}],a.PayStatus=a.paystatuslist[3]}a.today=function(){a.startdate=l,a.enddate=j},a.today(),a.dateopen=function(){a.popup.opened=!0,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.$applyAsync()},a.dateopen1=function(){a.popup1.opened=!0,a.disp_enddate=a.enddate.getMonth()+1+"/"+a.enddate.getDate()+"/"+a.enddate.getFullYear(),a.$applyAsync()},a.clear=function(){a.startdate=new Date(j.getFullYear(),0,1),a.enddate=j},a.dateOptions={"year-format":"'yyyy'","starting-day":1},a.popup={opened:!1},a.popup1={opened:!1},a.formats=["MM/dd/yyyy"],a.format=a.formats[0],a.ctrldate={datetime:null},a.filterPastDue=function(){switch(a.startdate=new Date(j.getFullYear()-5,0,1),a.enddate=new Date(j-2592e6),a.userRole){case"Volunteer":case"Participant":a.PayStatus=a.paystatuslist[1];break;case"Chapter Lead":a.PayStatus=a.paystatuslist[1];break;default:a.PayStatus=a.paystatuslist[2]}a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=a.enddate.getMonth()+1+"/"+a.enddate.getDate()+"/"+a.enddate.getFullYear(),a.DateFilter=a.DateRangelist[4],a.ExpenseSearch("Overdue")},a.viewexpensedata=function(){a.checkedOverageDays(),a.ExpenseSearch("normal")},a.ExpenseSearch=function(b){a.lists=f.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.$applyAsync(),a.buildExpenseDataTable(a.lists,a.userRole,a.startdate,a.enddate,a.PayStatus.value,b)},a.buildExpenseDataTable=function(b,c,d,e,g,h){var i=(new Date,[]);a.selectedbills=[],a.selectedbills.length=0,b.$loaded().then(function(b){i=[],i.length=0;for(var h=0;h<b.length;h++){var j=0;j="Paid"!=b[h].PaymentStatus&&"Over Age"!=b[h].PaymentStatus?f.getPastDue(b[h].eventdate):"",i.push({SubmitDate:b[h].SubmitDate,SubmitBy:b[h].SubmitBy,eventdate:b[h].eventdate,Chapter:b[h].Chapter,Amount:b[h].Amount,PaymentStatus:b[h].PaymentStatus,pastdue:j,BillId:b[h].BillId})}var k=[];k.length=0,null!=i&&null!=d&&null!=e&&angular.forEach(i,function(a){var b=a.eventdate;Date.parse(b)>=Date.parse(d)&&Date.parse(b)<=Date.parse(e)&&k.push(a)}),a.retResults=[],a.retResults.length=0,null!=g&&null!=k&&""!=g?angular.forEach(k,function(b){var c=b.PaymentStatus;c==g&&a.retResults.push(b)}):a.retResults=k,angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#expenseTable"))&&a.expenseTable.destroy(),a.expenseTable=$("#expenseTable").DataTable({responsive:!0,autoWidth:!1,data:a.retResults,fnRowCallback:function(b,c,d,e){c.pastdue>parseInt(a.OverAgeWarning)&&c.pastdue<parseInt(a.OverAgeError)&&"Paid"!=c.PaymentStatus&&"Over Age"!=c.PaymentStatus&&$(b).css("color","red"),c.pastdue>a.OverAgeError-1&&"Paid"!=c.PaymentStatus&&"Over Age"!=c.PaymentStatus&&($(b).css("color","red"),$(b).css("font-weight","bold"),$(b).css("background-color","yellow"),$(b).css("font-size","16px"))},pagingType:"full_numbers",columns:[{data:"eventdate",width:"60px"},{data:"Amount",width:"60px",render:$.fn.dataTable.render.number(",",".",2)},{data:"PaymentStatus",width:"60px"},{data:"SubmitBy",width:"60px"},{data:"Chapter",width:"60px"},{data:"SubmitDate",width:"50px",visible:!1},{data:"pastdue",width:"60px"}],columnDefs:[{targets:0},{targets:4,visible:"National Staff"==c},{targets:6,width:"90px"}],order:[[6,"desc"]],headerCallback:function(a){}}),$("#expenseTable").dataTable().yadcf([{column_number:3,select_type:"chosen",filter_default_label:"Expense Originator Name"},{column_number:4,select_type:"chosen",filter_default_label:"Chapter"},{column_number:5,select_type:"chosen",filter_default_label:"Submit Date"},{column_number:0,select_type:"chosen",filter_default_label:"Event Date"},{column_number:1,select_type:"chosen",filter_default_label:"Amount"},{column_number:2,select_type:"chosen",filter_default_label:"Payment Status"},{column_number:6,select_type:"chosen",filter_default_label:"Past Due"}]),$("#example tbody").off("click","tr"),$("#expenseTable tbody").on("click","tr",function(){var b=a.expenseTable.row(this).data();window.location="#/expense/expensedetail/"+b.BillId})})})["catch"](function(a){console.error("error",a)})},a.GetQuickOverviewData=function(){a.dashlist=f.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.expensedash=[],a.expensedash.length=0,a.pielabels=[],a.pielabels.length=0,a.piedata=[],a.piedata.length=0,a.piecolor=[],a.piecolor.length=0,a.PieDisplay="";var b=0,c=0,d=0,e=0,g=0,h=0,b=0,i=0;a.dashlist.$loaded().then(function(){angular.forEach(a.dashlist,function(a){switch(a.PaymentStatus){case"Paid":b+=1;break;case"Edit":i+=1;break;case"Over Age":h+=1;break;case"Pending":c+=1;break;case"Returned":g+=1;break;case"Resubmit":e+=1;break;case"Submitted":d+=1}}),a.TotalExpenseCount=c+i+d+g+e+b+h,c>0&&(a.piedata.push(c),a.pielabels.push("Pending"),a.piecolor.push("#FFA500"),a.expensedash.push({Label:"Pending",Data:c})),i>0&&(a.piedata.push(i),a.pielabels.push("Edit"),a.piecolor.push("#FF6347"),a.expensedash.push({Label:"Edit",Data:i})),d>0&&(a.piedata.push(d),a.pielabels.push("Submitted"),a.piecolor.push("#0816ff"),a.expensedash.push({Label:"Submitted",Data:d})),g>0&&(a.piedata.push(g),a.pielabels.push("Returned"),a.piecolor.push("#08ffff"),a.expensedash.push({Label:"Returned",Data:g})),e>0&&(a.piedata.push(e),a.pielabels.push("Resubmit"),a.piecolor.push("#08ffff"),a.expensedash.push({Label:"Resubmit",Data:e})),b>0&&(a.piedata.push(b),a.pielabels.push("Paid"),a.piecolor.push("#08ff21"),a.expensedash.push({Label:"Paid",Data:b})),h>0&&(a.piedata.push(h),a.pielabels.push("Over Age"),a.piecolor.push("#FF0000"),a.expensedash.push({Label:"Over Age",Data:h}))})};var j=new Date;j.getMonth()+1+"/"+j.getDate()+"/"+j.getFullYear();a.CreateExpenseReport=function(){a.ExpenseSearch("normal");var b=new Date,c=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),d=a.userChapter,e=a.startdate.getMonth()+1+"/"+a.startdate.getDate()+"/"+a.startdate.getFullYear(),h=a.enddate.getMonth()+1+"/"+a.enddate.getDate()+"/"+a.enddate.getFullYear(),i=g.getCurrentUserEmail(),j=a.userName.name.first+" "+a.userName.name.last,k=a.userName.address.line1+" , "+a.userName.address.line2,l=a.userName.address.city+" , "+a.userName.address.state+" , "+a.userName.address.zip;a.rptdata=[];var m=g.getCurrentUserEmail();a.lists.$loaded().then(function(b){for(var g=0;g<b.length;g++){if((b[g].PaymentStatus==a.PayStatus.value||""==a.PayStatus.value)&&Date.parse(b[g].SubmitDate)>=Date.parse(a.startdate)&&Date.parse(b[g].SubmitDate)<=Date.parse(a.enddate)&&("Participant"==a.userRole||"Volunteer"==a.userRole)&&b[g].email==m){var n={"Event Date":b[g].eventdate,"Business Purpose, Origin & Destination":b[g].Description,"Miles Driven":parseInt(b[g].Line[0].Quantity),"Travel @ .25/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[0].Amount))/100),"Trailer Miles":parseInt(b[g].Line[1].Quantity),"Trailer Hauling @ .40/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[1].Amount))/100),"Other Expenses":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[2].Amount))/100),Total:"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Amount))/100),"Explanation of Other Expense":b[g].Line[2].Description};a.rptdata.push(n)}if((b[g].PaymentStatus==a.PayStatus.value||""==a.PayStatus.value)&&Date.parse(b[g].SubmitDate)>=Date.parse(a.startdate)&&Date.parse(b[g].SubmitDate)<=Date.parse(a.enddate)&&"Chapter Lead"==a.userRole&&a.userChapter==b[g].Chapter){var n={"Event Date":b[g].eventdate,"Business Purpose, Origin & Destination":b[g].Description,"Miles Driven":parseInt(b[g].Line[0].Quantity),"Travel @ .25/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[0].Amount))/100),"Trailer Miles":parseInt(b[g].Line[1].Quantity),"Trailer Hauling @ .40/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[1].Amount))/100),"Other Expenses":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[2].Amount))/100),Total:"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Amount))/100),"Explanation of Other Expense":b[g].Line[2].Description};a.rptdata.push(n)}if((b[g].PaymentStatus==a.PayStatus.value||""==a.PayStatus.value)&&Date.parse(b[g].SubmitDate)>=Date.parse(a.startdate)&&Date.parse(b[g].SubmitDate)<=Date.parse(a.enddate)&&"National Staff"==a.userRole){var n={"Event Date":b[g].eventdate,"Business Purpose, Origin & Destination":b[g].Description,"Miles Driven":parseInt(b[g].Line[0].Quantity),"Travel @ .25/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[0].Amount))/100),"Trailer Miles":parseInt(b[g].Line[1].Quantity),"Trailer Hauling @ .40/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[1].Amount))/100),"Other Expenses":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[2].Amount))/100),Total:"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Amount))/100),"Explanation of Other Expense":b[g].Line[2].Description};a.rptdata.push(n)}}f.createPDFReport(a.rptdata,c,j,k,l,d,i,e,h)})},a.idSelectedBill=null,a.setSelected=function(b){a.idSelectedBill=b,i.path("/expense/expensedetail/"+a.idSelectedBill)}}]),angular.module("ohanaApp").directive("connectToQuickbooks",["$window",function(a){return{restrict:"E",template:"<ipp:connectToIntuit></ipp:connectToIntuit>",link:function(b){var c=a.document.createElement("script");c.type="text/javascript",c.src="//js.appcenter.intuit.com/Content/IA/intuit.ipp.anywhere.js",c.onload=function(){b.$emit("intuitjs:loaded")},a.document.body.appendChild(c),b.$on("intuitjs:loaded",function(c){a.intuit.ipp.anywhere.setup({grantUrl:"/"}),b.connected=!0,b.$apply()})}}}]),angular.module("ohanaApp").service("expenseservice",["filterFilter","$firebaseArray",function(a,b){this.expense={BillId:"",Chapter:"",Region:"",eventdate:"",email:"",SubmitDate:"",SubmitBy:"",SubmitAddress:"",Description:"",PaymentStatus:"Pending",PaymentLog:[{PayStatus:"",PayStatusBy:"",PayStatusDate:"",PayRole:"",PayStatusDescription:""}],Amount:0,ImageURL:[],Line:[{ID:1,Description:"Mileage Rate - Travel @.25/mile",Quantity:0,Rate:.25,Amount:0},{ID:2,Description:"Trailer Mileage Rate @.40/mile",Quantity:0,Rate:.4,Amount:0}]},this.addNewImage=function(a){this.expense.ImageURL.push(a)},this.addNewImage=function(a,b){this.expense.ImageURL.push(a)},this.getExpense=function(){return console.log("Get Expense",expense),expense},this.addNewList=function(a){expense.Line.push()},this.getExpenseAt=function(b){return this.getExpense(),a(expense,{BillId:b})[0]},this.getExpenseChapterList=function(){return Chapterlist},this.LineDetails=[{Description:"",Amount:0}],this.addNew=function(a){this.LineDetails.push({Description:"",Amount:0}),console.log("Other expense - New Line Added",this.LineDetails)},this.deleteExpense=function(a){var b=firebase.database().ref("expense/").orderByChild("BillId").equalTo(a);b.on("child_added",function(b){b.val();firebase.database().ref("expense/"+b.key).remove().then(function(b){console.log("success : - ",a," data Deleted"),swal("Expense Deleted Successfully!","","success")})["catch"](function(b){b.code,b.message;console.log("ERROR: "+b.code+": "+b.message),console.log("Expense - ",a," Removal Failed")})})},this.updatePaymentStatus=function(a,b){var c="",d=new Date,e="";e=d.getHours()>12?d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" "+(d.getHours()-12)+":"+d.getMinutes()+":"+d.getSeconds()+" PM":d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+" AM";for(var f=0;f<a.length;f++){var g=[],h=firebase.database().ref("expense/").orderByChild("BillId").equalTo(a[f]);h.on("child_added",function(a){var d=a.val();if(c=a.key,d.PaymentLog.length)for(var f=0;f<d.PaymentLog.length;f++)g.push({PayStatus:d.PaymentLog[f].PayStatus,PayStatusBy:d.PaymentLog[f].PayStatusBy,PayStatusDate:d.PaymentLog[f].PayStatusDate,PayRole:d.PaymentLog[f].PayRole,PayStatusDescription:d.PaymentLog[f].PayStatusDescription});g.push({PayStatus:"Paid",PayStatusBy:b,PayStatusDate:e,PayRole:"National Staff",PayStatusDescription:"Agree with Chapter Lead. Expense Paid"})});for(var i=0;i<g.length;i++)null!=g[i]&&delete g[i].$$hashKey;var j={PaymentStatus:"Paid",PaymentLog:g};firebase.database().ref("expense/"+c).update(j)}swal("Payment Status Updated Successfully!","","success")},this.getViewExpenseData=function(a,c,d){switch(c){case"Volunteer":case"Participant":var e=firebase.database().ref("/expense").orderByChild("email").equalTo(a);break;case"Chapter Lead":var e=firebase.database().ref("/expense").orderByChild("Chapter").equalTo(d);break;default:var e=firebase.database().ref("/expense").orderByChild("SubmitDate")}var f=b(e);return f},this.getlast12month=function(){var a,b=new Date,c=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),d=[],e=b.getMonth();for(a=0;13>a;a++)0!=a&&d.push(c[e]),e++,e>11&&(e=0);return d;
},this.getlast12monthyear=function(){var a=new Date,b=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),c=[],d=new Date(a);d=new Date(d.setMonth(d.getMonth()-12));var e,f=(d.getFullYear(),d.getMonth());for(e=0;13>e;e++)0!=e&&c.push(b[f]+"-"+d.getFullYear()),f++,f>11&&(f=0),d=new Date(d.setMonth(d.getMonth()+1));return c},this.getPastDue=function(a){var b=new Date,c=a.toString().split("/"),d=new Date(c[2],c[0]-1,c[1]),e=0;return Date.parse(b)==Date.parse(d)&&(e=0),Date.parse(b)>Date.parse(d)&&(e=Math.round((Date.parse(b)-Date.parse(d))/864e5)),Date.parse(b)<Date.parse(d)&&(e=Date.parse(d)-Date.parse(b)/864e5),e},this.getEditStatusrec=function(){var a=firebase.database().ref("/expense").orderByChild("PaymentStatus").equalTo("Edit"),c=b(a);return c},this.getEditExpenseData=function(a){var c=firebase.database().ref("/expense").orderByChild("BillId").equalTo(a),d=b(c);return d},this.GetViewExpenseTableData=function(a,c,d){var e="";switch(c){case"Volunteer":case"Participant":e=firebase.database().ref("/expense").orderByChild("email").equalTo(a),console.log("ref-1");break;case"Chapter Lead":e=firebase.database().ref("/expense").orderByChild("Chapter").equalTo(d),console.log("ref-2");break;case"National Staff":case"admin":e=firebase.database().ref("/expense"),console.log("ref-3")}var f=[];return f=b(e)},this.datefilter=function(a,b,c,d){var e=[];if(null!=a&&null!=b&&null!=c){angular.forEach(a,function(a){var d=a.SubmitDate;Date.parse(d)>=Date.parse(b)&&Date.parse(d)<=Date.parse(c)&&(e.push(a),console.log("Date ",Date.parse(d),d,b,c,e))});var f=[];return null!=d&&null!=e&&""!=d?angular.forEach(e,function(a){var b=a.PaymentStatus;b==d&&(f.push(a),console.log("paystatus ",e,f,d,b))}):f=e,f}},this.deleteImage=function(a,b){var c=firebase.storage().ref(),d=c.child(a),e=[];console.log("Image Aarray - 0 ",b,e),d["delete"]().then(function(){console.log("success : - ",a," Image Deleted"),swal("Removed!","Your supporting document file has been removed.","success")})["catch"](function(b){b.code,b.message;console.log("ERROR: "+b.code+": "+b.message),console.log("Image - ",a," Removal Failed")})},this.SaveImageData=function(a,b){var c=[];console.log("file image ",b[0].file.name);for(var d=0;d<b.length;++d)for(var e=b[d].file.name,f=[".jpg",".jpeg",".bmp",".gif",".png"],g=0;g<f.length;g++){var h=f[g];if(e.substr(e.length-h.length,h.length).toLowerCase()==h.toLowerCase()){var i=(firebase.storage(),b[d]._file);console.log("load file - ",i);var j=firebase.storage().ref(),k=(j.fullPath,"images/"+a+"_"+i.name);j.child(k).put(i).then(function(a){return void 0!==a?j.child(k).getDownloadURL().then(function(a){return console.log("Image func - ",a),a}):void 0});var j=firebase.storage().ref(k),l=j.put(i);l.on("state_changed",null,null,function(){var a=l.snapshot.downloadURL;c.push({ID:g+1,ImageUrlLocation:a,FileName:k}),console.log("Uploaded file!",c)})}}},this.buildTableBody=function(a,b){var c=[];return c.push(b),a.forEach(function(a){var d=[];b.forEach(function(b){d.push(a[b].toString())}),c.push(d)}),c},this.table=function(a,b){return{style:"demoTable",widths:["60","150","60","60","60","60","60","60","200"],table:{headerRows:1,body:this.buildTableBody(a,b)}}},this.createPDFReport=function(a,b,c,d,e,f,g,h,i){var j={pageOrientation:"landscape",header:{margin:10,columns:[{margin:[10,0,0,0],text:"HOW Expense Report",fontSize:14,bold:!0,alignment:"center"}]},footer:{columns:[b,{text:"AT&T     ",alignment:"right"}]},styles:{header:{bold:!0,color:"#000",fontSize:11},demoTable:{color:"#666",fontSize:10}},content:[{canvas:[{type:"line",x1:0,y1:5,x2:750,y2:5,lineWidth:.5}]},{text:"\n"},{columns:[{stack:["Payable To: "+c,"Address : "+d,"City/State/Zip : "+e],fontSize:11},{stack:["Chapter Name : "+f,"Email Id :"+g],fontSize:11},{stack:["Expense From : "+h,"Expense To : "+i],fontSize:11}]},{text:"\n"},{width:"",text:""},this.table(a,["Event Date","Business Purpose, Origin & Destination","Miles Driven","Travel @ .25/mile","Trailer Miles","Trailer Hauling @ .40/mile","Other Expenses","Total","Explanation of Other Expense"])]};pdfMake.createPdf(j).download("ExpenseReport.pdf")}}]),angular.module("ohanaApp").controller("ManageChapterchatCtrl",["$scope","$rootScope","$q","commonServices","userService",function(a,b,c,d,e){a.$watch("chatLog",function(){$(".panel-body").animate({scrollTop:$(".panel-body").get(0).scrollHeight})},!0),a.init=function(){var b=e.getUserData();a.newMessage="",a.chatLog=[],a.chapterOptions={},a.chapterOptions[b.Chapter]=b.Chapter,_.each(b.Chapters,function(b){a.chapterOptions[b.chapter]=b.chapter}),a.loadChapterChat(e.getChapter())},a.loadChapterChat=function(e){var f=d.getData("/chat/chapters/"+e);a.currentChapter=e,c.all([f]).then(function(c){a.chatLog=_.sortBy(c[0],["time"]),firebase.database().ref("/chat/chapters/"+e).on("value",function(c){a.chatLog=_.sortBy(c.val(),["time"]);var d=Object.keys(c.val()),e=c.val()[d[d.length-1]];e.userId!==b.userId&&a.$apply()})})},a.changeChapter=function(){swal({title:"Switch Chapter",input:"select",inputOptions:a.chapterOptions}).then(function(b){a.loadChapterChat(b),swal({type:"success",title:"Switched to "+b})})},a.sendMessage=function(){var b={};b.userId=e.getId(),b.name=e.getUserName(),b.time=Date.now(),b.message=a.newMessage,d.pushData("/chat/chapters/"+a.currentChapter,b),a.newMessage=""}}]),angular.module("ohanaApp").service("userService",["$rootScope","commonServices",function(a,b){this.setId=function(b){a.userId=b,localStorage.setItem("userId",b)},this.setUserData=function(b){a.userData=b,localStorage.setItem("userData",JSON.stringify(b))},this.setUserName=function(b,c){a.userName=b+" "+c,localStorage.setItem("userName",b+" "+c)},this.setRole=function(b){a.userRole=b,localStorage.setItem("userRole",b)},this.setChapter=function(b){a.userChapter=b,localStorage.setItem("userChapter",b)},this.getId=function(){var a=localStorage.getItem("userId");return a},this.getUserData=function(){var a=localStorage.getItem("userData");return JSON.parse(a)},this.getUserName=function(){var a=localStorage.getItem("userName");return a},this.getRole=function(){var a=localStorage.getItem("userRole");return a},this.getChapter=function(){var a=localStorage.getItem("userChapter");return a}}]),angular.module("ohanaApp").directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]),angular.module("ohanaApp").controller("ExpenseOverviewCtrl",["$scope","$timeout","userService","expenseservice","commonServices","$window","$location","$q",function(a,b,c,d,e,f,g,h){a.userRole=c.getRole(),a.userName=c.getUserData(),a.userChapter=c.getChapter(),a.useremail=e.getCurrentUserEmail(),a.ViewExpenseList=function(){window.location="#/expense/viewexpense"},a.neweexpense=function(){"true"==a.iseditexist?swal("You cant create new expense","Previous expense in EDIT status must be submitted","warning"):g.path("/expense/newexpense")},a.options={legend:{display:!0,position:"bottom"}},a.options1={legend:{display:!0,position:"bottom"}},a.labels1=[],a.labels1.length=0,a.labels1=d.getlast12month(),a.labels2=d.getlast12monthyear(),a.series1=[],a.data1=[],a.data2=[],a.options1={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left"}]}},a.paystatuslist=["Edit","Pending","Resubmit","Submitted","Returned","Paid","Over Age"],a.selectedpaystatus=["Edit","Pending","Resubmit","Submitted","Returned","Paid","Over Age"],a.paystatusSelection=function(b){var c=a.selectedpaystatus.indexOf(b);c>-1?a.selectedpaystatus.splice(c,1):a.selectedpaystatus.push(b),a.getExpensebyStatus()},a.checkedOverageDays=function(){var b=new Date;e.getData("/Config/Expense").then(function(c){if(c){a.expenseconfig=c;for(var d=0;d<a.expenseconfig.length;d++)Date.parse(b)>=Date.parse(a.expenseconfig[d].startdate)&&Date.parse(b)<=Date.parse(a.expenseconfig[d].enddate)&&(a.OverAgeDays=a.expenseconfig[d].OverAgeDays);a.getOverAgeData()}})},a.getOverAgeData=function(){a.PayStatusCountData=[],a.PayStatusCountData.length=0,a.editstatus=[],a.editstatus.length=0,a.editExpenseList=d.getEditStatusrec(),a.iseditexist="false";var c=0;a.editExpenseList.$loaded().then(function(){angular.forEach(a.editExpenseList,function(e){e.email==a.useremail&&"false"==a.iseditexist&&b(function(){a.iseditexist="true",a.editeventdate=e.eventdate,a.daysforoverage=0,c=0,c=d.getPastDue(e.eventdate),c<a.OverAgeDays&&(a.daysforoverage=a.OverAgeDays-c),c==a.OverAgeDays&&(a.daysforoverage=0),c>a.OverAgeDays&&(a.daysforoverage=c-a.OverAgeDays),a.editstatus.push({OverAge:a.daysforoverage,BillId:e.BillId,EmailID:e.email}),void 0!==a.daysforoverage&&(a.daysforoverage>0?swal("Expense waiting for submission! Over Age in "+a.daysforoverage+" days","",""):0==a.daysforoverage?swal("Expense waiting for submission! Over Age TODAY","",""):swal("Expense in EDIT status Over Aged ","",""))},0)})})},a.getExpensebyStatus=function(){var b=new Date,c=new Date(b-6048e5),d=new Date(b-2592e6),e=new Date(b-7776e6),f=new Date(b-31536e6),g=b;a.dashlist.$loaded().then(function(){a.ExpensebyStatusData=[],a.ExpensebyStatusData.length=0,a.PayStatusCountData=[],a.PayStatusCountData.length=0;var b=[],h=[],i=[];angular.forEach(a.dashlist,function(a){var c=a.SubmitBy,d=a.Chapter,e=a.Region;-1===i.indexOf(c)&&(i.push(c),b.push({OriginatorName:c,Chapter:d,Region:e,PastWeek:0,PastMonth:0,Past3Month:0,Past1Year:0,ALL:0})),-1===i.indexOf(d)&&(i.push(d),h.push({Region:e,Chapter:d,Edit:0,Pending:0,Submitted:0,Resubmit:0,Returned:0,Paid:0,OverAge:0}))}),a.PayStatusCountData=h,a.ExpensebyStatusData=b,console.log("Array1 ",a.ExpensebyStatusData,a.PayStatusCountData),angular.forEach(a.dashlist,function(b){for(var h=b.eventdate.toString().split("/"),i=new Date(h[2],h[0]-1,h[1]),j=0;j<a.ExpensebyStatusData.length;j++)if(a.ExpensebyStatusData[j].Chapter===b.Chapter&&a.ExpensebyStatusData[j].OriginatorName===b.SubmitBy&&a.selectedpaystatus.includes(b.PaymentStatus))switch(b.PaymentStatus){case"Edit":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Pending":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Resubmit":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Submitted":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Returned":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Paid":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Over Age":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100}for(var j=0;j<a.PayStatusCountData.length;j++)if(a.PayStatusCountData[j].Chapter===b.Chapter)switch(b.PaymentStatus){case"Edit":a.PayStatusCountData[j].Edit=a.PayStatusCountData[j].Edit+1,a.gettotaldata.Edit=a.gettotaldata.Edit+1;break;case"Pending":a.PayStatusCountData[j].Pending=a.PayStatusCountData[j].Pending+1,a.gettotaldata.Pending=a.gettotaldata.Pending+1;break;case"Resubmit":a.PayStatusCountData[j].Resubmit=a.PayStatusCountData[j].Resubmit+1,a.gettotaldata.Resubmit=a.gettotaldata.Resubmit+1;break;case"Submitted":a.PayStatusCountData[j].Submitted=a.PayStatusCountData[j].Submitted+1,a.gettotaldata.Submitted=a.gettotaldata.Submitted+1;break;case"Returned":a.PayStatusCountData[j].Returned=a.PayStatusCountData[j].Returned+1,a.gettotaldata.Returned=a.gettotaldata.Returned+1;break;case"Paid":a.PayStatusCountData[j].Paid=a.PayStatusCountData[j].Paid+1,a.gettotaldata.Paid=a.gettotaldata.Paid+1;break;case"Over Age":a.PayStatusCountData[j].OverAge=a.PayStatusCountData[j].OverAge+1,a.gettotaldata.OverAge=a.gettotaldata.OverAge+1}}),void 0!==a.PayStatusCountData&&a.buildChapterStatusData(),a.buildExpenseData()})},a.Showmeedit=function(a){g.path("/expense/expensedetail/"+a)},a.ViewExpenseList=function(){g.path("/expense/viewexpense")},a.viewexpensedash=function(){a.getSiteData=[],a.getSiteData.length=0,a.ExpensebyStatusData=[],a.ExpensebyStatusData.length=0,a.userRole=c.getRole(),a.userChapter=c.getChapter(),a.useremail=e.getCurrentUserEmail(),a.dashlist=d.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.expensedash=[],a.expensedash.length=0,a.pielabels=[],a.pielabels.length=0,a.piedata=[],a.piedata.length=0,a.piecolor=[],a.piecolor.length=0,a.PieDisplay="",a.gettotaldata={Edit:0,Pending:0,Submitted:0,Resubmit:0,Returned:0,Paid:0,OverAge:0};var b=0,f=[0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0,0,0,0],h=0,i=[0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0,0,0,0,0,0,0,0,0],k=0,l=[0,0,0,0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0,0,0,0],n=0,o=[0,0,0,0,0,0,0,0,0,0,0,0],p=[0,0,0,0,0,0,0,0,0,0,0,0],q=0,r=[0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0,0,0,0],t=0,u=[0,0,0,0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0,0,0,0],w=0,x=[0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0,0,0,0,0,0,0,0,0],z="",A="",B="",C=["","January","February","March","April","May","June","July","August","September","October","November","December"];a.resubmitcnt=0,a.dashlist.$loaded().then(function(){a.checkedOverageDays(),a.getExpensebyStatus(),angular.forEach(a.dashlist,function(c){switch(A=c.eventdate.split("/"),B="",B=C[parseInt(A[0],10)],c.PaymentStatus){case"Paid":t+=1,a.labels1[0]==B&&(u[0]=u[0]+1,v[0]=v[0]+c.Amount),a.labels1[1]==B&&(u[1]=u[1]+1,v[1]=v[1]+c.Amount),a.labels1[2]==B&&(u[2]=u[2]+1,v[2]=v[2]+c.Amount),a.labels1[3]==B&&(u[3]=u[3]+1,v[3]=v[3]+c.Amount),a.labels1[4]==B&&(u[4]=u[4]+1,v[4]=v[4]+c.Amount),a.labels1[5]==B&&(u[5]=u[5]+1,v[5]=v[5]+c.Amount),a.labels1[6]==B&&(u[6]=u[6]+1,v[6]=v[6]+c.Amount),a.labels1[7]==B&&(u[7]=u[7]+1,v[7]=v[7]+c.Amount),a.labels1[8]==B&&(u[8]=u[8]+1,v[8]=v[8]+c.Amount),a.labels1[9]==B&&(u[9]=u[9]+1,v[9]=v[9]+c.Amount),a.labels1[10]==B&&(u[10]=u[10]+1,v[10]=v[10]+c.Amount),a.labels1[11]==B&&(u[11]=u[11]+1,v[11]=v[11]+c.Amount);break;case"Edit":w+=1,z=c.BillId,a.labels1[0]==B&&(x[0]=x[0]+1,y[0]=y[0]+c.Amount),a.labels1[1]==B&&(x[1]=x[1]+1,y[1]=y[1]+c.Amount),a.labels1[2]==B&&(x[2]=x[2]+1,y[2]=y[2]+c.Amount),a.labels1[3]==B&&(x[3]=x[3]+1,y[3]=y[3]+c.Amount),a.labels1[4]==B&&(x[4]=x[4]+1,y[4]=y[4]+c.Amount),a.labels1[5]==B&&(x[5]=x[5]+1,y[5]=y[5]+c.Amount),a.labels1[6]==B&&(x[6]=x[6]+1,y[6]=y[6]+c.Amount),a.labels1[7]==B&&(x[7]=x[7]+1,y[7]=y[7]+c.Amount),a.labels1[8]==B&&(x[8]=x[8]+1,y[8]=y[8]+c.Amount),a.labels1[9]==B&&(x[9]=x[9]+1,y[9]=y[9]+c.Amount),a.labels1[10]==B&&(x[10]=x[10]+1,y[10]=y[10]+c.Amount),a.labels1[11]==B&&(x[11]=x[11]+1,y[11]=y[11]+c.Amount);break;case"Over Age":q+=1,a.labels1[0]==B&&(r[0]=r[0]+1,s[0]=s[0]+c.Amount),a.labels1[1]==B&&(r[1]=r[1]+1,s[1]=s[1]+c.Amount),a.labels1[2]==B&&(r[2]=r[2]+1,s[2]=s[2]+c.Amount),a.labels1[3]==B&&(r[3]=r[3]+1,s[3]=s[3]+c.Amount),a.labels1[4]==B&&(r[4]=r[4]+1,s[4]=s[4]+c.Amount),a.labels1[5]==B&&(r[5]=r[5]+1,s[5]=s[5]+c.Amount),a.labels1[6]==B&&(r[6]=r[6]+1,s[6]=s[6]+c.Amount),a.labels1[7]==B&&(r[7]=r[7]+1,s[7]=s[7]+c.Amount),a.labels1[8]==B&&(r[8]=r[8]+1,s[8]=s[8]+c.Amount),a.labels1[9]==B&&(r[9]=r[9]+1,s[9]=s[9]+c.Amount),a.labels1[10]==B&&(r[10]=r[10]+1,s[10]=s[10]+c.Amount),a.labels1[11]==B&&(r[11]=r[11]+1,s[11]=s[11]+c.Amount);break;case"Pending":b+=1,a.labels1[0]==B&&(f[0]=f[0]+1,g[0]=g[0]+c.Amount),a.labels1[1]==B&&(f[1]=f[1]+1,g[1]=g[1]+c.Amount),a.labels1[2]==B&&(f[2]=f[2]+1,g[2]=g[2]+c.Amount),a.labels1[3]==B&&(f[3]=f[3]+1,g[3]=g[3]+c.Amount),a.labels1[4]==B&&(f[4]=f[4]+1,g[4]=g[4]+c.Amount),a.labels1[5]==B&&(f[5]=f[5]+1,g[5]=g[5]+c.Amount),a.labels1[6]==B&&(f[6]=f[6]+1,g[6]=g[6]+c.Amount),a.labels1[7]==B&&(f[7]=f[7]+1,g[7]=g[7]+c.Amount),a.labels1[8]==B&&(f[8]=f[8]+1,g[8]=g[8]+c.Amount),a.labels1[9]==B&&(f[9]=f[9]+1,g[9]=g[9]+c.Amount),a.labels1[10]==B&&(f[10]=f[10]+1,g[10]=g[10]+c.Amount),a.labels1[11]==B&&(f[11]=f[11]+1,g[11]=g[11]+c.Amount);break;case"Returned":n+=1,a.labels1[0]==B&&(o[0]=o[0]+1,p[0]=p[0]+c.Amount),a.labels1[1]==B&&(o[1]=o[1]+1,p[1]=p[1]+c.Amount),a.labels1[2]==B&&(o[2]=o[2]+1,p[2]=p[2]+c.Amount),a.labels1[3]==B&&(o[3]=o[3]+1,p[3]=p[3]+c.Amount),a.labels1[4]==B&&(o[4]=o[4]+1,p[4]=p[4]+c.Amount),a.labels1[5]==B&&(o[5]=o[5]+1,p[5]=p[5]+c.Amount),a.labels1[6]==B&&(o[6]=o[6]+1,p[6]=p[6]+c.Amount),a.labels1[7]==B&&(o[7]=o[7]+1,p[7]=p[7]+c.Amount),a.labels1[8]==B&&(o[8]=o[8]+1,p[8]=p[8]+c.Amount),a.labels1[9]==B&&(o[9]=o[9]+1,p[9]=p[9]+c.Amount),a.labels1[10]==B&&(o[10]=o[10]+1,p[10]=p[10]+c.Amount),a.labels1[11]==B&&(o[11]=o[11]+1,p[11]=p[11]+c.Amount);break;case"Resubmit":k+=1,a.labels1[0]==B&&(l[0]=l[0]+1,m[0]=m[0]+c.Amount),a.labels1[1]==B&&(l[1]=l[1]+1,m[1]=m[1]+c.Amount),a.labels1[2]==B&&(l[2]=l[2]+1,m[2]=m[2]+c.Amount),a.labels1[3]==B&&(l[3]=l[3]+1,m[3]=m[3]+c.Amount),a.labels1[4]==B&&(l[4]=l[4]+1,m[4]=m[4]+c.Amount),a.labels1[5]==B&&(l[5]=l[5]+1,m[5]=m[5]+c.Amount),a.labels1[6]==B&&(l[6]=l[6]+1,m[6]=m[6]+c.Amount),a.labels1[7]==B&&(l[7]=l[7]+1,m[7]=m[7]+c.Amount),a.labels1[8]==B&&(l[8]=l[8]+1,m[8]=m[8]+c.Amount),a.labels1[9]==B&&(l[9]=l[9]+1,m[9]=m[9]+c.Amount),a.labels1[10]==B&&(l[10]=l[10]+1,m[10]=m[10]+c.Amount),a.labels1[11]==B&&(l[11]=l[11]+1,m[11]=m[11]+c.Amount),a.useremail==c.email&&(a.resubmitcnt=a.resubmitcnt+1);break;case"Submitted":h+=1,a.labels1[0]==B&&(i[0]=i[0]+1,j[0]=j[0]+c.Amount),a.labels1[1]==B&&(i[1]=i[1]+1,j[1]=j[1]+c.Amount),a.labels1[2]==B&&(i[2]=i[2]+1,j[2]=j[2]+c.Amount),a.labels1[3]==B&&(i[3]=i[3]+1,j[3]=j[3]+c.Amount),a.labels1[4]==B&&(i[4]=i[4]+1,j[4]=j[4]+c.Amount),a.labels1[5]==B&&(i[5]=i[5]+1,j[5]=j[5]+c.Amount),a.labels1[6]==B&&(i[6]=i[6]+1,j[6]=j[6]+c.Amount),a.labels1[7]==B&&(i[7]=i[7]+1,j[7]=j[7]+c.Amount),a.labels1[8]==B&&(i[8]=i[8]+1,j[8]=j[8]+c.Amount),a.labels1[9]==B&&(i[9]=i[9]+1,j[9]=j[9]+c.Amount),a.labels1[10]==B&&(i[10]=i[10]+1,j[10]=j[10]+c.Amount),a.labels1[11]==B&&(i[11]=i[11]+1,j[11]=j[11]+c.Amount)}});a.TotalExpenseCount=b+w+h+n+k+t+q,b>0&&(a.piedata.push(b),a.pielabels.push("Pending"),a.piecolor.push("#FFA500"),a.series1.push("Pending"),a.data1.push(f),a.data2.push(g),a.expensedash.push({Label:"Pending",Data:b})),w>0&&(a.piedata.push(w),a.pielabels.push("Edit"),a.piecolor.push("#FF6347"),a.series1.push("Edit"),a.data1.push(x),a.data2.push(y),a.expensedash.push({Label:"Edit",Data:w})),h>0&&(a.piedata.push(h),a.pielabels.push("Submitted"),a.piecolor.push("#0816ff"),a.series1.push("Submitted"),a.data1.push(i),a.data2.push(j),a.expensedash.push({Label:"Submitted",Data:h})),n>0&&(a.piedata.push(n),a.pielabels.push("Returned"),a.piecolor.push("#08ffff"),a.series1.push("Returned"),a.data1.push(o),a.data2.push(p),a.expensedash.push({Label:"Returned",Data:n})),k>0&&(a.piedata.push(k),a.pielabels.push("Resubmit"),a.piecolor.push("#08ffff"),a.series1.push("Resubmit"),a.data1.push(l),a.data2.push(m),a.expensedash.push({Label:"Resubmit",Data:k})),t>0&&(a.piedata.push(t),a.pielabels.push("Paid"),a.piecolor.push("#08ff21"),a.series1.push("Paid"),a.data1.push(u),a.data2.push(v),a.expensedash.push({Label:"Paid",Data:t})),q>0&&(a.piedata.push(q),a.pielabels.push("Over Age"),a.piecolor.push("#FF0000"),a.series1.push("Over Age"),a.data1.push(r),a.data2.push(s),a.expensedash.push({Label:"Over Age",Data:q}))})},a.buildChapterStatusData=function(){angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#ChapterViewTable"))&&a.CVTable.destroy(),a.CVTable=$("#ChapterViewTable").DataTable({responsive:!0,autoWidth:!1,data:a.PayStatusCountData,scrollY:"200px",scrollCollapse:!0,paging:!1,dom:"Bfrtip",buttons:["excel","pdf","print"],columns:[{data:"Region",title:"Region",width:"80px"},{data:"Chapter",title:"Chapter",width:"120px"},{data:"Edit",title:"Edit",width:"40px"},{data:"Pending",title:"Pending",width:"40px"},{data:"Resubmit",title:"Resubmit",width:"40px"},{data:"Submitted",title:"Submitted",width:"40px"},{data:"Returned",title:"Returned",width:"40px"},{data:"Paid",title:"Paid",width:"40px"},{data:"OverAge",title:"Over Age",width:"40px"}],columnDefs:[{targets:0,width:"25%"},{targets:1,width:"35%"},{targets:2},{targets:3}],order:[[2,"desc"]]})})},a.buildExpenseData=function(){angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#ExpenseViewTable"))&&a.EVTable.destroy(),a.EVTable=$("#ExpenseViewTable").removeAttr("width").DataTable({responsive:!0,autoWidth:!1,data:a.ExpensebyStatusData,scrollY:"200px",scrollCollapse:!0,paging:!1,dom:"Bfrtip",buttons:["excel","pdf","print"],columns:[{data:"Region",title:"Region",width:"70px"},{data:"Chapter",title:"Chapter",width:"90px"},{data:"OriginatorName",title:"Originator Name",width:"120px"},{data:"PastWeek",title:"Past Week",width:"50px"},{data:"PastMonth",title:"Past Month",width:"50px"},{data:"Past3Month",title:"Past 3 Month",width:"50px"},{data:"Past1Year",title:"Past 1 Year",width:"50px"},{data:"ALL",title:"ALL",width:"40px"}],columnDefs:[{targets:0,width:"25%"},{targets:1,width:"35%"},{targets:2},{targets:3}],order:[[2,"desc"]]})})}}]),angular.module("ohanaApp").service("howLogService",["$rootScope","commonServices",function(a,b){this.logPrimaryChapterChange=function(a,c,d,e){var f=Date.now(),g={type:"primary",timeStamp:f,userName:a,changedBy:c,oldChapter:d,newChapter:e};b.pushData("/logs/nationalLogs/memberTraffic/",g)},this.logSecondaryChapterChange=function(a,c,d,e){var f=Date.now(),g={type:"secondary",timeStamp:f,userName:a,changedBy:c,oldChapters:d,newChapters:e};b.pushData("/logs/nationalLogs/memberTraffic/",g)},this.logNewUserAdded=function(a,b,c){},this.logUserAddedToChapter=function(a,c,d){var e=Date.now(),f={type:"primary",status:"added",timeStamp:e,userName:a,changedBy:c,newChapters:d};b.pushData("/logs/chapterLogs/memberTraffic/primaryChapter/"+d,f)},this.logUserAddedToSecondaryChapter=function(a,c,d){_.each(d,function(d){var e=Date.now(),f={type:"secondary",status:"added",timeStamp:e,userName:a,changedBy:c,newChapter:d};b.pushData("/logs/chapterLogs/memberTraffic/secondaryChapter/"+d,f)})},this.logUserRemovedFromChapter=function(a,c,d){var e=Date.now(),f={type:"primary",status:"removed",timeStamp:e,userName:a,changedBy:c,oldChapter:d};b.pushData("/logs/chapterLogs/memberTraffic/primaryChapter/"+d,f)},this.logUserRemovedFromSecondaryChapter=function(a,c,d){_.each(d,function(d){var e=Date.now(),f={type:"secondary",status:"removed",timeStamp:e,userName:a,changedBy:c,oldChapter:d};b.pushData("/logs/chapterLogs/memberTraffic/secondaryChapter/"+d,f)})}}]),angular.module("ohanaApp").controller("ExpenseExpenseconfigCtrl",["$scope","commonServices","userService","$q","$location",function(a,b,c,d,e){function f(){a.expenseconfig=[],a.expenseconfig.length=0,a.ConfigLog=[],a.ConfigLog.length=0,console.log("Entry"),b.getData("/Config/").then(function(b){b?(a.ConfigLog=b.ExpenseLog,a.expenseconfig=b.Expense,a.$apply(function(){}),a.buildConfigData()):(a.expenseconfig.push({id:1,startdate:"",enddate:"",MileRate:0,TrailerRate:0,OverAgeWarning:0,OverAgeError:0,OverAgeDays:0}),a.ConfigLog=[],console.log("Entry3"))})["catch"](function(b){console.log("Entry4"),a.expenseconfig=[],a.ConfigLog=[]})}a.ConfigLog=[],a.expenseconfig=[],a.ConfigLog.length=0,a.expenseconfig.length=0,a.expenseconfigdata=[],a.opened={},a.open=function(b,c){b.preventDefault(),b.stopPropagation(),a.opened[c]=!a.opened[c]},a.expenseconfig.startdate=new Date,a.expenseconfig.enddate=new Date,a.expenseconfig=[],a.expenseconfig.length=0,a.saveConfig=function(b,c){a.expenseconfigdata.push({id:c,startdate:a.expenseconfig[c-1].startdate,enddate:a.expenseconfig[c-1].enddate,MileRate:a.expenseconfig[c-1].MileRate,TrailerRate:a.expenseconfig[c-1].TrailerRate,OverAgeWarning:a.expenseconfig[c-1].OverAgeWarning,OverAgeError:a.expenseconfig[c-1].OverAgeError,OverAgeDays:a.expenseconfig[c-1].OverAgeDays}),a.expenseconfigdata.push(b),angular.extend(b,{id:c}),a.updateconfigdata(),console.log("save ",b,c,a.expenseconfigdata)},a.removeConfig=function(b){a.expenseconfig.splice(b,1),a.updateconfigdata()},a.addConfig=function(){var b=0;void 0!==a.expenseconfig?(b=a.expenseconfig.length+1,a.inserted={id:a.expenseconfig.length+1,startdate:"",enddate:"",MileRate:0,TrailerRate:0,OverAgeWarning:0,OverAgeError:0,OverAgeDays:0},console.log("good")):(console.log("emo"),a.expenseconfig=[],a.inserted={id:1,startdate:"",enddate:"",MileRate:0,TrailerRate:0,OverAgeWarning:0,OverAgeError:0,OverAgeDays:0}),a.expenseconfig.push(a.inserted)},f(),a.GoBack=function(){e.path("/expense/viewexpense")},a.updateconfigdata=function(){a.userName=c.getUserData();var d=a.userName.name.first+" "+a.userName.name.last,e=new Date,g="";g=e.getHours()>12?e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+(e.getHours()-12)).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+" PM":e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+" AM",a.ConfigLog.push({StatusBy:d,StatusDate:g});for(var h=0;h<a.ConfigLog.length;h++)null!=a.ConfigLog[h]&&delete a.ConfigLog[h].$$hashKey;for(var h=0;h<a.expenseconfig.length;h++)null!=a.expenseconfig[h]&&delete a.expenseconfig[h].$$hashKey;a.config={Expense:a.expenseconfig,ExpenseLog:a.ConfigLog},b.updateData("/Config/",a.config),swal({text:"Updated Expense Config",type:"success",timer:2500}),f(),a.buildConfigData()},a.buildConfigData=function(){angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#ConfigStatusTable"))&&a.EVTable.destroy(),a.EVTable=$("#ConfigStatusTable").removeAttr("width").DataTable({responsive:!0,autoWidth:!1,data:a.ConfigLog,scrollY:"200px",scrollCollapse:!0,paging:!1,columns:[{data:"StatusDate",title:"Status Date",width:"70px"},{data:"StatusBy",title:"Status By",width:"90px"}],columnDefs:[{targets:0,width:"25%"},{targets:1,width:"35%"}],order:[[0,"desc"]]})})}}]),angular.module("ohanaApp").run(["$templateCache",function(a){"use strict";a.put("views/chapters.html",'<!DOCTYPE html> <div class="container"> <h1>Heroes on the Water Chapters</h1> <form class="form-inline"> <div class="form-group"> <label for="eventName" control-label>Keyword</label> <input type="text" class="form-control" ng-model="keywordFilter"> </div> <div class="form-group"> <label for="eventName" control-label>Zip Code</label> <input type="text" class="form-control" ng-model="locationFilter"> </div> </form> <div class="row"> <div class="col-sm-12"> <!--<ui-gmap-google-map center=\'map.center\' zoom=\'map.zoom\'>\r\n				<ui-gmap-markers models="filteredMarkers" coords="\'self\'" icon="\'icon\'" click="onClick">\r\n					<ui-gmap-windows show="show" templateUrl="\'templateUrl\'" templateParameter="\'templateParameter\'">\r\n				                <div ng-non-bindable>{{title}}</div>\r\n				            </ui-gmap-windows>\r\n				        </ui-gmap-markers>\r\n			</ui-gmap-google-map>--> </div> </div> <div ng-show="filteredMarkers.length"> <div class="row"> <div class="col-sm-12"> <h1>Chapters</h1> </div> </div> <div class="row" ng-repeat="chapter in filteredMarkers"> <div class="col-sm-12"> <h4><a href="{{chapter.url}}" target="_blank">{{chapter.name}}</a> <p>{{chapter.city}}, {{chapter.state}} {{chapter.zip}}</p> <p>{{chapter.contactName}}</p> <p>{{chapter.contactEmail}}</p> </h4></div> </div> </div> <div class="row" ng-hide="filteredMarkers.length"> <h2>Your search did not yield any results. Please try again.</h2> </div> </div>'),
a.put("views/expense/expenseconfig.html",'<div class="container" ng-init="loadexpenseconfig()"> <div class="panel panel-primary"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">HOW Expense Configuration</h3> </div> <div> <table class="table table-striped table-bordered"> <thead> <tr> <th>Valid From</th> <th>Valid To</th> <th>Mile Rate ($)</th> <th>Trailer Mile Rate ($)</th> <th class="redwarning">Over Age Warning (days)</th> <th class="rederror"><b>Over Age Need Attention (days)</b></th> <th class="rederror"><b>Over Age Days</b></th> <th class="col-xs-2">Edit</th> </tr> </thead> <tbody> <tr ng-repeat="item in expenseconfig "> <td> <a e-style="width: 90px " href="#" editable-bsdate="item.startdate " e-is-open="opened.$data " e-ng-click="open($event, \'$data\') " e-datepicker-popup="dd-MMMM-yyyy "> {{ (item.startdate | date:"MM/dd/yyyy ") || \'empty\' }} </a> </td> <td> <a e-style="width: 90px " href="#" editable-bsdate="item.enddate " e-is-open="opened.$data " e-ng-click="open($event, \'$data\') " e-datepicker-popup="dd-MMMM-yyyy "> {{ (item.enddate | date:"MM/dd/yyyy ") || \'empty\' }} </a> </td> <td> <input id="MileRate" name="MileRate" class="textboxsize" ng-model="item.MileRate " type="text " format-as-currency> </td> <td> <input id="TrailerRate" name="TrailerRate" class="textboxsize" ng-model="item.TrailerRate " type="text " format-as-currency> </td> <td> <input ng-model="item.OverAgeWarning " name="OverAgeWarning " class="textboxsize" placeholder="30 " ng-pattern="/^[0-9]{1,7}$/ " type="number "> </td> <td> <input ng-model="item.OverAgeError " name="OverAgeError " class="textboxsize" placeholder="45 " ng-pattern="/^[0-9]{1,7}$/ " type="number "> <p ng-if="item.OverAgeWarning> item.OverAgeError" class="field-feedback"> Should be greater than Over Age Warning (days) </p> </td> <td> <input ng-model="item.OverAgeDays " name="OverAgeDays " class="textboxsize" placeholder="60 " ng-pattern="/^[0-9]{1,7}$/ " type="number "> <p ng-if="item.item.OverAgeError> item.OverAgeDays" class="field-feedback"> Should be greater than Over Age Attention (days) </p> </td> <td class="col-xs-2"> <!-- form --> <form editable-form name="rowform" onbeforesave="saveConfig($data,item.id)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == item"> <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary"> save </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default"> cancel </button> </form> <div ng-show="!rowform.$visible"> <input type="button" class="btn btn-primary" ng-click="rowform.$show()" value="Edit"> <input type="button" class="btn btn-danger" ng-click="removeConfig($index)" value="Delete"> </div> </td> </tr> </tbody></table> <input type="button" class="btn btn-primary" ng-click="addConfig()" value="Add Row"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back to View Expense List "> </div> </div> <div class="panel panel-primary"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Expense Configuration Change Log</h3> </div> <div class="panel-body fixed-panel"> <table id="ConfigStatusTable" class="display table table-bordered responsive" cellspacing="0" width="100%"> </table> </div> </div> </div>'),a.put("views/expense/expensedetail.html",'<div class="container" ng-init="loadexpensedata()"> <form id="ExpDetail" name="ExpDetail" method="post" class="form-inline" novalidate> <div class="form-group row expense_pad1"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back to Expense List"> </div> <div class="panel panel-default" ng-repeat="dexedit in expense"> <div class="panel-heading clearfix"> <b> <h3 class="panel-title pull-left">Expense Detail {{EditMode}}</h3></b> </div> <div class="form-group form-inline labeldisplay"> <div class="form-group row"> <label for="leventdate" class="col-xs-6 col-form-label">Event Date</label> <div class="col-xs-10"> <label id="leventdate" class="form-control" placeholder="0" ng-model="dexedit.ventdate"> {{dexedit.eventdate}}</label> </div> </div> <div class="form-group row"> <label for="lchapter" class="col-xs-6 col-form-label">Chapter Name </label> <div class="col-xs-10"> <label id="lchapter" class="form-control" ng-model="dexedit.Chapter"> {{dexedit.Chapter}}</label> </div> </div> <div class="form-group row"> <label for="ltotalcost" class="col-xs-8 col-form-label">Total Expense</label> <div class="col-xs-10"> <label id="ltotalcost" class="form-control" ng-model="dexedit.Amount"> {{ ((dexedit.Line[0].Quantity * dexedit.Line[0].Rate) + (dexedit.Line[1].Quantity * dexedit.Line[1].Rate) + TotalLineCost ) | currency}} </label> </div> </div> <div class="form-group row"> <label for="lsubmitby" class="col-xs-6 col-form-label">Created By</label> <div class="col-xs-10"> <label id="lsubmitby" class="form-control" ng-model="dexedit.SubmitBy"> {{dexedit.SubmitBy}}</label> </div> </div> <div class="form-group row"> <label for="lsubmitdate" class="col-xs-6 col-form-label">Created On</label> <div class="col-xs-10"> <label id="lsubmitdate" class="form-control" ng-model="dexedit.SubmitDate"> {{dexedit.SubmitDate}}</label> </div> </div> <div class="form-group row"> <label for="lsubmitaddress" class="col-xs-6 col-form-label">Address</label> <div class="col-xs-12"> <label id="lsubmitaddress" class="form-control" ng-model="dexedit.SubmitAddress"> <!-- <style=" word-wrap: break-word"> --> {{dexedit.SubmitAddress}}</label> </div> </div> <div class="form-group row"> <label for="lPaymentStatus" class="col-xs-8 col-form-label">Payment Status</label> <div class="col-xs-10"> <label id="lPaymentStatus" class="form-control" ng-model="dexedit.PaymentStatus"> {{dexedit.PaymentStatus}}</label> </div> </div> <div class="form-group row expense_pad1" ng-show="(dexedit.PaymentStatus!=\'Over Age\' &&  dexedit.PaymentStatus!=\'Paid\')"> <button class="btninfo" type="button" class="btn btn-default" title="Payment Status Log" ng-click="openPaymentStatusLog()">Payment Status Log</button> </div> </div> <fieldset ng-disabled="OverageDisable"> <div class="list-group-item"> <div class="form-group row"> <label for="lDescription" class="col-xs-12 col-form-label">Business purpose, Origin and Destination</label> <div class="col-md-8"> <input id="lDescription" ng-model="dexedit.Description" type="text" class="form-control" title="Business purpose, Origin & Destination" size="120" placeholder="Business purpose, Origin & Destination" required> </div> </div> </div> <div class="list-group-item"> <h4>Mileage for Travel</h4> <div class="form-group row"> <label for="lquantity1" class="col-xs-6 col-form-label">Miles Driven</label> <div class="col-xs-10"> <input id="lquantity1" ng-model="dexedit.Line[0].Quantity" name="miles" class="form-control" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="ExpDetail.miles.$error.pattern" class="field-feedback"> Enter miles driven > 0 </p></div> </div> <div class="form-group row"> <label for="lrate1" class="col-xs-6 col-form-label">Mile Rate</label> <div class="input-group"> <!-- <input id="lrate1" ng-model="dexedit.Line[0].Rate" name="milerate" class="form-control " placeholder="0.25" type="text" format-as-currency> --> <label id="lrate1" ng-model="dexedit.Line[0].Rate" name="milerate" class="form-control">{{ dexedit.Line[0].Rate | currency}}</label> </div> </div> <div class="form-group row"> <label for="lamount1" class="col-xs-6 col-form-label">Amount</label> <div class="input-group"> <label id="lamount1" class="form-control" placeholder="0" ng-model="exp.Line[0].Amount" name="Amount1">{{ (dexedit.Line[0].Quantity * dexedit.Line[0].Rate) | currency}}</label> </div> </div> </div> <div class="list-group-item"> <h4>Mileage for Trailer Hauling</h4> <div class="form-group row"> <label for="lquantity2" class="col-xs-6 col-form-label">Trailer Miles</label> <div class="col-xs-10"> <input id="lquantity2" ng-model="dexedit.Line[1].Quantity" name="trailermiles" class="form-control" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="ExpDetail.trailermiles.$error.pattern" class="field-feedback"> Enter trailer hauling miles > 0 </p> </div> </div> <div class="form-group row"> <label for="lrate2" class="col-xs-6 col-form-label">Mile Rate</label> <div class="input-group"> <!-- <input id="lrate2" ng-model="dexedit.Line[1].Rate" name="trailermilerate" class="form-control" placeholder="0.4" type="text" format-as-currency>\r\n --> <label id="lrate2" ng-model="dexedit.Line[1].Rate" name="trailermilerate" class="form-control">{{ dexedit.Line[1].Rate | currency}}</label> </div> </div> <div class="form-group row"> <label for="lamount2" class="col-xs-6 col-form-label">Amount</label> <div class="col-xs-10"> <label id="lamount2" class="form-control" placeholder="0" ng-model="exp.Line[1].Amount" name="Amount2">{{ (dexedit.Line[1].Quantity * dexedit.Line[1].Rate) | currency}}</label> </div> </div> </div> <div class="list-group-item"> <label for="" class="col-md-12" title="Other Expenses"> <h4>Other Expenses</h4> </label> <table class="table table-striped table-bordered"> <thead> <tr> <th> <input type="checkbox" ng-model="selectedAll" ng-click="checkAll()"> </th> <th>Description</th> <th>Amount</th> </tr> </thead> <tbody> <tr ng-repeat="Line in LineDetails"> <td> <input type="checkbox" ng-model="Line.selected"> </td> <td> <input type="text" size="60" class="form-control" ng-model="Line.Description" name="LineDescription" placeholder="Explanation of Other expenses" title="Explanation of Other expenses" required> </td> <td> <div class="input-group"> <input id="lineamount" name="lineamount" class="form-control" ng-model="Line.Amount" type="text" format-as-currency> </div> </td> </tr> </tbody> </table> <div id="OtherExpensebtn"> <input id="btn_addNew" ng-model="btn_addNew" type="submit" class="btn btn-primary btnalign" ng-click="addNew()" value="Add New"> <input id="btn_remove" ng-model="btn_remove" ng-hide="!LineDetails.length" type="button" class="btn btn-danger btnalign" ng-click="remove()" value="Remove"> </div> </div> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Bill Receipts</h3> </div> <div id="imagedisplay" class="form-group col-xs-12"> <div class="content panel-body-exp"> <div ng-repeat="vimage in vImageList"> <!-- <div ng-repeat="vimage in vimageurl"> --> <img id="image0" width="40%" height="40%" class="imagedisplay" ng-src="{{vimage.ImageSrc}}" ng-click="viewImage(vimage.ImageSrc);"> <button type="button " class="btn btn-danger btn-xs" ng-click="removeImage($index); "> <!-- <button type="button " class="btn btn-danger btn-xs " ng-click="removeImage(vimage.ImageName); "> --> <span class="glyphicon glyphicon-trash"></span> Remove{{$index}} </button> </div> <div class="form-group row btnalign" ng-show=" ((userRole==\'Participant\' || userRole==\'Volunteer\') && (paystat==\'Edit\'  || paystat==\'Resubmit\')) || ((userRole==\'Chapter Lead\' || userRole==\'National Staff\')  && (paystat==\'Edit\'  || paystat==\'Returned\' ||  paystat==\'Submitted\')) && useremail==expenseemail"> <label for="" class="col-md-12 col-form-label" title="Load supporting documents (images only) including paid bills, receipts, deposit slips. ">Load Additional supporting documents (images only)</label> <input id="fileimage" name="fileimage" type="file" ng-model="expensedocument" nv-file-select="" uploader="uploader" multiple accept="image/*" required title="  " ng-style="expensedocument?{\'color\':\'#333\'}:{\'color\':\'transparent\'}"> <p><b>Number of documents selected </b>- {{ uploader.queue.length }}</p> <p>Click "SAVE EXPENSE" button to upload all newly added documents </p> <div ng-repeat="item in uploader.queue"> <strong>{{ item.file.name }}</strong> <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, width: 350,height: 350 }"></div> <span ng-show="item.isSuccess "><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel "><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError "><i class="glyphicon glyphicon-remove"></i></span> <button type="button " class="btn btn-danger btn-xs" ng-click="item.remove() "> <span class="glyphicon glyphicon-trash"></span> Remove </button> </div> <div> </div> </div> </div> </div> </div> </fieldset> <!-- </div> --> <!-- {{userRole}} {{useremail}}{{expenseemail}}{{paystat}}{{iseditexist}}   paystat==\'Submitted\' ||--> <div ng-show="(useremail==expenseemail )" class="form-group col-xs-12 expense_pad"> <div class="form-group row col-xs-6" ng-show="((userRole==\'Participant\' || userRole==\'Volunteer\') &&  ( paystat==\'Edit\' ||paystat==\'Resubmit\')) || ((userRole==\'Chapter Lead\' || userRole==\'National Staff\') && (  paystat==\'Edit\' || paystat==\'Returned\') ) "> <input type="button" class="btn btn-primary" ng-click="updateexpense(\'update\')" ng-hide="paystat==\'Resubmit\'" value="Save Expense"> <input type="button" class="btn btn-primary" ng-click="updateexpense(\'update\')" ng-show="paystat==\'Resubmit\'" value="Resubmit Expense"> <input type="button" class="btn btn-primary" ng-click="updateexpense(\'submit\')" ng-show="(paystat==\'Edit\') " value=" Submit Expense"> <input type="button" class="btn btn-primary" ng-click="deleteexp()" ng-show="( paystat==\'Pending\' || paystat==\'Edit\') " value="Delete Expense"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Cancel"> </div> <div class="form-group row col-xs-6" ng-hide="((useremail==expenseemail ) && ( paystat==\'Edit\' || paystat==\'Resubmit\' || paystat==\'Returned\')  ) || paystat==\'Paid\' || paystat==\'Over Age\'"> <!-- ng-show="iseditexist ==\'false\' "> --> <!-- && (paystat==\'Pending\' || paystat==\'Resubmit\'  || paystat==\'Submitted\' || paystat==\'Returned\')"> --> <input type="button" class="btn btn-primary" value=" Recall Expense" title="Recall expense for Edit" ng-click="RecallExpense(dexedit.BillId, \'Edit\', \'Expense recalled by Orignator\')"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back"> </div> <!--   <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back" ng-show="( iseditexist ==\'true\' && (userRole==\'Participant\' || userRole==\'Volunteer\') &&  (paystat==\'Submitted\' || paystat==\'Returned\' || paystat==\'Pending\' ))"> --> </div> <div ng-show="userRole==\'National Staff\'   &&  useremail!=expenseemail && (paystat==\'Pending\' || paystat==\'Edit\' || paystat==\'Resubmit\')"> <input type="button " class="btn btn-primary" ng-click="GoBack() " value="Go Back "> </div> <div ng-hide="useremail==expenseemail || paystat==\'Edit\'  "> <div class="panel panel-default" ng-hide="(userRole==\'Participant\' || userRole==\'Volunteer\' ) || (userRole==\'Chapter Lead\' && (paystat==\'Submitted\' || paystat==\'Returned\' ||paystat==\'Edit\' ) && useremail==expenseemail)  || paystat==\'Over Age\' || paystat==\'Paid\' || (userRole==\'National Staff\'   && (useremail==expenseemail || paystat==\'Pending\' || paystat==\'Resubmit\'))"> <!-- <div class="panel panel-default "> --> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Payment Status Review</h3> </div> <!-- <ng-show="(userRole==\'Chapter Lead\' && (paystat==\'Pending\' || paystat==\'Returned\')) " > --> <div class="content panel-body-exp" class="form-group col-xs-12"> <!-- <fieldset id="payment_status"> --> <div ng-repeat="paystatus in paystatuslist" class="radiofieldgroup"> <input type="radio" ng-model="dexedit.PaymentStatus" name="name" value="{{paystatus.name}} " required> {{paystatus.name}} </div> <!-- </fieldset> --> <div class="form-group row"> <label for="lpaystatusdescription" class="col-xs-12 col-form-label">Payment Status NOTES:</label> <div class="col-md-12 inputtextpad"> <input id="lpaystatusdescription" ng-model="dexedit.PayStatusDescription" type="text" class="form-control" title="Payment Status NOTES - Explain the reason for changing payment status " size="120" placeholder="Explain the reason for changing payment status" required> </div> </div> <input id="paymentstatusbtn" name="paymentstatusbtn" type="button" ng-click="UpdatePaymentStatus(dexedit.BillId, dexedit.PaymentStatus, dexedit.PayStatusDescription)" class="btn btn-primary" value="Status Update"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Cancel"> </div> </div> </div> <div class="panel panel-default" ng-show="(paystat==\'Over Age\' || paystat==\'Paid\' ) "> <h3 class="modal-title" id="modal-title ">Payment Status Log</h3> <div class="modal-body" id="modal-body "> <div> <table class="table table-striped table-bordered"> <thead> <tr> <th>Date</th> <th>Updated By</th> <th>Role</th> <th>Reason</th> <th>Status Changed to</th> </tr> </thead> <tbody> <tr ng-repeat="item in PayStatusLogList "> <td> {{item.PayStatusDate}} </td> <td> {{item.PayStatusBy}} </td> <td> {{item.PayRole}} </td> <td> {{item.PayStatusDescription}} </td> <td> {{item.PayStatus}} </td> </tr> </tbody> </table> </div> </div> <div class="form-group row col-xs-4 divhide" id="divgoback "> <input type="button " class="btn btn-primary" ng-click="GoBack() " value="Go Back "> </div> </div> </div></form> </div> <script type="text/ng-template " id="myModalContent.html "><div class="modal-header ">\r\n            <h3 class="modal-title " id="modal-title ">Payment Status Log</h3>\r\n        </div>\r\n        <div class="modal-body " id="modal-body ">\r\n            <div>\r\n                <table class="table table-striped table-bordered ">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Date</th>\r\n                            <th>Updated By</th>\r\n                            <th>Role</th>\r\n                            <th>Reason</th>\r\n                            <th>Status Changed to</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="item in PayStatusLogList ">\r\n                            <td>\r\n                                {{item.PayStatusDate}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayStatusBy}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayRole}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayStatusDescription}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayStatus}}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div class="modal-footer ">\r\n            <button class="btn btn-primary " type="button " ng-click="ok() ">CLOSE</button>\r\n        </div></script>'),a.put("views/expense/newexpense.html",'<div class="container"> <form id="newExpenseform" name="newExpenseform" method="post" class="form-inline" novalidate> <div class="panel panel-default"> <div class="panel-heading clearfix expense-panel-heading"> <h3 class="panel-title pull-left">Create New Expense</h3> </div> <div class="list-group-item"> <div class="form-group row"> <label for="exp.eventdate" class="col-xs-6 col-form-label">Event Date</label> <div class="col-xs-10"> <div class="input-group"> <input id="exp.eventdate" type="text" class="form-control expenseInput" ng-model="exp.eventdate" is-open="popup.opened" ng-required="true" datepicker-options="dateOptions" close-text="Close" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="dateopen()" title="Event Date - Expenses can only be created for events 60 days prior to current date"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> </div> </div> </div> <div class="list-group-item row"> <div class="form-group col-lg-6"> <label class="col-form-label">Miles Driven * </label> <div> <input ng-model="exp.Line[0].Quantity" name="miles" class="form-control expenseInput" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="newExpenseform.miles.$error.pattern" class="field-feedback"> - Enter miles driven > 0 - </p> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Mile Rate</label> <div> <label class="form-control exp_format2" ng-model="exp.Line[0].Rate" name="milerate">{{exp.Line[0].Rate| currency}}</label> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Mileage Amount</label> <div> <label class="form-control exp_format2" placeholder="0" ng-model="exp.Line[0].Amount" name="Amount1">{{ (exp.Line[0].Quantity * exp.Line[0].Rate) | currency}}</label> </div> </div> </div> <div class="list-group-item row"> <div class="form-group col-lg-6"> <label class="col-form-label">Trailer Miles * </label> <div> <input ng-model="exp.Line[1].Quantity" name="trailermiles" class="form-control expenseInput" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="newExpenseform.trailermiles.$error.pattern" class="field-feedback"> Enter trailer hauling miles > 0 </p> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Trailer Mile Rate</label> <div> <label class="form-control exp_format2" ng-model="exp.Line[1].Rate" name="trailermilerate">{{exp.Line[1].Rate| currency}}</label> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Trailer Mileage Amount</label> <div> <label class="form-control" placeholder="0" ng-model="exp.Line[1].Amount" name="Amount2">{{ (exp.Line[1].Quantity * exp.Line[1].Rate) | currency}}</label> </div> </div> </div> <div class="list-group-item"> <label for="" class="col-md-12 col-form-label" title="Other Expenses"> <h4>Other Expenses</h4> </label> <table class="table table-striped table-bordered"> <thead> <tr> <th> <input type="checkbox" ng-model="selectedAll" ng-click="checkAll()"> </th> <th>Description</th> <th>Amount</th> </tr> </thead> <tbody> <tr ng-repeat="Line in LineDetails"> <td> <input type="checkbox" ng-model="Line.selected"> </td> <td> <input type="text" size="80" class="form-control expenseInput" ng-model="Line.Description" name="LineDescription" placeholder="Explanation of Other expenses" title="Explanation of Other expenses" required> </td> <td> <input id="lineamount" name="lineamount" class="form-control" ng-model="Line.Amount" type="text" format-as-currency> </td> </tr> </tbody> </table> <div class="form-group"> <input type="submit" class="btn btn-primary btnalign" ng-click="addNew()" value="Add New"> <input ng-hide="!LineDetails.length" type="button" class="btn btn-danger btnalign" ng-click="remove()" value="Remove"> </div> </div> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Bill Receipts</h3> </div> <div id="imagedisplay" class="form-group col-xs-12"> <div class="content load-image-group"> <span> <strong>Load supporting documents (images only) * </strong> </span> <input id="fileimage" name="fileimage" class="expenseInput" type="file" ng-model="expensedocument" nv-file-select="" uploader="uploader" multiple accept="image/*" required title="  " ng-style="expensedocument?{\'color\':\'#333\'}:{\'color\':\'transparent\'}"> <p><b>Number of documents selected </b>- {{ uploader.queue.length }}</p> <div ng-repeat="item in uploader.queue"> <strong>{{ item.file.name }}</strong> <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, width: 350,height: 350 }"></div> <span ng-show="item.isSuccess "><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel "><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError "><i class="glyphicon glyphicon-remove"></i></span> <button type="button " class="btn btn-danger btn-xs" ng-click="item.remove() "> <span class="glyphicon glyphicon-trash"></span> Remove </button> </div> </div> </div> </div> <p>&nbsp;</p> <div class="form-group btnalign"> <label class="col-md-12 col-form-label">Business purpose, Origin and Destination * </label> <div class="col-md-12"> <input name="Description" ng-model="exp.Description" type="text" class="form-control expenseInput" title="Business purpose, Origin & Destination" size="120" placeholder="Business purpose, Origin & Destination" required ng-minlength="3"> <p ng-if="newExpenseform.Description.$invalid" class="field-feedback"> Enter description for your expense </p> <p ng-show="newExpenseform.Description.$error.minlength" class="field-feedback">Description is too short.</p> </div> </div> <div class="panel-body-exp btnalign"> <span> * Denotes a required field </span> <br> <button class="btn btn-primary ur_format_button" ng-click="confirmnewexpense() " type="submit ">Submit Expense</button> <input type="button" class="btn btn-primary" ng-click="saveitforlater()" ng-hide="isEditexist==\'true\'" title="Save current expense enteries for later submission" value="Save it for Later"> <input type="button" class="btn btn-primary" ng-click="ClearFields()" value="Clear"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Cancel"> </div> </div> </form> </div>'),a.put("views/expense/overview.html",'<div class="container" ng-init="viewexpensedash()" ng-controller="ExpenseOverviewCtrl"> <form id="expense" name="expense" method="post" class="tab-form-demo"> <div class="container"> <div class="panel-body fixed-panel"> <div> <input type="button" class="btn btn-primary" ng-click="ViewExpenseList()" value="View Expense List"> <input type="button" class="btn btn-primary" ng-click="neweexpense()" value="New Expense"> </div> <!-- <div class="btn btn-primary " ng-repeat="dash in editstatus "> --> <div class="btnalignmore form-group row" ng-repeat="dash in editstatus "> <a class="blinkinfo btn-danger" ng-show="useremail == dash.EmailID" ng-click="Showmeedit(dash.BillId)">Submit (Days to Over Age - {{dash.OverAge}}) </a> </div> <a class="blinkinfo btn-danger btn btnalignmore" ng-show="resubmitcnt > 0" ng-click="Showresubmit()">Re-Submit - {{resubmitcnt}}</a> <!-- </div> --> </div> <div class="row" ng-show="editstatus.OverAge > 0 && useremail == editstatus.EmailID"> <div class="col-sm-12"> <div class="panel panel-danger"> <div class="panel-heading"> <h3 class="panel-title">Expense Alert: Need your attention</h3> </div> <div class="panel-body fixed-panel"> <div class="form-group row" ng-repeat="dash in editstatus " ng-show=" userRole!=\'National Staff\'  "> <a class="blinkinfo btn-danger btn btnalignmore" ng-show="dash.OverAge > 0 && useremail == editstatus.EmailID" ng-click="Showmeedit(dash.BillId)">Submit (Days to Over Age - {{dash.OverAge}}) </a> <a class="blinkinfo btn-danger" ng-show="dash.OverAge < 1 && useremail != editstatus.EmailID" ng-click="Showmeedit(dash.BillId)">Submit (Currently Over Aged) </a> </div> <div class="form-group row"> <a class="blinkinfo btn-danger btn btnalignmore" ng-show="resubmitcnt > 0" ng-click="Showresubmit()">Re-Submit - {{resubmitcnt}}</a> </div> </div> </div> </div> </div> <div class="form-group row"> <!-- ng-hide="(userRole==\'Participant\' || userRole==\'Volunteer\' )"> --> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Payment Status Count</h3> </div> <div class="panel-body fixed-panel"> <table id="ChapterViewTable" class="display table table-bordered responsive" cellspacing="0" width="100%"> </table> </div> </div> <div class="form-group row"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Expense By Chapter with Payment Status Filter</h3> </div> <div class="panel-body fixed-panel"> <div class="form-group row"> <label ng-repeat="paystatus in paystatuslist" class="checkboxgroup"> <input type="checkbox" name="selectedpaystatus" value="{{paystatus}}" ng-checked="selectedpaystatus.indexOf(paystatus) > -1" ng-click="paystatusSelection(paystatus)"> {{paystatus}} </label> </div> <div> <table id="ExpenseViewTable" class="display table table-bordered responsive" cellspacing="0" width="100%"> </table> </div> </div> </div> <div class="row"> <uib-tabset active="activeJustified" justified="true" width="600px"> <uib-tab index="0" heading="Payment Status Summary"> <div class="col-md-6"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Expense by Payment Status</h3> </div> <div class="panel-body fixed-panel"> <canvas id="piechart " class="chart chart-pie chart-xs ng-isolate-scope" chart-data="piedata " chart-labels="pielabels " chart-options="options " height="130 " width="130 " chart-colors="piecolor "> </canvas> </div> </div> </div> <div class="col-md-6"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Expense by Payment Status</h3> </div> <div class="panel-body fixed-panel"> <table class="table table-striped table-bordered"> <thead> <tr> <th><b>Payment Status</b></th> <th><b>Expense Count</b></th> </tr> </thead> <tbody> <tr ng-repeat="item in expensedash "> <td> {{item.Label}} </td> <td> {{item.Data}} </td> </tr> <tr> <td> <b>Total</b> </td> <td> <span> {{TotalExpenseCount}} </span> </td> </tr> </tbody> </table> </div> </div> </div> </uib-tab> <uib-tab index="1" heading="Payment Status By Chapter" ng-hide="(userRole==\'Participant\' || userRole==\'Volunteer\' )"> <div ng-show="userRole==\'National Staff\'" class="form-group row-fluid col-lg-12"> <div class="form-group row"> <label for="selectedchapter" class="col-xs-6 col-form-label">Chapter List</label> <div class="input-group"> <select class="form-control col-md-6" ng-model="listS" id="selectedchapter" name="selectedchapter" title="Select Chapter Name"> <option value="" selected>All Chapters</option> <option ng-repeat="chapter in  PayStatusCountData  " value="{{chapter.Chapter}}">{{chapter.Chapter}}</option> </select> </div> </div> <div class="form-group row"> <label for="region" class="col-xs-6 col-form-label">Region List</label> <div class="input-group"> <select class="form-control col-md-6" ng-model="region" id="selectedregion" name="selectedregion" title="Select Chapter Name"> <option value="" selected>All Regions</option> <option ng-repeat="chapter in  PayStatusCountData  " value="{{chapter.Region}}">{{chapter.Region}}</option> </select> </div> </div> </div> <div> <!--             <div class="panel panel-primary chapter-panel">\r\n                                <div class="panel-heading chapter-panel">\r\n                                    <h3 class="panel-title">Expense by Payment Status</h3>\r\n                                </div>\r\n                                <div class="panel-body chapter-panel scroll-panel"> --> <table class="table table-striped table-bordered"> <thead> <tr> <th><b>Region</b></th> <th><b>Chapter</b></th> <th><b>Edit</b></th> <th><b>Pending</b></th> <th><b>Resubmit</b></th> <th><b>Submitted</b></th> <th><b>Returned</b></th> <th><b>Paid</b></th> <th><b>Over Age</b></th> </tr> </thead> <tbody> <tr ng-repeat="item in PayStatusCountData | filter: {Chapter: listS} | filter: {Region: region}"> <td> {{item.Region}} </td> <td> {{item.Chapter}} </td> <td> {{item.Edit}} </td> <td> {{item.Pending}} </td> <td> {{item.Resubmit}} </td> <td> {{item.Submitted}} </td> <td> {{item.Returned}} </td> <td> {{item.Paid}} </td> <td> {{item.OverAge}} </td> </tr> <tr> <td> </td> <td> <b>Total</b> </td> <td> {{gettotaldata.Edit}} </td> <td> {{gettotaldata.Pending}} </td> <td> {{gettotaldata.Resubmit}} </td> <td> {{gettotaldata.Submitted}} </td> <td> {{gettotaldata.Returned}} </td> <td> {{gettotaldata.Paid}} </td> <td> {{gettotaldata.OverAge}} </td> </tr> </tbody> </table> <!--   </div>\r\n                            </div> --> </div> </uib-tab> <uib-tab index="2 " heading="By Event Month "> <div class="col-sm-12"> <div class="panel panel-primary chapter-panel"> <div class="panel-heading"> <h3 class="panel-title">Expense by Event Month</h3> </div> <div class="panel-body fixed-panel chapter-panel"> <canvas id="line " class="chart chart-line" chart-data="data1 " chart-labels="labels2 " chart-series="series1 " chart-options="options1 " width="250px " height="200px "> </canvas> </div> </div> </div> </uib-tab> <uib-tab index="3 " heading="By Expense Amount "> <div class="col-sm-12"> <div class="panel panel-primary chapter-panel"> <div class="panel-heading"> <h3 class="panel-title">Expense Amount by Event Month</h3> </div> <div class="panel-body fixed-panel chapter-panel"> <canvas id="line1 " class="chart chart-line" chart-data="data2 " chart-labels="labels1 " chart-series="series1 " chart-options="options1 " width="250px " height="200px "> </canvas> </div> </div> </div> </uib-tab> </uib-tabset> </div> </div> <!-- <div class="container ">\r\n    <div class="row ">\r\n        <div>\r\n        </div>\r\n    </div>\r\n</div>\r\n --> </div></div></form> </div>'),
a.put("views/expense/viewexpense.html",'<div class="container" ng-init="viewexpensedata()" ng-controller="ViewExpenseController"> <form id="viewExpenseform" name="viewExpenseform" method="post" class="form-inline" novalidate> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">View Expense {{HeadTitle}}</h3> </div> <div class="panel-body-exp"> <div class="form-group row expense_pad"> <label for="DateFilter" class="col-xs-6 col-form-label">Submit Date Range</label> <div class="col-xs-10"> <select class="form-control" ng-model="DateFilter" ng-change="DateFilterChange()" ng-options="DateRange.name for DateRange  in DateRangelist" name="DateFilter" title="Select quick DateFilter"> </select> </div> <label class="col-xs-6 expense_pad">{{disp_filterdate}}</label> </div> <div ng-show="DateFilter.name==\'Custom Range\'" class="form-group row"> <div class="form-group row expense_pad"> <label for="startdate" class="col-xs-2 col-form-label">From</label> <div class="col-xs-6"> <div class="input-group"> <input id="startdate" type="text" class="form-control" ng-model="startdate" is-open="popup.opened" ng-required="true" datepicker-options="dateOptions" close-text="Close" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats" ng-change="ExpenseSearch(\'normal\')"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="dateopen()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="col-md-4"> <span ng-show="viewExpenseform.startdate.$error.required && \r\n                            !viewExpenseform.startdate.$pristine"> Invalid or Empty from date </span> <span ng-show="viewExpenseform.startdate.$error.dateLowerThan"> From date must be greater than To date </span> </div> </div> </div> <div class="form-group row expense_pad"> <label for="enddate" class="col-xs-2 col-form-label">To</label> <div class="col-xs-6"> <div class="input-group"> <input id="enddate" type="text" class="form-control" ng-model="enddate" is-open="popup1.opened" ng-required="true" datepicker-options="dateOptions" close-text="Close" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats" date-lower-than="{{startdate| date:\'short\'}}" ng-change="ExpenseSearch(\'normal\')"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="dateopen1()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="col-md-4"> <span ng-show="viewExpenseform.enddate.$error.required && \r\n                            !viewExpenseform.startdate.$pristine"> Invalid or Empty from date </span> <span ng-show="viewExpenseform.enddate.$error.dateLowerThan"> From date must be lower than To date </span> </div> </div> </div> </div> <div class="form-group row expense_pad"> <label for="PayStatus" class="col-xs-6 col-form-label">Payment Status</label> <div class="col-xs-10"> <select class="form-control" ng-model="PayStatus" ng-options="status.name for status  in paystatuslist" name="PayStatus" title="Select Payment Status" ng-change="ExpenseSearch()"> </select> </div> </div> <div class="form-actions"> <img class="cursorPointer" src="/assets/images/expense/pdf.png" width="40" height="40" title="Create Expense Report" ng-click="CreateExpenseReport()"> <input type="button" class="btn btn-primary" ng-click="neweexpense()" value="New Expense"> <button class="btn btn-primary btn-danger" ng-show="userRole==\'National Staff\' || userRole==\'Chapter Lead\'" ng-click="filterPastDue()" title="Filters expenses that were submitted 30 days prior to date and still Overdue">Overdue Expenses</button> <!--  <a href=" #/expense_QBUpdate" title="QuickBooks Update" ng-show="userRole==\'National Staff\'">\r\n                        <img src="/assets/images/expense/QuickBooks.png" width="130" height="35" title="Go to QuickBooks Update Page" />\r\n                    </a> --> <img class="" src="/assets/images/expense/Pie.png" width="40" height="40" title="Quick Expense Overview" ng-click="openExpenseDash()" ng-mouseover="showPopover()" ng-mouseleave="hidePopover()"> <div class="form-group row btnalignmore" ng-repeat="dash in editstatus " ng-show="useremail != editstatus.EmailID"> <a class="blinkinfo btn-danger btn" ng-show="dash.OverAge > 0" ng-click="Showmeedit(dash.BillId)">Submit (Days to Over Age - {{dash.OverAge}}) </a> <a class="blinkinfo btn-danger" ng-show="dash.OverAge < 1" ng-click="Showmeedit(dash.BillId)">Submit (Currently Over Aged) </a> </div> <a class="swaltdr" title="Expense Configuration" ng-show="userRole==\'National Staff\'"> <img src="/assets/images/expense/config.png" width="50" height="40" title="Go to Expense Configuration Page" ng-click="ExpenseConfig()"> </a> </div> </div> </div> <!-- <div class="form-group row col-lg-12">\r\n            <input id=viewrow type="button" class="btn btn-primary " ng-click="ViewSelectedRow()" value="Pay Submitted Expense">\r\n        </div> --> <div class="table-responsive"> <table id="expenseTable" class="table table-bordered table-responsive table-hover" cellspacing="0" width="80%"> </table> </div> </form> </div> <script type="text/ng-template " id="myModalContent.html "><div class="modal-header ">\r\n        <h3 class="modal-title " id="modal-title ">Expense by Payment Status</h3>\r\n    </div>\r\n    <div class="modal-body " id="modal-body ">\r\n        <div>\r\n            <canvas id="piechart " class="chart chart-pie chart-xs ng-isolate-scope " chart-data="piedata " chart-labels="pielabels " chart-options="options " height="150 " width="150 " chart-colors="piecolor ">\r\n            </canvas>\r\n        </div>\r\n        <div>\r\n            <table class="table table-striped table-bordered ">\r\n                <thead>\r\n                    <tr>\r\n                        <th><b>Payment Status</b></th>\r\n                        <th><b>Expense Count</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr ng-repeat="item in expensedash ">\r\n                        <td>\r\n                            {{item.Label}}\r\n                        </td>\r\n                        <td>\r\n                            {{item.Data}}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <b>Total</b>\r\n                        </td>\r\n                        <td>\r\n                            <span> {{TotalExpenseCount}} </span>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="modal-footer ">\r\n            <button class="btn btn-primary " type="button " ng-click="ok() ">CLOSE</button>\r\n        </div></script>'),a.put("views/getinvolved.html",'<!DOCTYPE html><!--The get Inovlved page that has more information in expandable views  --> <div class="hero"> <img id="heroimg" src="/assets/images/getinvolved/getinvolved-splash.png" alt="Getinvolved Hero"> <img id="heroquote" src="/assets/images/getinvolved/quote2.png" alt="Getinvolved Quote"> <div id="herodesc2"> <img id="desctextbg2" src="/assets/images/whoweare/roundedrect.png" alt="Getinvolved Textbg"> <h1 class="desctext">Paddle. Fish. Heal.</h1> </div> <div id="herologo"> <img id="how-logomark2" src="/assets/images/logos/logo-md.png" alt="Getinvolved Logostamp"> </div> </div> <!-- end hero --> <div class="getinvolved-body"> <hr> <div id="getinvolved-text"> <h4>There are many ways you can help Heroes on the Water whether it is assisting with taking injured service men and women on kayak fishing excursions, helping with the administrative tasks of planning and carrying out an outing, assisting with registration or coordinating the food at an event, or to start up a Heroes on the Water Chapter in your area</h4> </div> </div> <!-- end whoweare-body --> <section class="strips"> <article class="strips__strip"> <div class="strip__content" ng-click="$scope.open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="participate">PARTICIPATE</h4> <div class="strip__inner-text"> <h2>PARTICIPATE</h2> <p>Participants receive basic kayak fishing and paddling instruction, angling clinics and paddling classes for participants with skill sets ranging from beginners to the most experienced paddlers. <br> <br> Our program is unique in that it is a long-term activity, not a one-time event. We believe that the effectiveness of the program is a direct result of engaging the wounded military personnel for the long-term.</p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="volunteer">VOLUNTEER</h4> <div class="strip__inner-text"> <h2>VOLUNTEER</h2> <p>The Heroes on the Water program is carried out across the country by dedicated volunteers seeking to make a difference in the lives of our warriors and their families. <br> <br> There are many ways you can help Heroes on the Water whether it is assisting with taking injured service men and women on kayak fishing excursions, helping with the administrative tasks of planning and carrying out an outing, assisting with registration or coordinating the food at an event, or to start up a Heroes on the Water Chapter in your area.</p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="sponsor">SPONSOR</h4> <div class="strip__inner-text"> <h2>SPONSOR</h2> <p>Our corporate partners provide Heroes On the Water with an opportunity to reach out to a variety of audiences with important information and to raise funds to support, education, training and events. In addition, the initiatives provide corporate supporters an opportunity to make a positive impact on the recovery of our injured soldiers and involve employees and consumers in the HOW movement. <br> <br> Want to be a part of something big? We know you do! And…it is tax deductible through Heroes on the Water’s current 501(c)(3). We offer a tiered sponsorship program and welcome entities of all sizes and structures to join our cause through a sponsor relationship. </p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="startachapter">START A CHAPTER</h4> <div class="strip__inner-text"> <h2>START A CHAPTER</h2> <p>Heroes on the Water is experiencing tremendous growth with individuals and groups in local areas across the country organizing to start a local chapter. <br> <br> Thank you for your interest in giving back to those who have given so much for us!</p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="inkindcontribution">IN-KIND CONTRIBUTION</h4> <div class="strip__inner-text"> <h2>IN-KIND CONTRIBUTION</h2> <p>In-kind donations of goods and services from individuals and organizations have made it possible for HOW to provide our program to wounded warriors and their families.</p> <br> <br> <p>In-kind goods that help provide the program include:</p> <ul style="list-style-position: inside"> <li>Kayak trailers, kayaks, paddles, PFDs, and kayak gear</li> <li>Fishing equipment and supplies including rods/reels and lures</li> <li>Food, snacks, and beverages for outings</li> </ul> <br> <br> <p>In-kind services that help support the program operation can include:</p> <ul style="list-style-position: inside"> <li>Printing services for banners, brochures, fliers</li> <li>Storage facilities for kayak equipment</li> </ul> </div> </div> </article> <i class="fa fa-close strip__close" ng-click="close()"></i> </section> <!-- end jumpbar --> <div class="donatebanner"> <img id="donatebg" src="/assets/images/getinvolved/donate-bg.png" alt="Whoweare Donatebg"> <div class="donatedescoverlay"> <div id="donatedesc"> <h4>Check out stories and updates from our team, partners and supporters</h4> <button ng-click="showDonate()" id="showDonateModal" style="margin-top:15px"> <h2>DONATE</h2> </button> </div> </div> </div> <!-- end donatebanner --> <master-footer></master-footer> <script>var Expand = (function() {\r\n    var tile = $(\'.strips__strip\');\r\n    var tileLink = $(\'.strips__strip > .strip__content\');\r\n    var tileText = tileLink.find(\'.strip__inner-text\');\r\n    var stripClose = $(\'.strip__close\');\r\n    //		var mobileStripClose = $(\'.strips .mobile_strip__close\');\r\n\r\n    var expanded = false;\r\n\r\n    var open = function() {\r\n\r\n        var tile = $(this).parent();\r\n\r\n        if (!expanded) {\r\n            tile.addClass(\'strips__strip--expanded\');\r\n            // add delay to inner text\r\n'+"            tileText.css('transition', 'all .6s .3s cubic-bezier(0.23, 1, 0.32, 1)');\r\n            stripClose.addClass('strip__close--show');\r\n            //				mobileStripClose.addClass('mobile_strip__close--show');\r\n            stripClose.css('transition', 'all .6s .3s cubic-bezier(0.23, 1, 0.32, 1)');\r\n            expanded = true;\r\n        }\r\n    };\r\n\r\n    var close = function() {\r\n        if (expanded) {\r\n            tile.removeClass('strips__strip--expanded');\r\n            // remove delay from inner text\r\n            tileText.css('transition', 'all 0.15s 0s cubic-bezier(0.23, 1, 0.32, 1)');\r\n            stripClose.removeClass('strip__close--show');\r\n            //				mobileStripClose.removeClass('mobile_strip__close--show');\r\n            stripClose.css('transition', 'all 0.2s 0s cubic-bezier(0.23, 1, 0.32, 1)')\r\n            expanded = false;\r\n        }\r\n    }\r\n\r\n    var bindActions = function() {\r\n        tileLink.on('click', open);\r\n        stripClose.on('click', close);\r\n    };\r\n\r\n    var init = function() {\r\n        bindActions();\r\n    };\r\n\r\n    return {\r\n        init: init\r\n    };\r\n\r\n}());\r\n\r\nExpand.init();</script>"),a.put("views/home.html",'<!DOCTYPE html> <div class="hero"> <img id="heroimg" src="/assets/images/home/home-splash.png" alt="Home Hero"> <div id="herotext"> <h2>HELP SOMEBODY WHO FOUGHT FOR PEACE, FIND IT.</h2> <button ng-click="videoToggle()" class="button-border"><i class="fa fa-play" style="margin-right:12px"></i>PLAY VIDEO</button> </div> <div id="overlay" ng-show="vidtoggle" class="fadein fadeout"> <iframe id="videoplayer" src="https://www.youtube.com/embed/iZQFKPaVNMQ?wmode=opaque&enablejsapi=1" frameborder="0" allowfullscreen></iframe> <button id="videoclose" ng-click="videoToggle()"><i class="fa fa-times fa-2x" aria-hidden="true"></i></button> </div> </div> <!-- end hero --> <div class="missionstats"> <div class="mission"> <img id="paint" src="/assets/images/home/paint.png" alt="paint"> <img id="paint2" src="/assets/images/home/paint2.png" alt="paint2"> <div class="h3"> <h3>Our mission is to help warriors relax, rehabilitate, and reintegrate through kayak fishing and the outdoors.</h3> </div> </div> <!-- end mission --> <div class="stats"> <div class="ring"> <img id="ring1" src="/assets/images/home/ring.png" alt="ring"> <div class="h5" style="padding-left: 20px"> <h5>62%</h5> </div> <h6>Reduction in Hypervigilance</h6> </div> <div class="ring"> <img id="ring2" src="/assets/images/home/ring.png" alt="ring"> <div class="h5" style=""> <h5>23,832</h5> </div> <h6>Warriors &amp; Family Members Served</h6> </div> <div class="ring"> <img id="ring3" src="/assets/images/home/ring.png" alt="ring"> <div class="h5" style="padding-left: 20px"> <h5>63%</h5> </div> <h6>Reduction in Avoidance Behavior</h6> </div> </div> <!-- end stats --> </div> <!-- end missionstats --> <div class="jumpbar"> <div class="column col1"> <img id="purpose-icon" src="/assets/images/home/purpose-icon.png" alt="purpose-icon"> <h6>Learn more about the HOW kayak fishing program for warriors and veterans.</h6> <a ng-href="#/whoweare"> <h2>OUR PURPOSE<i class="fa fa-arrow-circle-o-right fa-lg" style="margin-left: 10px" aria-hidden="true"></i></h2> </a> </div> <div class="column col2"> <img id="donate-icon" src="/assets/images/home/donate-icon.png" alt="donate-icon"> <h6>Your gift provides our program to warriors at no charge to them or their families.</h6> <a class="cursorPointer" ng-click="showDonate()"> <h2>DONATE<i class="fa fa-arrow-circle-o-right fa-lg" style="margin-left: 10px" aria-hidden="true"></i></h2> </a> </div> <div class="column col3"> <img id="events-icon" src="/assets/images/home/events-icon.png" alt="events-icon"> <h6>Check out all the fun happenings through our various chapters.</h6> <a ng-href="#/publicEvents"> <h2>EVENTS<i class="fa fa-arrow-circle-o-right fa-lg" style="margin-left: 10px" aria-hidden="true"></i></h2> </a> </div> </div> <!-- end jumpbar --> <div class="chaptersearch"> <div class="desc"> <h2>Over 55 chapters. Find one near you.</h2> </div> <div class="searchform"> <form name="searchForm" ng-submit="chapterSearch()" novalidate> <input type="text" name="chapter-name" placeholder="zip code" ng-model="zipCode"> <button type="submit"> <h4>SUBMIT</h4> </button> </form> </div> <img id="worldmap" src="/assets/images/home/worldmap.png" alt="worldmap"> </div> <!-- end chaptersearch --> <master-footer></master-footer>'),a.put("views/login.html",'<!DOCTYPE html> <body style="margin: auto"> <div class="" style="margin: auto; max-width: 350px"> <h3>Login</h3> <form name="loginForm" style="margin-bottom:20px" ng-controller="LoginCtrl" ng-submit="loginForm.$valid && checkLogin(logObj)" novalidate> <div ng-show="loginForm.$invalid && loginForm.$submitted" class="alert alert-danger">Username/Email and password is required</div> <div class="form-group well"> <label>Username/Email</label> <input type="text" name="email" class="form-control" placeholder="email@address.com" ng-model="logObj.email" required> <span ng-show="logObj.email.$dirty && logObj.email.$error.required" class="help-block">Email is required</span> <br> <label>Password</label> <input type="password" name="password" class="form-control" ng-model="logObj.password" required> <span ng-show="logObj.password.$dirty && logObj.password.$error.required" class="help-block">Password is required</span> <br> <div class="form-actions"> <button type="submit" class="btn btn-primary">Login</button> <button type="button" class="btn btn-default" ng-click="passwordReset()">Password Reset</button> <button type="button" class="btn btn-default" ng-click="addUser()">Sign Up</button> <br> </div> </div> <div id="newUserForm" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <script type="text/ng-template" id="newUserDirectoryForm.html"></script> <!-- inject from newUserDirectoryForm.html --> </div> <!-- end modal-content --> </div> <!-- end modal-dialog --> </div> <!-- end newUserForm --> </form> </div> </body>'),a.put("views/manage/broadcasts.html",'<!DOCTYPE html> <div class="container"> <h3>Broadcasts</h3> <form class="form-horizontal"> <!-- Email To --> <div class="form-group"> <label class="col-sm-2 control-label">To</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="recipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> <!-- CC/BCC control --> <div class="col-sm-2"> <div class="btn-group btn-group-justified" role="group"> <div class="btn-group"> <button type="button" ng-click="toggleCC()" class="btn btn-default">CC</button> </div> <div class="btn-group"> <button type="button" ng-click="toggleBCC()" class="btn btn-default">BCC</button> </div> </div> </div> </div> <!-- Email CC --> <div class="form-group" ng-show="ccVisible"> <label class="col-sm-2 control-label">CC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="ccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email BCC --> <div class="form-group" ng-show="bccVisible"> <label class="col-sm-2 control-label">BCC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="bccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email Subject --> <div class="form-group"> <label for="eventName" class="col-sm-2 control-label">Subject</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventName" placeholder="Event Name" value=""> </div> </div> <!-- Email Send Date/Time --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Send Date</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="t" is-open="sendDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openSendDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="sendTime" style="margin-right: 12px">Send Time</label> <input class="form-control" ng-model="sendTime" ui-timepicker> </div> </div> </div> </div> <!-- Email Body --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Message</label> <div class="col-sm-10"> <summernote></summernote> </div> </div> <!-- Email Send --> <div class="form-group"> <div class="col-sm-offset-2 col-sm-7"> <button type="submit" class="btn btn-primary">Send</button> </div> </div> </form> </div>'),a.put("views/manage/chadmin.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <h3>Chapter Administration</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="addChapter()">Add New Chapter</button> <!-- <button class="btn btn-primary" ng-click="removeChapter()">Delete Chapter</button> --> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%"> <table id="chaptersTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div>'),a.put("views/manage/chapterchat.html",'<div class="container" id="chat_window" ng-init="init()"> <div class="row"> <div class="col-md-3"></div> <div class="col-md-5"> <div class="panel panel-primary"> <div class="panel-heading" id="accordion"> <span class="glyphicon glyphicon-comment"></span> {{currentChapter}} <div class="btn-group pull-right"> <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown"> <span class="glyphicon glyphicon-chevron-down"></span> </button> <ul class="dropdown-menu slidedown"> <li> <a ng-click="changeChapter()">Change Chapter</a> </li> </ul> </div> </div> <div class="panel" style="margin-bottom: 0px"> <div class="panel-body" style="word-break: break-all; min-height: 400px"> <div ng-repeat="n in chatLog" class="row"> <div class="message-container"> <div class="header"> <strong class="primary-font">{{n.name}}</strong> <small class="pull-right text-muted"> <span class="glyphicon glyphicon-time"></span> {{n.time | date : "short"}}</small> </div> <p> {{n.message}} </p> </div> </div> </div> <div class="panel-footer"> <div class="input-group"> <input id="btn-input" type="text" class="form-control input-sm" placeholder="Type your message here..." ng-model="newMessage"> <span class="input-group-btn"> <button class="btn btn-warning btn-sm" id="btn-chat" ng-click="sendMessage()">Send</button> </span> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/manage/dash.broadcasts.html",'<div> <h3 style="margin-top:0px">Broadcasts</h3> </div>'),a.put("views/manage/dash.html",'<!DOCTYPE html> <div class="container"> <h3>Dashboard</h3> <div class="row"> <!-- tabs left --> <div class="col-md-1"> <div class="tabbable tabs-left"> <ul class="nav nav-tabs"> <!--thad: active was removed until proper actions are taken ui-sref-active="active"--> <li class="active"><a ng-href="#/dash/upcoming-events" data-toggle="tab">Upcoming Events</a></li> <li><a ng-href="#/dash/broadcasts" data-toggle="tab">Broadcasts</a></li> <li><a ng-href="#/expense/overview" data-toggle="tab">Expense</a></li> </ul> </div> </div> <div class="col-md-1 spacercol"></div> <!-- content --> <div class="col-md-10"> <p>Volunteer Dashboard - "This is a landing site where volunteers can see the hours they have volunteered, the events they have attended, the next upcoming events, notifications, and a link to go to their training." </p> <p> Event Manager Dashboard - "This is a landing site where Event Managers can see an overview of their upcoming event (number of volunteers registered, number of volunteers) and a easy link to send a broadcast for that event. On this dashboard, Event Managers can also see other upcoming events, notifications, and link to their other management pages." </p> <p> Chapter Manager Dashboard - "This is a landing site where Chapter Managers can see an overview of their Chapter\'s next event (number of volunteers registered, number of volunteers) and an easy link to send a broadcast email for that event. On this dashboard, Chapter Managers can also see other upcoming events, notifications, and link to their other management pages." </p> <p> Region Manager Dashboard - "This is a landing site where Region Managers can see notifications for upcoming events for the chapters within the region. On this dashboard Region Managers can also see notifications and link to their other management pages." </p> <p> Admin Dashboard - "This is a landing site where Admins can see an overview of donations in the past month/past year, and the number of upcoming events per region. On this dashboard Region Managers can also see notifications and link to their other management pages." </p> <div ui-view=""> </div> </div> </div> </div>'),a.put("views/manage/dash.upcomingEvents.html",'<div> <h3 style="margin-top:0px">Upcoming Events</h3> </div>'),a.put("views/manage/directory.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <h3>Member Directory</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="roleChangeRequests()">Role Change Requests</button> </div> <div class="toolbar-left" style="float: left; margin-left: 5px"> <button class="btn btn-primary" ng-click="chapterStatus()">Chapter Status</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%"> <table id="membersTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> <div id="newUserForm" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <script type="text/ng-template" id="newUserDirectoryForm.html"></script> <!-- inject from newUserDirectoryForm.html --> </div> <!-- end modal-content --> </div> <!-- end modal-dialog --> </div> <!-- end newUserForm --> </div> <!-- end container -->'),a.put("views/manage/event.details.description.html",'<!DOCTYPE html> <form class="form-horizontal" name="eventDetailsDescription" ng-submit="saveEventDescription(eventDetailsDescription.$valid)"> <!-- Event Name --> <div class="form-group"> <label for="eventName" class="col-sm-2 control-label">Event Name*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventName" ng-model="newEventName" ng-required="true" placeholder="{{selectedEvent.name}}"> </div> </div> <!-- Location --> <div class="form-group"> <label for="eventLocation" class="col-sm-2 control-label">Location*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventLocation" ng-required="true" placeholder="Location" value="{{selectedEvent.location}}"> </div> </div> <!-- <!-- Start Date/Time --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Start Date*</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="startDate" is-open="startDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openStartDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="startTime" style="margin-right: 10px">Start Time*</label> <input class="form-control" ng-model="startTime" ng-required="true" ui-timepicker> </div> </div> </div> </div> <!-- End Date/Time --> <div class="form-group"> <label for="endDate" class="col-sm-2 control-label">End Date*</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="endDate" is-open="endDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openEndDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="endTime" style="margin-right: 15px">End Time*</label> <input class="form-control" ng-model="endTime" ng-required="true" ui-timepicker> </div> </div> </div> </div> --> <!-- Event Manager Selection --> <div class="form-group"> <label for="eventManager" class="col-sm-2 control-label">Manager*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventManager" ng-required="true" placeholder="Event Manager"> </div> </div> <!-- Event Description --> <div class="form-group"> <label for="eventDescription" class="col-sm-2 control-label">Description</label> <div class="col-sm-7"> <textarea rows="3" class="form-control" id="eventDescription" placeholder="Event Description"></textarea> </div> </div> <!-- Submit --> <div class="col-sm-offset-2"> <button type="submit" class="btn btn-primary" style="margin-left: 6px" ng-submit="saveEventDescription()">Save</button> </div> <div class="form-group"> <div class="col-md-2"></div> <p class="col-md-9">* indicates required field.</p> </div> <button ng-click="combineTimes()">blah</button> </form>'),a.put("views/manage/event.details.equipment.html",'<!DOCTYPE html> <div class="container"> <h3>Inventory</h3> <div style="clear: left; width: 100%; overflow:auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Reseve New Item</button> <button class="btn btn-primary" ng-click="remove()">Deregister</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%" ng-init="update()"> <table id="eventInventoryTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div>'),
a.put("views/manage/event.details.html",'<!DOCTYPE html> <div class="container"> <div class="row" style="margin-bottom: 10px"> <div class="col-md-1"> <button class="btn btn-default" ng-click="goBackToEvents()">Go Back</button> </div> <div class="col-md-10"> <h3 style="margin-left: 15px; margin-top: 3px">{{selectedEvent.name}}</h3> </div> </div> <div class="row"> <h3> <span class="label label-primary">Description: </span>{{selectedEvent.description}}</h3> <h3> <span class="label label-primary">Coordinator: </span>{{selectedEvent.eventManager}}</h3> <h3> <span class="label label-primary">Coordinator email: </span>{{selectedEvent.email}}</h3> <h3> <span class="label label-primary">Coordinator cell: </span>{{selectedEvent.mobileNumber}}</h3> <h3> <span class="label label-primary">Event Start Time: </span>{{selectedEvent.startTime | date:shortTime}}</h3> <!--<ul>\r\n            thad: active was removed until proper actions are taken ui-sref-active="active"\r\n            <li class="active"><a ng-href="#/description" data-toggle="tab">Description</a></li>\r\n            <li><a ng-href="#/volunteers" data-toggle="tab">Volunteers</a></li>\r\n            <li><a ng-href="#/participants" data-toggle="tab">Participants</a></li>\r\n            <li><a ng-href="#/inventory" data-toggle="tab">Inventory</a></li>\r\n            <li><a ng-href="#/notifications" data-toggle="tab">Notifications</a></li>\r\n        </ul>--> <!-- tabs left --> <!--<div class="col-md-1">\r\n            <div class="tabbable tabs-left">\r\n                <ul class="nav nav-tabs">\r\n                    thad: active was removed until proper actions are taken ui-sref-active="active""\r\n                    <li class="active"><a ng-href="#/description" data-toggle="tab">Description</a></li>\r\n                    <li><a ng-href="#/volunteers" data-toggle="tab">Volunteers</a></li>\r\n                    <li><a ng-href="#/participants" data-toggle="tab">Participants</a></li>\r\n                    <li><a ng-href="#/inventory" data-toggle="tab">Inventory</a></li>\r\n                    <li><a ng-href="#/notifications" data-toggle="tab">Notifications</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-1 spacercol"></div>--> </div> </div>'),a.put("views/manage/event.details.notifications.html",'<!DOCTYPE html> <form class="form-horizontal" name="eventDetailsNotifications" ng-submit="sendEventNotification(eventDetauilNotifications.$valid)"> <!-- Email To --> <div class="form-group"> <label class="col-sm-2 control-label">To*</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="recipient" ng-required="true" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> <!-- CC/BCC control --> <div class="col-sm-2"> <div class="btn-group btn-group-justified" role="group"> <div class="btn-group"> <button type="button" ng-click="toggleCC()" class="btn btn-default">CC</button> </div> <div class="btn-group"> <button type="button" ng-click="toggleBCC()" class="btn btn-default">BCC</button> </div> </div> </div> </div> <!-- Email CC --> <div class="form-group" ng-show="ccVisible"> <label class="col-sm-2 control-label">CC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="ccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email BCC --> <div class="form-group" ng-show="bccVisible"> <label class="col-sm-2 control-label">BCC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="bccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email Subject --> <div class="form-group"> <label for="subject" class="col-sm-2 control-label">Subject*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="subject" ng-required="true" placeholder="" value=""> </div> </div> <!-- Email Send Date/Time --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Send Date*</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="t" is-open="sendDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openSendDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="sendTime" style="margin-right: 12px">Send Time*</label> <input class="form-control" ng-model="sendTime" ng-required="true" ui-timepicker> </div> </div> </div> </div> <!-- Email Body --> <div class="form-group"> <label for="Message" class="col-sm-2 control-label">Message</label> <div class="col-sm-10"> <summernote></summernote> </div> </div> <!-- Email Send --> <div class="form-group"> <div class="col-sm-offset-2 col-sm-7"> <button type="submit" ng-submit="sendEventNotifciation()" class="btn btn-primary">Send</button> </div> </div> <div class="form-group"> <div class="col-md-2"></div> <p class="col-md-9">* indicates required field.</p> </div> </form>'),a.put("views/manage/event.details.participants.html",'<!DOCTYPE html> <div class="col-md-12"> <div style="clear: left; width: 100%; overflow:auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New</button> <button class="btn btn-primary" ng-click="remove()">Deregister</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%" ng-init="update()"> <table id="eventParticipantsTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div>'),a.put("views/manage/event.details.volunteers.html",'<!DOCTYPE html> <div class="col-md-12"> <div style="clear: left; width: 100%; overflow:auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New</button> <button class="btn btn-primary" ng-click="remove()">Deregister</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%" ng-init="update()"> <table id="eventVolunteersTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div> <!--\r\n	<div class="col-md-4" ng-repeat="volunteer in volunteerList">\r\n		<div class="card bg-info">\r\n			<h3>{{volunteer[1]}} {{volunteer[2]}}</h3>\r\n			<p>{{volunteer[4]}}</p>\r\n			<button class="btn btn-default" type="submit">Deregister</button>\r\n			<button class="btn btn-default" type="submit">View Volunteer Details</button>\r\n		</div>\r\n	</div>\r\n-->'),a.put("views/manage/events.html",'<style>.link_padding {\r\n    margin-top: 2px;\r\n    margin-bottom: 2px;\r\n}</style> <div class="container" ng-init="update()"> <h3>Manage Events</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom:10px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New Event</button> </div> <div class="toolbar-right" style="float: right"> Filter by: <select name="filter" id="filter" ng-model="filter" ng-options="ft for ft in filterTypes" ng-change="changeFilter()"></select> </div> </div> <form class="form-horizontal"> <div class="form-group"> <label class="control-label" for="fname">Search:</label> <div> <input id="fname" name="newQuery.search" type="text" placeholder="Enter query here" class="form-control input-md pull-left" ng-change="search()" ng-model="newQuery.search" ng-required="true" ng-model-options="{ debounce: 100 }"> </div> </div> </form> <div class="row event-row"> <div class="col-md-4" ng-repeat="event in eventList"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{event.name}}</h3> </div> <div class="list-group"> <div class="list-group-item"> <h6 class="list-group-item-text">Start Time</h6> <h4 class="list-group-item-heading">{{event.startTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">End Time</h6> <h4 class="list-group-item-heading">{{event.endTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Location</h6> <h4 class="list-group-item-heading">{{event.location}}</h4> </div> </div> <div class="panel-footer"> <a class="btn btn-primary link_padding" ng-click="manageEvent($index)" style="margin-left: 8px;display:inline-block"><i class="fa fa-pencil" style="padding-right: 5px"></i>Manage Event</a> <a class="btn btn-primary link_padding" ng-click="viewParticipants($index)" style="margin-left: 8px;display:inline-block"><i class="glyphicon glyphicon-user" style="padding-right: 5px"></i><span class="badge">{{getKeyLength(event.participants)}}</span> Participants</a> <!--Object.keys(event.participants).length--> <a class="btn btn-primary link_padding" ng-click="viewVolunteers($index)" style="margin-left: 8px;display:inline-block"><i class="glyphicon glyphicon-user" style="padding-right: 5px"></i><span class="badge">{{getKeyLength(event.volunteers)}}</span> Volunteers</a> <a class="btn btn-danger link_padding" ng-click="deleteEvent($index)" style="margin-left: 8px;display:inline-block">Delete</a> </div> </div> <!-- end panel --> </div> <!-- end event list --> <!--<canvas id=\'signatureCanvas\' width=\'300\' height=\'180\' style=\'border: 1px solid black;\'></canvas>\r\n        <div class=\'button-bar\'>\r\n'+"            <a class='button button-energized' ng-click='clearCanvas()'>Clear</a>\r\n            <a class='button button-balanced' ng-click='saveCanvas()'>Sign</a>\r\n        </div>\r\n        <br>\r\n        <h3>{{msg}}</h3>--> <!--<br>\r\n        <img ng-src='{{signature}}' /> {{id}}--> </div> <!-- end row --> </div> <!-- end container -->"),a.put("views/manage/hours.html",'<!DOCTYPE html> <div class="container"> <h3>My Hours</h3> </div>'),a.put("views/manage/inventory.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <h3>Inventory</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New</button> <button class="btn btn-primary" ng-click="remove()">Delete</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%"> <table id="inventoryTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> <div id="newItemForm" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <script type="text/ng-template" id="parts/newItemInventoryForm.html"></script> <!-- inject from newItemInventoryForm.html --> </div> <!-- end modal-content --> </div> <!-- end modal-dialog --> </div> <!-- end newItemForm --> </div> <!-- end container -->'),a.put("views/manage/profile.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">My Profile</h3> </div> <div class="list-group"> <div class="list-group-item"> <h6 class="list-group-item-text">User: </h6> <h4 class="list-group-item-heading"> First: <a id="profile_first_name" class="editable editable-click">{{profileData.name.first}}</a> <br> Last: <span id="profile_last_name" class="editable editable-click">{{profileData.name.last}}</span> </h4> <h4 class="list-group-item-heading">DOB: <span id="profile_dob" class="editable editable-click">{{( profileData.DOB | date:"dd/MM/yyyy")}}</span> </h4> <h4 class="list-group-item-heading">Gender: <span id="profile_gender" class="editable editable-click">{{profileData.gender}}</span> </h4> <h4 class="list-group-item-heading">Role: {{profileData.role}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Address: </h6> <h4 class="list-group-item-heading">Line 1: <span id="profile_addr1" class="editable editable-click">{{profileData.address.line1}}</span> </h4> <h4 class="list-group-item-heading">Line 2: <span id="profile_addr2" class="editable editable-click">{{profileData.address.line2}}</span> </h4> <h4 class="list-group-item-heading"> <span id="profile_city" class="editable editable-click">{{profileData.address.city}}</span>, <span id="profile_state" class="editable editable-click">{{profileData.address.state}}</span> <span id="profile_zip" class="editable editable-click">{{profileData.address.zip}}</span> </h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Contact: </h6> <h4 class="list-group-item-heading">Phone: <span id="profile_phone" class="editable editable-click">{{profileData.phone}}</span> </h4> <h4 class="list-group-item-heading">Email: <span>{{profileData.email}} <span> </span></span></h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Region/Chapter Information: </h6> <h4 class="list-group-item-heading" ng-click="changeChapter()">Primary Chapter: <label class="format-chapter-class">{{profileData.Chapter}} <label> </label></label></h4> <h4 class="list-group-item-heading">Secondary Chapter(s): <h6 class="list-group-item-heading" ng-repeat="Chapters in profileData.Chapters"> {{Chapters.chapter}} </h6> <button type="button" class="btn btn-default btn-sm" ng-click="editChapters()"> <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> </button> </h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Service Information: </h6> <h4 class="list-group-item-heading">Branch: <span id="profile_branch" class="editable editable-click">{{profileData.branch}}</span> </h4> <h4 class="list-group-item-heading">Years of Service: <span id="profile_years" class="editable editable-click">{{(profileData.years | number)}}</span> </h4> </div> </div> <div class="panel-footer" style="height:55px"> <a class="btn btn-primary pull-right" ng-click="roleChangeRequest()"><i class="fa fa-pencil" style="padding-right: 5px"></i>Request Role Change</a> </div> </div> <!-- end panel --> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Role Change Status</h3> <a class="btn btn-primary pull-right" ng-click="rcs_show()"><i style="padding-right: 5px"></i>Show</a> </div> <div class="list-group" ng-show="rcs_status"> <div class="list-group-item"> <div class="row"> <div class="col-md-2"> <h4>Last Updated</h4> </div> <div class="col-md-1"> <h4>Current Role</h4> </div> <div class="col-md-2"> <h4>Requested Role</h4> </div> <div class="col-md-1"> <h4>Status</h4> </div> <div class="col-md-2"> <h4>User Comment</h4> </div> <div class="col-md-3"> <h4>Reviewers Comment</h4> </div> </div> </div> <div class="list-group-item" ng-repeat="request in requests" id="{{request.key}}"> <div class="row"> <div class="col-md-2"> {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}} </div> <div class="col-md-1"> {{request.current_role}} </div> <div class="col-md-2"> {{request.request_role}} </div> <div class="col-md-1"> {{request.request_status}} </div> <div class="col-md-2"> {{request.user_comment}} </div> <div class="col-md-3"> {{request.reviewers_comment}} </div> <div class="col-md-1"> <button type="button" class="btn btn-danger" ng-click="deleteRequest(request.key)">Delete</button> </div> </div> </div> </div> </div> </div>'),a.put("views/manage/regadmin.html",'<!DOCTYPE html> <div class="container"> <h3>Region Administration</h3> <p> On the page, Region Managers can create reports for: </p><p> -Volunteers (This report will show how many hours have been reported and verified for each volunteer in your Region) </p> <p> -Volunteer comparison (This report will show how many volunteer hours your region has logged, and how many volunteers have logged hours compared to other regions) </p> -Events (This report will show a complete view of all events put on by the region within a selected time frame) <p> -Inventory Use (This report will show the number of events each peice of inventory has been used within a selected time frame) </p> Other Management functionality can be added based on organizational needs. These reports should have a link to export to excel for more functionality.  </div>'),a.put("views/manage/superadmin.html",'<!DOCTYPE html> <div class="container"> <h3>Administration</h3> <p> On the page, Admins can create reports for: </p><p> - Membership Report (This report will show the status of training and volunteer hours, as well as gains and losses of people at all levels and roles) </p> <p> - Region Comparison Report (This report will show how the Regions compare to each other in number of events, number of volunteers, and amount of donations) </p> <p> - Events Report (This report will show a list of events within a selected time frame) </p> <p> - Donation Report (This report will show a list of donations within a selected time frame) </p> <p> - Inventory Report (This report will show a list of HOW\'s inventory, the item condition, and the amount it has been used) </p> Other Management functionality can be added based on organizational needs. These reports should have a link to export to excel for more functionality.  </div>'),a.put("views/manage/training.html",'<!DOCTYPE html> <div class="container"> <h3>My Training</h3> </div>'),a.put("views/masterfooter.html",'<!DOCTYPE html> <footer class="foot"> <div class="social"> <hr> <button><a href="https://twitter.com/Heroesonthewate"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a></button> <button><a href="http://www.facebook.com/HeroesontheWater"><i class="fa fa-facebook-f fa-2x" aria-hidden="true"></i></a></button> <button><a href="https://www.linkedin.com/company/heroes-on-the-water"><i class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a></button> <button><a href="https://www.youtube.com/user/PaddleFishHeal/"><i class="fa fa-youtube-play fa-2x" aria-hidden="true"></i></a></button> <hr> </div> <div class="footerlinks"> <div class="column aboutus"> <h4>ABOUT US</h4> <!--thad: ui router opts was removed until proper actions are taken ui-sref-opts="{reload: true}"--> <a ng-href="#/whoweare"> <p>Why HOW?</p> </a> <a href="http://heroesonthewater.org/who-we-are/board/"> <p>Board &amp; Staff</p> </a> <a href="http://heroesonthewater.org/who-we-are/partnerships/"> <p>Partnerships</p> </a> <a href="http://heroesonthewater.org/who-we-are/financials/"> <p>Financials</p> </a> <a href="http://heroesonthewater.org/contact/"> <p>Contact</p> </a> </div> <div class="column howtohelp"> <h4>HOW TO HELP</h4> <!--thad: ui router opts was removed until proper actions are taken ui-sref-opts="{reload: true}"--> <a ng-href="#/events"> <p>Volunteer</p> </a> <a href="http://heroesonthewater.org/how-to-help/sponsor/"> <p>Sponsor</p> </a> <a href="http://heroesonthewater.org/how-to-help/start-a-chapter/"> <p>Start a Chapter</p> </a> <a href="http://heroesonthewater.org/how-to-help/in-kind-contribution/"> <p>In-Kind Contribution</p> </a> </div> <div class="column news"> <h4>NEWS</h4> <a href="http://heroesonthewater.org/blog/"> <p>Read Our Blog</p> </a> <a href="http://heroesonthewater.org/media/photo-gallery/"> <p>Photo Gallery</p> </a> <a href="http://heroesonthewater.org/media/press/"> <p>Press</p> </a> </div> <div class="column meta"> <h4>META</h4> <a href="http://heroesonthewater.org/terms-of-use/"> <p>Terms of Use</p> </a> <a href="http://heroesonthewater.org/privacy-policy/"> <p>Privacy Policy</p> </a> </div> <div class="column buttons"> <a href="http://visitor.r20.constantcontact.com/d.jsp?&#10;&#10;llr=t5yuarcab&amp;p=oi&amp;m=1102230217683&amp;sit=oimdo5qdb&amp;f=612&#10;&#10;b8958-893d-420d-99b7-0d5e512a9507" target="_blank"> <button id="subscribe"><i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i> <h2>SUBSCRIBE</h2> </button> </a> <button ng-click="showDonate()" id="donate" style="margin-top:15px"> <h2>DONATE</h2> </button> </div> <div class="column awards"> <img id="topnonprofit-badge" src="/assets/images/footer/2015TopNonprofitBadge.png" alt="topnonprofit-badge" width="144px"> <img id="cfc-badge" src="/assets/images/footer/HOW-CFC.jpg" alt="cfc-badge" width="70px"> <img id="guidestar-badge" src="/assets/images/footer/Guidestar-Gold-Seal.png" alt="guidestar-badge" width="61px"> </div> </div> <div class="love"> <a href="http://r4alliance.org/"> <img id="r4-badge" src="/assets/images/footer/r4-alliance-logo-100.png" alt="r4-badge" width="60px"> </a> <p>Made with <i class="fa fa-heart" style="color: #DD2E44" aria-hidden="true"></i> in Dallas, Texas. &copy;2016 All Rights Reserved.</p> </div> </footer>'),a.put("views/masternav.html",'<!DOCTYPE html> <header> <div class="container-fluid" id="navbar-master"> <!-- logo and toggle --> <div class="logo"> <img ng-href="#/home" src="assets/images/logos/bannerlogo.png" width="240px"> </div> <div class="mobilenavtoggle"> <button class="hamburger hamburger--slider" type="button" ng-click="toggleMenu()"> <span class="hamburger-box"> <span class="hamburger-inner"></span> </span> </button> </div> <!-- Collapsible portion --> <!-- navbar left --> <div class="nav navbar-left"> <!-- thad removed ui-sref-active="current" until fix is implemented--> <a ng-repeat="nav in leftnav" ng-href="{{nav.state}}"> <h2>{{nav.text}}</h2> </a> </div> <!-- navbar right show if sessionState is FALSE --> <div class="nav navbar-right" ng-hide="sessionState"> <!-- <a href="http://visitor.r20.constantcontact.com/d.jsp?&#10;&#10;llr=t5yuarcab&amp;p=oi&amp;m=1102230217683&amp;sit=oimdo5qdb&amp;f=612&#10;&#10;b8958-893d-420d-99b7-0d5e512a9507" target="_blank">\r\n                <button id="subscribe"><i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i>\r\n                    <h2>SUBSCRIBE</h2>\r\n                </button>\r\n            </a> --> <button ng-click="showDonate()" id="donate" style="margin-top:15px"> <h2>DONATE</h2> </button> <a ng-href="{{rightnav[0].state}}"> <h2>{{rightnav[0].text}}</h2> </a> </div> <!-- navbar right show if sessionState is TRUE --> <div class="nav navbar-right" ng-show="sessionState"> <!-- <button id="subscribe"><i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i>\r\n                <h2>SUBSCRIBE</h2>\r\n            </button> --> <button ng-click="showDonate()" id="donate" style="margin-top:15px"> <h2>DONATE</h2> </button> <li class="dropdown"> <a class="toggle-dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#/manage/dash"> <span style="margin-right:5px"><i class="fa fa-user fa-lg" aria-hidden="true"></i></span> <h2>{{rightnavloggedin[0].text}}</h2> <span class="caret"></span> </a> <ul ng-switch="sessionUserRole" class="managelinks dropdown-menu"> <!-- ui-sref-opts was removed thad--> <li ng-switch-when="National Staff"> <a ng-repeat="nav in nationalNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-when="Chapter Lead"> <a ng-repeat="nav in ltmNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-when="Volunteer"> <a ng-repeat="nav in volunteerNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-when="Participant"> <a ng-repeat="nav in participantNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-default> <a ng-repeat="nav in participantNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li role="separator" class="divider"></li> <li> <a ng-href="{{rightnavloggedin[0].state}}"> <h3>Management Dashboard</h3> </a> </li> <li> <a href="#" ng-click="logout()"> <h3>Sign Out</h3> </a> </li> </ul> </li> </div> <!-- end navbar-right --> </div> <!-- end container-fluid --> <div id="menu" ng-show="menuActive" class="fadein fadeout"> <div class="menulinks"> <a ng-href="#/home" ng-click="dismissMenu()"> <h3>HOME</h3> </a> <div ng-switch="sessionUserRole"> <div ng-switch-when="National Staff"> <a ng-repeat="nav in nationalNav" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> <div ng-switch-when="Chapter Lead"> <a ng-repeat="nav in ltmNav" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> <div ng-switch-when="Volunteer"> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> <div ng-switch-when="Participant"> <a ng-repeat="nav in participantNav" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> </div> <div ng-show="sessionUserRole"> <hr> <a href="#" ng-click="logout()"> <h3>Sign Out</h3> </a> </div> <hr> <div class="loggedout" ng-hide="sessionState"> <a ng-href="{{rightnav[0].state}}" ng-click="dismissMenu()"> <h2>{{rightnav[0].text}}</h2> </a> </div> <div class="loggedin" ng-show="sessionState"> <div ng-switch="root.userRole"> <div ng-switch-when="National Staff"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> <div ng-switch-when="Chapter Lead"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> <div ng-switch-when="Volunteer"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> <div ng-switch-when="Participant"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> </div> </div> </div> </div> </header>'),a.put("views/public.events.html",'<!DOCTYPE html> <div class="container"> <h3>Events</h3> <form class="form-horizontal"> <div class="form-group"> <label class="control-label" for="fname">Search:</label> <div> <input id="fname" name="newQuery.search" type="text" placeholder="Enter query here" class="form-control input-md pull-left" ng-change="search()" ng-model="newQuery.search" ng-required="true" ng-model-options="{ debounce: 1000 }"> </div> </div> </form> <div class="row event-row"> <div class="col-md-4" ng-repeat="event in eventList"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{event.name}}</h3> </div> <div> <img src="/assets/images/logos/logo-md.png" class="img-responsive" width="100%"> </div> <div class="list-group"> <div class="list-group-item"> <h6 class="list-group-item-text">Start Time</h6> <h4 class="list-group-item-heading">{{event.startTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">End Time</h6> <h4 class="list-group-item-heading">{{event.endTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Location</h6> <h4 class="list-group-item-heading">{{event.location}}</h4> </div> </div> <div class="panel-footer" style="height:55px"> <a class="btn btn-primary pull-right" ng-click="showDescription($index)"><i class="glyphicon glyphicon-plus" style="padding-right: 5px"></i>Join Event</a> </div> </div> </div> </div> </div> <master-footer></master-footer>'),a.put("views/whoweare.html",'<!DOCTYPE html><!--The Who we are page that link to more specific information about HOW  --> <div class="hero"> <img id="heroimg" src="/assets/images/whoweare/whoweare-splash.png" alt="Whoweare Hero"> <img id="heroquote" src="/assets/images/whoweare/quote.png" alt="Whoweare Quote"> <div id="herodesc"> <img id="desctextbg" src="/assets/images/whoweare/roundedrect.png" alt="Whoweware Textbg"> <h3 class="desctext">Heroes on the Water helps our Nation’s warriors and veterans from all branches of the United States military unwind using the therapeutic qualities of fishing from kayaks. What looks like a day trip of paddling and fishing is in fact something much deeper and long-lasting.</h3> </div> <div id="herologo"> <img id="how-logomark" src="/assets/images/logos/logo-md.png" alt="Whoweare Logostamp"> </div> </div> <!-- end hero --> <div class="whoweare-body"> <hr> <div id="whoweare-text"> <p>Founded in 2007, our unique kayak fishing program allows the participants a</p> <h6> chance to decompress from the stresses</h6> <p> associated with combat and the physical rigors of rehabilitation. Warriors enjoy these benefits while on guided fishing trips held in local communities around the country.</p> <br> <br> <p>Participants receive basic kayak fishing and paddling instruction, angling clinics and paddling classes for participants with skill sets ranging from beginners to the most experienced paddlers. The program also assists these personnel in adapting these newly developed skills to their new abilities. Adaptive kayaks, kayaking accessories and angling equipment is offered on an as needed basis to accommodate a soldier’s particular needs.</p> <br> <br> <p>Our program is unique in that it is a</p> <h6> long-term activity</h6> <p>, not a one-time event. We believe that the effectiveness of the program is a direct result of engaging the wounded military personnel for the long-term.</p> <br> <br> <p>One soldier, at the Center for the Intrepid, called what we do </p> <h6>“Triple Therapy” or “all at once therapy.”</h6> <p> On post he has to go to the gym for physical therapy, then go upstairs for his occupational therapy, and then go to the psychologist for mental therapy.</p> <h6> With kayak fishing he gets it all at once</h6> <p> – physical therapy from paddling and fishing, occupational therapy learning a lifetime sport/activity, and mental therapy from relaxing in nature with no distractions or expectations of performance.</p> </div> <div id="whoweare-video"> <iframe id="youtubevid" src="https://www.youtube.com/embed/RcZuQXn4KSY?list=FLRn_wcQOQE9FbdIDdjab5lQ&enablejsapi=1" frameborder="0" allowfullscreen></iframe> </div> </div> <!-- end whoweare-body --> <div class="jumpbar who"> <div class="column col1"> <h4>PARTNERS</h4> <p>Learn about the organizations we collaborate with and how you can help too.</p> <a href="http://heroesonthewater.org/who-we-are/partnerships/"> <button id="learnmore" style="margin-top:15px"> <h2>LEARN MORE</h2> </button> </a> </div> <div class="column col2"> <h4>THERAPEUTIC PROGRAMS</h4> <p>Programs provide alternative therapy to individuals diagnosed with PTSD and/or traumatic brain injury.</p> <a href="http://heroesonthewater.org/who-we-are/programs/therapeutic-programs/"> <button id="learnmore" style="margin-top:15px"> <h2>LEARN MORE</h2> </button> </a> </div> <div class="column col3"> <h4>THE BOARD</h4> <p>Meet the people who dedicate themselves everyday to making a soldier\'s day.</p> <a href="http://heroesonthewater.org/who-we-are/board/"> <button id="learnmore" style="margin-top:15px"> <h2>LEARN MORE</h2> </button> </a> </div> </div> <!-- end jumpbar --> <div class="blogbanner"> <img id="bannerbg" src="/assets/images/whoweare/blog-bg.png" alt="Whoweare Blogbg"> <div class="blogdescoverlay"> <div id="blogdesc"> <h4>Check out stories and updates from our team, partners and supporters</h4> <a href="http://heroesonthewater.org/blog/"> <button id="gotoblog" style="margin-top:15px"> <h2>READ THE BLOG</h2> </button> </a> </div> </div> </div> <!-- end blogbanner --> <master-footer></master-footer>'),
a.put("parts/addInventoryToEvent.html",'<!--<div class="row">--><!--  <div class="col-md-12">--><!--\r\n<ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px;" title="Choose a person">\r\n	<ui-select-match placeholder="Select a person in the list or search his name/age...">{{$item.name}}</ui-select-match>\r\n	<ui-select-choices repeat="person in participantList">\r\n		<div ng-bind-html="person.name | highlight: $select.search"></div>\r\n		<small>\r\n		 email: {{person.email}}\r\n		</small>\r\n	</ui-select-choices>\r\n</ui-select>\r\n--><!--  </div>--><!--</div>--><!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Item</h4> </div> <!-- end modal-header --> <div class="modal-body"> <ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px" title="Choose a person"> <ui-select-match placeholder="Add inventory from your chapter...">{{$item.name}}</ui-select-match> <ui-select-choices repeat="item in selectedInventory"> <div ng-bind-html="item.name | highlight: $select.search"></div> <small> category: {{item.category}} </small> </ui-select-choices> </ui-select> </div> <!-- end modal body --> <div class="modal-footer"> <button type="button" name="submit" class="btn btn-primary" ng-click="addParticipants()">Submit</button> </div>'),a.put("parts/addParticipantsToEvent.html",'<!--<div class="row">--><!--  <div class="col-md-12">--><!--\r\n<ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px;" title="Choose a person">\r\n	<ui-select-match placeholder="Select a person in the list or search his name/age...">{{$item.name}}</ui-select-match>\r\n	<ui-select-choices repeat="person in participantList">\r\n		<div ng-bind-html="person.name | highlight: $select.search"></div>\r\n		<small>\r\n		 email: {{person.email}}\r\n		</small>\r\n	</ui-select-choices>\r\n</ui-select>\r\n--><!--  </div>--><!--</div>--><!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New User</h4> </div> <!-- end modal-header --> <div class="modal-body"> <ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px" title="Choose a person"> <ui-select-match placeholder="Select a person in the list or search his name/age...">{{$item.name}}</ui-select-match> <ui-select-choices repeat="person in participantList"> <div ng-bind-html="person.name | highlight: $select.search"></div> <small> email: {{person.email}} </small> </ui-select-choices> </ui-select> </div> <!-- end modal body --> <div class="modal-footer"> <button type="button" name="submit" class="btn btn-primary" ng-click="addParticipants()">Submit</button> </div>'),a.put("parts/changeChapter.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Change Chapter</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate style="overflow-y: auto; overflow-x: hidden"> <div class="form-group"> <label class="col-md-4 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" class="form-control" ng-options="region as region.text for region in regions" ng-model="newRegion" ng-change="regionUpdate(newRegion)" required> </select> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="chapter">Chapter*</label> <div class="col-md-7"> <select id="chapter" name="chapter" class="form-control" ng-model="newChapter" ng-options="chapter as chapter.value for chapter in chapters" required> </select> </div> </div> <!-- Button - Submit/Cancel --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.chapter.$invalid" ng-click="updateRegionChapter(newRegion, newChapter)">Submit</button> <button id="cancel" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </form> </div> <!-- end modal body -->'),a.put("parts/chapterAdd.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Chapter</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="chapterForm" ng-submit="postChapter()" class="form-horizontal" novalidate> <fieldset> <!-- Text - Chapter Name --> <div class="form-group"> <label class="col-md-4 control-label" for="name">Chapter Name*</label> <div class="col-md-7"> <input id="name" name="name" type="text" class="form-control input-md" ng-model="newChapter.name" ng-required="true"> <p ng-show="chapterForm.name.$invalid && !chapterForm.name.$pristine" class="help-block">Enter a valid chapter name.</p> </div> </div> <!-- Text - Manager Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lead">Assigned Chapter Manager*</label> <div class="col-md-7"> <input id="manager" name="manager" type="text" class="form-control input-md" ng-model="newChapter.lead" ng-required="true"> <p ng-show="chapterForm.manager.$invalid && !chapterForm.manager.$pristine" class="help-block">Enter a valid manager\'s name.</p> </div> </div> <!-- Textarea - Description --> <div class="form-group"> <label class="col-md-4 control-label" for="description">Description</label> <div class="col-md-7"> <textarea class="form-control" id="description" name="description" ng-model="newChapter.description"></textarea> </div> </div> <!-- Text - Email --> <div class="form-group"> <label class="col-md-4 control-label" for="email">Contact Email*</label> <div class="col-md-7"> <input id="email" name="email" type="email" placeholder="johndoe@heroesonthewater.org" class="form-control input-md" ng-model="newChapter.email" ng-required="true"> <p ng-show="chapterForm.email.$invalid && !chapterForm.email.$pristine" class="help-block">Enter a valid email address.</p> </div> </div> <!-- Text - Facebook --> <div class="form-group"> <label class="col-md-4 control-label" for="facebook">Facebook URL*</label> <div class="col-md-7"> <input id="facebook" name="facebook" type="url" placeholder="http://www.facebook.com" class="form-control input-md" ng-model="newChapter.facebook" ng-required="true"> <p ng-show="chapterForm.facebook.$invalid && !chapterForm.facebook.$pristine" class="help-block">Enter a valid facebook address.</p> </div> </div> <!-- Text - Donation --> <div class="form-group"> <label class="col-md-4 control-label" for="donation">Donation URL*</label> <div class="col-md-7"> <input id="donation" name="donation" type="url" placeholder="http://www.paypal.com" class="form-control input-md" ng-model="newChapter.donation" ng-required="true"> <p ng-show="chapterForm.donation.$invalid && !chapterForm.donation.$pristine" class="help-block">Enter a valid donation address.</p> </div> </div> <!-- Select - Region --> <div class="form-group"> <label class="col-md-4 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" class="form-control" ng-options="region as region.text for region in regions" ng-model="newChapter.region"> </select> </div> </div> <!-- Select - State --> <div class="form-group"> <label for="" class="col-md-4 control-label" for="state">State*</label> <div class="col-md-7"> <select ng-options="state as state.name for state in states" class="form-control input-md" ng-model="newChapter.state"></select> </div> </div> <!-- Text - Zip Code --> <div class="form-group"> <label class="col-md-4 control-label" for="zip">Zip Code*</label> <div class="col-md-7"> <input id="location" name="location" type="text" class="form-control input-md" ng-model="newChapter.zip" ng-required="true" placeholder="75202"> <p ng-show="chapterForm.location.$invalid && !chapterForm.location.$pristine" class="help-block">Enter a valid Zip Code.</p> </div> </div> <!-- Label - Required Field Label --> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> </fieldset> </form> </div> <!-- end modal body --> <div class="modal-footer"> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="chapterForm.$invalid" ng-click="postChapter(newChapter)">Submit</button> </div> </div> </div>'),a.put("parts/chapterStatus.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="initialize()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Chapter Status</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div id="chapter-status-modal" class="modal-body"> <!-- This section is available only too National Staff --> <div class="form-group" ng-show="$root.userRole === \'National Staff\'" style="width: 100%"> <div class="row" style="margin-bottom: 10px"> <label class="col-md-3 control-label" for="logLevel">Log level*</label> <div class="col-md-7"> <input name="logLevel" type="radio" ng-model="logLevel" ng-click="levelChanged(logLevel)" value="National">National <input name="logLevel" type="radio" ng-model="logLevel" ng-click="levelChanged(logLevel)" value="Chapter" style="margin-left: 5px">Chapter </div> </div> <div class="row" ng-show="logLevel === \'Chapter\'" style="margin-bottom: 10px"> <label class="col-md-3 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" class="form-control" ng-options="region as region.text for region in regions" ng-model="selectedRegion" ng-change="regionUpdate(selectedRegion)" required> </select> </div> </div> <div class="row" ng-show="logLevel === \'Chapter\'" style="margin-bottom: 10px"> <label class="col-md-3 control-label" for="chapter">Chapter*</label> <div class="col-md-7"> <select id="chapter" name="chapter" class="form-control" ng-model="selectedChapter" ng-options="chapter as chapter.value for chapter in chapters" ng-change="chapterChanged()" required> </select> </div> </div> <div class="row" ng-show="logLevel === \'National\' || selectedChapter" style="margin-bottom: 10px"> <label class="col-md-3 control-label">Log Type*</label> <div class="col-md-7"> <select class="form-control" ng-options="type as type.text for type in logType" ng-model="selectedOption" ng-change="selectedLogOption(selectedOption)" required></select> </div> </div> </div> <!-- This section is available only too National Staff --> <!-- This section is available only too Chapter Lead --> <div class="form-group" ng-show="$root.userRole === \'Chapter Lead\'"> <div class="row" style="margin-bottom: 10px"> <label class="col-md-3 control-label">Log Type*</label> <div class="col-md-7"> <select class="form-control" ng-options="type as type.text for type in logType" ng-model="selectedOption" ng-change="selectedLogOption(selectedOption)" required></select> </div> </div> </div> <hr> <div class="logContainer" ng-show="selectedOption"> <div ng-repeat="log in currentLog "> <label>{{log.ts | date:\'medium\'}}:</label> <p>{{log.msg}}</p> </div> <p ng-show="!currentLog.length" style="text-align: center"> <b>-- No log data available --</b> </p> </div> </div> <!-- end modal body -->'),a.put("parts/donors.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Donation Information</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form class="form-horizontal" name="donation" ng-submit="donate(donation.$valid)"> <fieldset> <!-- Text - First Name --> <div class="form-group"> <label class="col-md-4 control-label" for="fname">First Name*</label> <div class="col-md-7"> <input id="fname" name="fname" type="text" placeholder="John" class="form-control input-md" ng-required="true"> </div> </div> <!-- Text - Last Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lname">Last Name*</label> <div class="col-md-7"> <input id="lname" name="lname" type="text" placeholder="Doe" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="city">Billing Address*</label> <div class="col-md-7"> <input id="address" name="address" type="text" placeholder="" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="city">City*</label> <div class="col-md-7"> <input id="city" name="city" type="text" placeholder="Dallas" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="state">State*</label> <div class="col-md-2"> <input id="state" name="state" type="text" ngpattern="[A-Z]{0,2}" placeholder="TX" class="form-control input-md" ng-required="true"> </div> <label class="col-md-2 control-label" for="zipcode">Zip Code*</label> <div class="col-md-3"> <input id="zipcode" name="zipcode" type="text" ngpattern="[0-9]{0,5}" placeholder="12345" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="creditcard">Credit Card Number*</label> <div class="col-md-7"> <input id="creditcard" name="creditcard" type="text" ngpattern="[0-9,-]{13,19}" placeholder="1234-5678-9123-4567" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="date">Expiration Date*</label> <div class="col-md-4"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="newUserDirectory.DOB" is-open="popup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <label class="col-md-1 control-label" for="cvc">CVC*</label> <div class="col-md-2"> <input id="cvc" name="cvc" type="text" ngpattern="[0-9]{0,3}" placeholder="123" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> </div> <div class="form-group"> <label class="col-md-4 control-label" for="dollaramount">Dollar Amount*</label> <div class="col-md-4"> <input id="dollaramount" type="text" name="dollaramount" type="number" placeholder="$1.00" class="form-control input-md" ng-requied="true"> </div> </div> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-submit="donate()">Donate</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/infoWindow.html",'<div class="infoWindow"> <h4><a href="{{parameter.url}}">{{parameter.name}}</a></h4> <p>{{parameter.contactName}}</p> <p>{{parameter.contactEmail}}</p> </div>'),a.put("parts/manageParticipants.html",'<style>#participantsTable_wrapper>div:nth-child(2)>div {\r\n    margin-right: 3px;\r\n    overflow-x: auto;\r\n}</style> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{event.name +"\'s Participants"}}</h4> </div> <!-- end modal-header --> <div class="modal-body"> <table id="participantsTable" class="display table table-bordered"> <tfoot> <tr> <td> <button ng-click="addParticipant()" type="button" class="btn btn-primary"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button> </td> <td> <input class="form-control" type="text" ng-model="new_row.first"> </td> <td> <input class="form-control" type="text" ng-model="new_row.middle"> </td> <td> <input class="form-control" type="text" ng-model="new_row.last"> </td> <td> <input class="form-control" type="text" ng-model="new_row.email"> </td> <td> <input class="form-control" type="text" ng-model="new_row.phone"> </td> </tr> </tfoot> </table> <div style="display:flex"> <button type="button" ng-click="deleteParticipants()" class="btn btn-danger">Delete selected participants</button> </div> </div> <!-- end modal body -->'),a.put("parts/manageVolunteers.html",'<style>#volunteersTable_wrapper>div:nth-child(2)>div {\r\n    margin-right: 3px;\r\n    overflow-x: auto;\r\n}</style> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{event.name +"\'s Volunteers"}}</h4> </div> <!-- end modal-header --> <div class="modal-body"> <table id="volunteersTable" class="display table table-bordered"> <tfoot> <tr> <td> <button ng-click="addVolunteer()" type="button" class="btn btn-primary"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button> </td> <td> <input class="form-control" type="text" ng-model="new_row.first"> </td> <td> <input class="form-control" type="text" ng-model="new_row.middle"> </td> <td> <input class="form-control" type="text" ng-model="new_row.last"> </td> <td> <input class="form-control" type="text" ng-model="new_row.email"> </td> <td> <input class="form-control" type="text" ng-model="new_row.phone"> </td> </tr> </tfoot> </table> <div style="display:flex"> <button type="button" ng-click="deleteVolunteers()" class="btn btn-danger">Delete selected volunteers</button> </div> </div> <!-- end modal body -->'),a.put("parts/manageadditionalchapters.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="initialize()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add/Edit Additional Chapters</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div id="manage-additional-chapters" class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate> <div class="row"> <div style="margin-top: 10px"> <div> <select id="secondaryRegion" name="region" class="form-control region-dd" ng-options="region as region.text for region in regions" ng-model="newRegion" ng-change="regionUpdate(newRegion)" required> </select> </div> <div> <select id="secondaryChapter" name="chapter" class="form-control chapter-dd" ng-model="newChapter" ng-options="chapter as chapter.value for chapter in chapters" required> </select> </div> <div> <button id="add" name="add" class="btn btn-primary additonal-chapter-btn-green" ng-disabled="userForm.chapter.$invalid" ng-click="addChapter()">Add Chapter</button> </div> </div> <div style="margin-top: 10px"> <select name="currentChapters" multiple class="form-control" ng-model="currentChapter" ng-options="chapter as chapter.chapter for chapter in userChapters" required></select> <button id="remove" name="remove" class="btn btn-primary additonal-chapter-btn-red" ng-disabled="userForm.currentChapters.$invalid" ng-click="removeChapter()">Remove Chapter</button> </div> </div> <div class="row" style="text-align: center; margin-top: 10px"> <div> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="!submitFlag" ng-click="updateChapters()">Submit</button> <button id="cancel" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </form> </div> <!-- end modal body -->'),a.put("parts/managerolechangerequest.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="update()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Manage Role Change Requests</h4> <h6><i class="fa fa-chevron-down pull-left" aria-hidden="true"></i>Click this icon for details</h6> <h6><i class="fa fa-minus-square pull-left" aria-hidden="true"></i>Click to decline request</h6> <h6><i class="fa fa-plus-square pull-left" aria-hidden="true"></i>Click to approve request</h6> </div> <!-- end modal-header --> <!-- start modal body --> <div class="modal-body"> <!-- Pending Requests --> <div class="panel panel-default"> <div class="panel-heading clearfix" id="pending-requests"> <h3 class="panel-title pull-left">Pending Requests &nbsp</h3> <span class="badge" ng-show="alertPending">{{pendingCount}}</span> <i ng-click="showForm1a = !showForm1a" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> </div> <div ng-repeat="request in pending_requests" ng-show="showForm1a"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{request.name}} :&nbsp</h3> <h3 class="panel-title pull-left">{{request.request_role}}</h3> <i ng-click="showForm1b = !showForm1b" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> <i ng-click="declined(request.key, request)" class="fa fa-minus-square pull-right" aria-hidden="true"></i> <i ng-click="approved(request.key, request)" class="fa fa-plus-square pull-right" aria-hidden="true"></i> </div> <div ng-show="showForm1b"> <div>Email: {{request.email}}</div> <div>Current Role: {{request.current_role}}</div> <div>Request Status: {{request.request_status}}</div> <div>Created: {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}}</div> <div>User Comments: {{request.user_comment}}</div> </div> </div> </div> <!-- Approved Requests --> <div class="panel panel-default"> <div class="panel-heading clearfix" id="approved-requests"> <h3 class="panel-title pull-left">Approved Requests</h3> <i ng-click="showForm2a = !showForm2a" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> </div> <div ng-repeat="request in approved_requests" ng-show="showForm2a"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{request.name}} :&nbsp</h3> <h3 class="panel-title pull-left">{{request.request_role}}</h3> <i ng-click="showForm2b = !showForm2b" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> <div ng-show="showForm2b"> <div>Email: {{request.email}}</div> <div>Current Role: {{request.current_role}}</div> <div>Request Status: {{request.request_status}}</div> <div>Created: {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}}</div> <div>Reviewed By: {{request.reviewer}}</div> <div>User Comments: {{request.user_comment}}</div> <div>Reviewer Comments: {{request.reviewers_comment}}</div> </div> </div> </div> <!-- Declined Requests --> <div class="panel panel-default"> <div class="panel-heading clearfix" id="declined-requests"> <h3 class="panel-title pull-left">Declined Requests</h3> <i ng-click="showForm3a = !showForm3a" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> </div> <div ng-repeat="request in declined_requests" ng-show="showForm3a"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{request.name}} :&nbsp</h3> <h3 class="panel-title pull-left">{{request.request_role}}</h3> <i ng-click="showForm3b = !showForm3b" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> <div ng-show="showForm3b"> <div>Email: {{request.email}}</div> <div>Current Role: {{request.current_role}}</div> <div>Request Status: {{request.request_status}}</div> <div>Created: {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}}</div> <div>Reviewed By: {{request.reviewer}}</div> <div>User Comments: {{request.user_comment}}</div> <div>Reviewer Comments: {{request.reviewers_comment}}</div> </div> </div> </div> </div> <!-- end modal body -->'),a.put("parts/newEventForm.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Event</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="eventForm" ng-submit="postEvent()" class="form-horizontal" novalidate> <fieldset> <!-- Text - Event Name --> <div class="form-group"> <label class="col-md-4 control-label" for="name">Event Name*</label> <div class="col-md-7"> <input id="name" name="name" type="text" class="form-control input-md" ng-model="newEvent.name" ng-required="true"> <p ng-show="eventForm.name.$invalid && !eventForm.name.$pristine" class="help-block">Enter a valid event name.</p> </div> </div> <!-- Text - Manager Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lname">Assigned Event Manager*</label> <div class="col-md-7"> <input id="manager" name="manager" type="text" class="form-control input-md" ng-model="newEvent.eventManager" ng-required="true"> <p ng-show="eventForm.manager.$invalid && !eventForm.manager.$pristine" class="help-block">Enter a valid manager\'s name.</p> </div> </div> <!-- Datepicker - Start date/time --> <div class="form-group"> <label class="col-md-4 control-label" for="sdate">Start Date*</label> <div class="col-md-7"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="st" is-open="startpopup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="startopen()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <!-- Datepicker - End date/time --> <div class="form-group"> <label class="col-md-4 control-label" for="edate">End Date*</label> <div class="col-md-7"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="et" is-open="endpopup.opened" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="endopen()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="location">Location*</label> <div class="col-md-7"> <input id="location" name="location" type="text" class="form-control input-md" ng-model="newEvent.location" ng-required="true" placeholder="211 S Akard St, Dallas, Texas"> <p ng-show="eventForm.location.$invalid && !eventForm.location.$pristine" class="help-block">Enter a valid location.</p> </div> </div> <!-- Text - Email --> <div class="form-group"> <label class="col-md-4 control-label" for="email">Contact Email*</label> <div class="col-md-7"> <input id="email" name="email" type="email" placeholder="johndoe@heroesonthewater.org" class="form-control input-md" ng-model="newEvent.email" ng-required="true"> <p ng-show="eventForm.email.$invalid && !eventForm.email.$pristine" class="help-block">Enter a valid email address.</p> </div> </div> <!-- Text - Phone # --> <div class="form-group"> <label class="col-md-4 control-label" for="phonenum">Contact Number*</label> <div class="col-md-7"> <input id="phonenum" name="phonenum" type="text" placeholder="(123)457-6890" class="form-control input-md mask" ng-model="newEvent.mobileNumber" ng-minlength="9" ng-required="true "> <span class="help-block">10 digits only; no formatting, prefixes or extensions.</span> <p ng-show="eventForm.phonenum.$invalid && !eventForm.phonenum.$pristine " class="help-block">Enter a valid phone number.</p> </div> </div> <!-- Select - Status --> <!--\r\n			<div class="form-group ">\r\n				<label class="col-md-4 control-label " for="status ">status*</label>\r\n				<div class="col-md-7 ">\r\n					<select id="status " name="status " class="form-control " ng-options="status as status.displayName for status in states " ng-model="newEventDirectory.status ">\r\n						<option value=" "></option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n--> <!-- Dropdown - Chapter --> <!-- <div class="form-group ">\r\n				<label class="col-md-4 control-label " for="chapter ">Hosting Chapter</label>\r\n				<div class="col-md-7 ">\r\n					 <p>chapter dropdown will go here soon</p>\r\n					<select id="chapter " name="chapter " class="form-control " ng-options="chapter as chapter.displayName for chapter in chapters " ng-model="newEvent.chapter "></select>\r\n					ng-disabled="$scope.newEventDirectory.region==n ull "\r\n				</div>\r\n			</div>  --> <!-- Textarea - Description --> <div class="form-group"> <label class="col-md-4 control-label" for="description ">Description</label> <div class="col-md-7"> <textarea class="form-control" id="description " name="description " ng-model="newEvent.description "></textarea> </div> </div> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit "></label> <div class="col-md-7"> <button id="submit " name="submit " class="btn btn-primary" ng-disabled="eventForm.$invalid ">Submit</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/newItemInventoryForm.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Item</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form class="form-horizontal"> <fieldset> <!-- Text - Item Name --> <div class="form-group"> <label class="col-md-4 control-label" for="name_of_item">Item Name*</label> <div class="col-md-7"> <input id="name_of_item" name="name_of_item" type="text" placeholder="Red Kayak" class="form-control input-md" ng-model="newItem.name_of_item" ng-required="true"> </div> </div> <!-- Dropdown - Category --> <div class="form-group"> <label class="col-md-4 control-label" for="category">Category*</label> <div class="col-md-7"> <select id="category" name="category" class="form-control" ng-options="category as category.displayName for category in categories" ng-model="newItem.category"> <option value=""></option> </select> </div> </div> <!-- Dropdown - Condition --> <div class="form-group"> <label class="col-md-4 control-label" for="condition">Condition*</label> <div class="col-md-7"> <select id="condition" name="condition" class="form-control" ng-options="condition as condition.displayName for condition in conditions" ng-model="newItem.condition"> <option value=""></option> </select> </div> </div> <!-- Datepicker - Purchase Date --> <div class="form-group"> <label class="col-md-4 control-label" for="purchase_date">Purchase Date</label> <div class="col-md-7"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="newItem.purchase_date" is-open="popup.opened" datepicker-options="dateOptions" ng-required="false" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <!-- Dropdown - Chapter --> <div class="form-group"> <label class="col-md-4 control-label" for="chapter">Owned By*</label> <div class="col-md-7"> <!-- <p>chapter dropdown will go here soon</p> --> <select id="chapter" name="chapter" class="form-control"> <option value="abc">test-option</option> </select> <!--  ng-disabled="$scope.newUserDirectory.region == null" --> </div> </div> <!-- Textarea - Notes --> <div class="form-group"> <label class="col-md-4 control-label" for="notes">Additional Notes</label> <div class="col-md-7"> <textarea class="form-control" id="notes" name="notes" ng-model="newItem.notes"></textarea> </div> </div> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-click="postItem()">Submit</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),
a.put("parts/newUserDirectoryForm.html",'<div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Sign Up</h4> </div> <!-- end modal-header --> <div id="registration_form" class="modal-body" ng-init="initialize()"> <form name="userForm" class="form-horizontal" ng-submit="postUser(userForm)" novalidate style="height: 500px; overflow-y: auto; overflow-x: hidden"> <fieldset> <!-- First Name --> <div class="form-group"> <label class="col-md-4 control-label" for="fname">First Name*</label> <div class="col-md-7"> <input id="fname" name="fname" type="text" placeholder="John" ng-class="{\'highlight_field\': submitted && userForm.fname.$invalid}" class="form-control input-md" ng-model="newUserDirectory.name.first" required> <p ng-show="submitted && userForm.fname.$error.required" class="help-block">First name is required.</p> </div> </div> <!-- Last Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lname">Last Name*</label> <div class="col-md-7"> <input id="lname" name="lname" type="text" placeholder="Doe" ng-class="{\'highlight_field\': submitted && userForm.lname.$invalid}" class="form-control input-md" ng-model="newUserDirectory.name.last" required> <p ng-show="submitted && userForm.lname.$error.required" class="help-block">Last name is required.</p> </div> </div> <!-- Address 1 --> <div class="form-group"> <label class="col-md-4 control-label" for="Address1">Address 1*</label> <div class="col-md-7"> <input id="Address1" name="Address1" type="text" placeholder="Street" ng-class="{\'highlight_field\': submitted && userForm.Address1.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.line1" required> <p ng-show="submitted && userForm.Address1.$error.required" class="help-block">Address 1 is required.</p> </div> </div> <!-- Address 2 --> <div class="form-group"> <label class="col-md-4 control-label" for="Address2">Address 2</label> <div class="col-md-7"> <input id="Address2" name="Address2" type="text" placeholder="APT/SUITE" class="form-control input-md" ng-model="newUserDirectory.address.line2"> </div> </div> <!-- City --> <div class="form-group"> <label class="col-md-4 control-label" for="City">City*</label> <div class="col-md-7"> <input id="City" name="City" type="text" placeholder="City" ng-class="{\'highlight_field\': submitted && userForm.City.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.city" required> <p ng-show="submitted && userForm.City.$error.required" class="help-block">City is required.</p> </div> </div> <!-- State--> <div class="form-group"> <label for="" class="col-md-4 control-label">State*</label> <div class="col-md-7"> <select name="state" ng-options="state as state.name for state in states" ng-class="{\'highlight_field\': submitted && userForm.state.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.state" required></select> <p ng-show="submitted && userForm.state.$error.required" class="help-block">State is required.</p> </div> </div> <!-- Zip --> <div class="form-group"> <label class="col-md-4 control-label" for="Zip">Zip*</label> <div class="col-md-7"> <input id="Zip" name="Zip" type="text" placeholder="99999" ng-class="{\'highlight_field\': submitted && userForm.Zip.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.zip" ng-change="ZipUpdate()" ng-model-options="{debounce:1000}" required> <p ng-show="submitted && userForm.Zip.$error.required" class="help-block">Zip code is required.</p> </div> </div> <!-- DOB --> <div class="form-group"> <label class="col-md-4 control-label" for="date">Date of Birth*</label> <div class="col-md-7"> <p class="input-group"> <input type="text" name="dob" id="sanicDOB" length="10" ng-pattern="/^([0][1-9]|[1][0-2])[- /.]([0][1-9]|[1-2][0-9]|[3][0-1])[- /.](19|20)\\d\\d$/" ng-class="{\'highlight_field\': submitted && userForm.dob.$invalid}" class="form-control input-md mask" placeholder="mm/dd/yyyy" uib-datepicker-popup="{{format}}" ng-model="newUserDirectory.DOB" is-open="popup.opened" datepicker-options="dateOptions" close-text="Close" alt-input-formats="altInputFormats" required> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p><p ng-show="submitted && userForm.dob.$error.required" class="help-block">Date of birth is required.</p> <p ng-show="userForm.dob.$error.pattern" class="help-block">Valid date of birth is required</p>  </div> </div> <!-- Gender --> <div class="form-group"> <label class="col-md-4 control-label" for="Gender">Gender*</label> <div class="col-md-7"> <select name="Gender" ng-model="newUserDirectory.gender" ng-class="{\'highlight_field\': submitted && userForm.gender.$invalid}" class="form-control" required> <option value="M">M</option> <option value="F">F</option> <option value="N/A">N/A</option> </select> </div> </div> <!-- Email --> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email*</label> <div class="col-md-7"> <input id="email" name="email" type="email" placeholder="johndoe@heroesonthewater.org" ng-class="{\'highlight_field\': submitted && userForm.email.$invalid}" class="form-control input-md" ng-model="newUserDirectory.email" required> <p ng-show="submitted && userForm.email.$error.required" class="help-block">Email address is required.</p> <p ng-show="userForm.email.$error.email" class="help-block">Valid email format required. (test@test.com)</p> </div> </div> <!-- Phone # --> <div class="form-group"> <label class="col-md-4 control-label" for="phonenum">Phone #*</label> <div class="col-md-7"> <input id="phonenum" name="phonenum" type="text" placeholder="(123)457-6890" ng-class="{\'highlight_field\': submitted && userForm.phonenum.$invalid}" class="form-control input-md mask" ng-model="newUserDirectory.phone" ng-minlength="13" ng-maxlength="13" required> <p ng-show="submitted && userForm.phonenum.$error.required" class="help-block">Phone number is required.</p> </div> </div> <!-- Region --> <div class="form-group"> <label class="col-md-4 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" ng-class="{\'highlight_field\': submitted && userForm.region.$invalid}" class="form-control" ng-options="region as region.text for region in regions" ng-model="newUserDirectory.region" ng-change="regionUpdate()" required> </select> <p ng-show="submitted && userForm.region.$error.required && !userForm.region.$valid" class="help-block">Region is required.</p> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="chapter">Chapter*</label> <div class="col-md-7"> <select id="chapter" name="chapter" ng-class="{\'highlight_field\': submitted && userForm.chapter.$invalid}" class="form-control" ng-model="newUserDirectory.chapter" ng-options="chapter as chapter for chapter in chapters" required> </select> <p ng-show="submitted && userForm.chapter.$error.required && !userForm.chapter.$valid" class="help-block">Chapter is required.</p> </div> </div> <!-- Service Type --> <div class="form-group"> <label class="col-md-4 control-label" for="service_type">Service Type*</label> <div class="col-md-7"> <input type="radio" name="service_type" ng-model="newUserDirectory.service_type" ng-click="setDefault()" value="First_Responder"> First Responder <br> <input type="radio" name="service_type" ng-model="newUserDirectory.service_type" ng-click="setDefault()" value="Military"> Military <br> <input type="radio" name="service_type" ng-model="newUserDirectory.service_type" ng-click="setDefault()" ng-value="false" checked> N/A <br> </div> </div> <!-- Service background --> <div class="form-group" ng-show="newUserDirectory.service_type"> <label class="col-md-4 control-label" for="branch">Service background*</label> <div class="col-md-7" ng-if="newUserDirectory.service_type === \'Military\'"> <input id="branch" name="branch" type="text" ng-class="{\'highlight_field\': submitted && userForm.branch.$invalid}" class="form-control input-md" ng-model="newUserDirectory.branch" required> <p ng-show="submitted && userForm.branch.$pristine && !userForm.branch.$valid" class="help-block">Service background is required.</p> </div> <div class="col-md-7" ng-if="newUserDirectory.service_type === \'First_Responder\'"> <select id="first_responder" name="first_responder" class="form-control" ng-model="newUserDirectory.branch" ng-options="branch as branch for branch in branches" required> </select> </div> </div> <!-- Years Served --> <div class="form-group" ng-if="newUserDirectory.service_type"> <label class="col-md-4 control-label" for="Years_Served">Years Served*</label> <div class="col-md-7"> <input id="Years_Served" name="Years_Served" type="text" pattern="^([0-9]|[1-9][0-9]|[1][0][0])$" ng-class="{\'highlight_field\': submitted && userForm.Years_Served.$invalid}" class="form-control input-md" ng-model="newUserDirectory.years" required> <p ng-show="submitted && userForm.Years_Served.$error.required && !userForm.Years_Served.$valid" class="help-block">Years served is required.</p> <p ng-show="userForm.Years_Served.$error.pattern" class="help-block">Valid range is 0-100</p> </div> </div> <!-- Volunteer --> <div class="form-group"> <label class="col-md-4 control-label" for="volunteer_status">Are you signing up to Volunteer?</label> <div class="col-md-7"> <br> <input type="radio" name="volunteer_status" ng-model="newUserDirectory.volunteer" ng-value="false">&nbsp No &nbsp <input type="radio" name="volunteer_status" ng-model="newUserDirectory.volunteer" ng-value="true">&nbsp Yes <br> </div> </div> <!-- Password --> <div class="form-group"> <label class="col-md-4 control-label" for="password">Password*</label> <div class="col-md-7"> <input id="password" name="password" type="password" pattern="^([a-zA-Z0-9@*#!]{6,20})$" ng-class="{\'highlight_field\': submitted && userForm.password.$invalid}" class="form-control input-md" ng-model="newUserDirectory.password" required> <p ng-show="submitted && userForm.password.$pristine" class="help-block">Password is required.</p> <p ng-show="userForm.password.$error.pattern" class="help-block">Password must contain 6-20 characters, allowable characters a-z A-Z 0-9 @ * # !</p> </div> </div> <!-- Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-click="submitted=true">Submit</button> <button type="button" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/passwordReset.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Reset Password</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate> <fieldset> <!-- Text -  Email --> <div class="form-group"> <label class="col-md-4 control-label" for="fname">Email*</label> <div class="col-md-7"> <input id="fname" name="fname" type="email" placeholder="email@address.com" class="form-control input-md" ng-model="userEmail.email" ng-required="true"> <p ng-show="userEmail.email.$invalid && !userEmail.email.$pristine" class="help-block">Enter valid email address.</p> </div> </div> <!-- Button - Submit/Cancel --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.$invalid" ng-click="resetPassword()">Submit</button> <button id="cancel" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/public.events.description.html",'<!DOCTYPE html><!--Modal that displays the specific events informatiom.\r\n	Allows a volunteer on the public facing website to register for the event  --> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{event.name}}</h4> </div> <!-- end modal-header --> <div class="modal-body"> <div class="list-group"> <!-- <div class="list-group-item">\r\n						<h6 class="list-group-item-text">Event Status </h6>\r\n						<h4 class="list-group-item-heading">{{event.Status}}</h4>\r\n					</div> --> <div class="list-group-item"> <h6 class="list-group-item-text">Start Time</h6> <h4 class="list-group-item-heading">{{event.startTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">End Time</h6> <h4 class="list-group-item-heading">{{event.endTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Location</h6> <h4 class="list-group-item-heading">{{event.location}}</h4> </div> <!-- <div class="list-group-item">\r\n						<h6 class="list-group-item-text">Chapter</h6>\r\n						<h4 class="list-group-item-heading">{{event.chapter}}</h4>\r\n					</div> --> <div class="list-group-item"> <h6 class="list-group-item-text">Event Manager</h6> <h4 class="list-group-item-heading">{{event.eventManager}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Contact Number</h6> <h4 class="list-group-item-heading">{{event.mobileNumber}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Contact Email</h6> <h4 class="list-group-item-heading">{{event.email}}</h4> </div> <!-- <div class="list-group-item">\r\n						<h6 class="list-group-item-text">Capacity</h6>\r\n						<h4 class="list-group-item-heading">{{event.capacity}}</h4>\r\n					</div> --> <div class="list-group-item"> <h6 class="list-group-item-text">Description</h6> <h4 class="list-group-item-heading">{{event.description}}</h4> </div> <div style="padding-top: 10px; padding-bottom: 10px"> <a class="btn btn-primary pull-right" ng-click="postRsvp()"><i class="glyphicon glyphicon-plus"></i> Register for Event</a> </div> </div> </div>  <!-- end modal body -->'),a.put("parts/rolerequestchangeform.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Role Change Request Form</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="userForm" class="form-horizontal"> <fieldset> <div class="form-group" style="margin: 5px"> <div class="row"> <label class="col-md-4 control-label" for="fname">Current Role</label> <div class="col-md-7"> <label class="current-role-class">{{currentUserRole}}</label> </div> </div> <div class="row"> <label class="col-md-4 control-label" for="fname">Requested Role</label> <div class="col-md-7"> <select name="role" ng-options="role as role.text for role in roles" class="form-control input-md" ng-model="formData.role" required></select> </div> </div> <div class="row"> <label class="col-md-4 control-label" for="comment">Comments</label> <div class="col-md-7"> <textarea name="comment" class="form-control input-md" placeholder="description" rows="5" ng-model="formData.comment" id="comment" style="margin-top: 5px" required></textarea> </div> </div> <div class="row" style="text-align: center"> <div style="display: inline-block; margin-top: 10px"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.role.$invalid" ng-click="submitForm()">Submit</button> <button id="cancel" name="cancel" class="btn btn-danger" ng-click="cancel()">Cancel</button> </div> </div> </div> </fieldset> </form> </div> <!-- end modal body -->')}]);